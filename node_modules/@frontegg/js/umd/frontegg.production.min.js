/*! For license information please see frontegg.production.min.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Frontegg=t():e.Frontegg=t()}(window,(()=>(()=>{var e={6987:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createConditionEvaluator=void 0;const a=n(3651),i=n(9082);t.createConditionEvaluator=function(e){const t=(0,i.useSanitizer)(e.condition.op);if(!t)return()=>!1;const{isSanitized:n,sanitizedValue:o}=t(e.condition.value);if(!n||void 0===o)return()=>!1;const r=(0,a.useOperation)(e.condition.op,o);return t=>{const n=t[e.condition.attribute];if(void 0===n||!r)return!1;const{isValid:a}=r(n);return e.condition.negate?!a:a}}},2898:function(e,t,n){"use strict";var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,i)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||a(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(6987),t),i(n(7371),t)},7371:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},3840:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.evaluateFeatureFlag=void 0;const a=n(2380);t.evaluateFeatureFlag=function(e,t){if(!e.on)return{treatment:e.offTreatment};const n=function(e,t){var n;return null===(n=e.rules)||void 0===n?void 0:n.find((e=>(0,a.createRuleEvaluator)({rule:e})(t)===a.RuleEvaluationResultEnum.Treatable))}(e,t);return n?{treatment:n.treatment}:{treatment:e.defaultTreatment}}},6095:function(e,t,n){"use strict";var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,i)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||a(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(3840),t)},9314:(e,t,n)=>{"use strict";t.wJ=t.tE=void 0;n(6095),n(521),n(2380),n(2379);var a=n(5535);Object.defineProperty(t,"tE",{enumerable:!0,get:function(){return a.evaluateIsEntitledToFeature}}),Object.defineProperty(t,"wJ",{enumerable:!0,get:function(){return a.evaluateIsEntitledToPermissions}})},195:function(e,t,n){"use strict";var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,i)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||a(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.BooleanOperationsMapper=void 0;const o=n(2379),r=n(6610);i(n(6610),t),i(n(7226),t),t.BooleanOperationsMapper={[o.OperationEnum.Is]:e=>(0,r.useIsOperation)(e)}},6610:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useIsOperation=void 0,t.useIsOperation=function(e){return t=>({isValid:t===e.boolean})}},7226:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BooleanSanitizersMapper=t.singleBooleanSanitizer=void 0;const a=n(2379);t.singleBooleanSanitizer=e=>{const t=void 0!==e.boolean&&(e=>"boolean"==typeof e)(e.boolean)?{boolean:e.boolean}:void 0;return{isSanitized:!!t,sanitizedValue:t}},t.BooleanSanitizersMapper={[a.OperationEnum.Is]:t.singleBooleanSanitizer}},3651:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useOperation=void 0;const a=n(5943),i=n(1610),o=n(9004),r=n(195),s={...a.StringOperationsMapper,...i.NumericOperationsMapper,...o.DateOperationsMapper,...r.BooleanOperationsMapper};t.useOperation=function(e,t){const n=s[e];return n?n(t):void 0}},9082:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useSanitizer=void 0;const a=n(195),i=n(2903),o=n(6886),r=n(1610),s={...i.StringSanitizersMapper,...r.NumericSanitizersMapper,...o.DateSanitizersMapper,...a.BooleanSanitizersMapper};t.useSanitizer=function(e){return s[e]}},9004:function(e,t,n){"use strict";var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,i)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||a(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.DateOperationsMapper=void 0;const o=n(2379),r=n(4569);i(n(4569),t),i(n(5931),t),t.DateOperationsMapper={[o.OperationEnum.On]:e=>(0,r.useDateOnOperation)(e),[o.OperationEnum.OnOrAfter]:e=>(0,r.useDateOnOrAfterOperation)(e),[o.OperationEnum.OnOrBefore]:e=>(0,r.useDateOnOrBeforeOperation)(e),[o.OperationEnum.BetweenDate]:e=>(0,r.useDateBetweenOperation)(e)}},4569:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useDateBetweenOperation=t.useDateOnOrBeforeOperation=t.useDateOnOrAfterOperation=t.useDateOnOperation=void 0,t.useDateOnOperation=function(e){return t=>({isValid:t.getTime()===e.date.getTime()})},t.useDateOnOrAfterOperation=function(e){return t=>({isValid:t.getTime()>=e.date.getTime()})},t.useDateOnOrBeforeOperation=function(e){return t=>({isValid:t.getTime()<=e.date.getTime()})},t.useDateBetweenOperation=function(e){return t=>({isValid:t.getTime()>=e.start.getTime()&&t.getTime()<=e.end.getTime()})}},6886:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DateSanitizersMapper=t.sanitizeDateRange=t.sanitizeSingleDate=t.isValidDate=t.sanitizeDateValue=void 0;const a=n(2379);t.sanitizeDateValue=e=>new Date(e),t.isValidDate=e=>e instanceof Date&&!isNaN(e),t.sanitizeSingleDate=e=>{const n=e.date?(0,t.sanitizeDateValue)(e.date):void 0,a=n&&(0,t.isValidDate)(n)?{date:n}:void 0;return{isSanitized:!!a,sanitizedValue:a}},t.sanitizeDateRange=e=>{const n=e.start?(0,t.sanitizeDateValue)(e.start):void 0,a=e.end?(0,t.sanitizeDateValue)(e.end):void 0,i=n&&a&&(0,t.isValidDate)(n)&&(0,t.isValidDate)(a)?{start:n,end:a}:void 0;return{isSanitized:!!i,sanitizedValue:i}},t.DateSanitizersMapper={[a.OperationEnum.On]:t.sanitizeSingleDate,[a.OperationEnum.OnOrAfter]:t.sanitizeSingleDate,[a.OperationEnum.OnOrBefore]:t.sanitizeSingleDate,[a.OperationEnum.BetweenDate]:t.sanitizeDateRange}},5931:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},1610:function(e,t,n){"use strict";var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,i)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||a(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.NumericOperationsMapper=void 0;const o=n(2379),r=n(9217);t.NumericOperationsMapper={[o.OperationEnum.Equal]:e=>(0,r.useEqualsOperation)(e),[o.OperationEnum.GreaterThan]:e=>(0,r.useGreaterThanOperation)(e),[o.OperationEnum.GreaterThanEqual]:e=>(0,r.useGreaterThanEqualOperation)(e),[o.OperationEnum.LesserThan]:e=>(0,r.useLesserThanOperation)(e),[o.OperationEnum.LesserThanEqual]:e=>(0,r.useLesserThanEqualOperation)(e),[o.OperationEnum.BetweenNumeric]:e=>(0,r.useBetweenNumericOperation)(e)},i(n(9217),t),i(n(9326),t),i(n(1764),t)},9217:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useBetweenNumericOperation=t.useLesserThanEqualOperation=t.useLesserThanOperation=t.useGreaterThanEqualOperation=t.useGreaterThanOperation=t.useEqualsOperation=void 0,t.useEqualsOperation=function(e){return t=>({isValid:t===e.number})},t.useGreaterThanOperation=function(e){return t=>({isValid:t>e.number})},t.useGreaterThanEqualOperation=function(e){return t=>({isValid:t>=e.number})},t.useLesserThanOperation=function(e){return t=>({isValid:t<e.number})},t.useLesserThanEqualOperation=function(e){return t=>({isValid:t<=e.number})},t.useBetweenNumericOperation=function(e){return t=>({isValid:t>=e.start&&t<=e.end})}},9326:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NumericSanitizersMapper=t.sanitizeNumericRange=t.sanitizeSingleNumber=void 0;const a=n(2379),i=e=>"number"==typeof e;t.sanitizeSingleNumber=e=>{const t=void 0!==e.number&&i(e.number)?{number:e.number}:void 0;return{isSanitized:!!t,sanitizedValue:t}},t.sanitizeNumericRange=e=>{const t=void 0!==e.start&&void 0!==e.end&&i(e.start)&&i(e.end)?{start:e.start,end:e.end}:void 0;return{isSanitized:!!t,sanitizedValue:t}},t.NumericSanitizersMapper={[a.OperationEnum.Equal]:t.sanitizeSingleNumber,[a.OperationEnum.GreaterThan]:t.sanitizeSingleNumber,[a.OperationEnum.GreaterThanEqual]:t.sanitizeSingleNumber,[a.OperationEnum.LesserThan]:t.sanitizeSingleNumber,[a.OperationEnum.LesserThanEqual]:t.sanitizeSingleNumber,[a.OperationEnum.BetweenNumeric]:t.sanitizeNumericRange}},1764:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},5943:function(e,t,n){"use strict";var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,i)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||a(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.StringOperationsMapper=void 0;const o=n(2379),r=n(2431);i(n(2431),t),i(n(2097),t),t.StringOperationsMapper={[o.OperationEnum.StartsWith]:e=>(0,r.useStartsWithOperation)(e),[o.OperationEnum.EndsWith]:e=>(0,r.useEndsWithOperation)(e),[o.OperationEnum.Contains]:e=>(0,r.useContainsOperation)(e),[o.OperationEnum.InList]:e=>(0,r.useInListOperation)(e),[o.OperationEnum.Matches]:e=>(0,r.useMatchesOperation)(e)}},2431:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useMatchesOperation=t.useInListOperation=t.useContainsOperation=t.useEndsWithOperation=t.useStartsWithOperation=void 0,t.useStartsWithOperation=function(e){return t=>({isValid:e.list.some((e=>t.startsWith(e)))})},t.useEndsWithOperation=function(e){return t=>({isValid:e.list.some((e=>t.endsWith(e)))})},t.useContainsOperation=function(e){return t=>({isValid:e.list.some((e=>t.includes(e)))})},t.useInListOperation=function(e){return t=>({isValid:e.list.includes(t)})},t.useMatchesOperation=function(e){return t=>{let n;try{n=new RegExp(e.string)}catch(e){return{isValid:!1}}return{isValid:n.test(t)}}}},2903:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StringSanitizersMapper=t.sanitizeListString=t.sanitizeSingleString=void 0;const a=n(2379),i=e=>"string"==typeof e;t.sanitizeSingleString=e=>{const t=void 0!==e.string&&i(e.string)?{string:e.string}:void 0;return{isSanitized:!!t,sanitizedValue:t}},t.sanitizeListString=e=>{const t=void 0!==e.list&&e.list.every((e=>i(e)))?{list:e.list}:void 0;return{isSanitized:!!t,sanitizedValue:t}},t.StringSanitizersMapper={[a.OperationEnum.Matches]:t.sanitizeSingleString,[a.OperationEnum.Contains]:t.sanitizeListString,[a.OperationEnum.StartsWith]:t.sanitizeListString,[a.OperationEnum.EndsWith]:t.sanitizeListString,[a.OperationEnum.InList]:t.sanitizeListString}},2097:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},2379:function(e,t,n){"use strict";var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,i)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||a(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(3982),t)},3982:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.OperationEnum=void 0,(n=t.OperationEnum||(t.OperationEnum={})).InList="in_list",n.StartsWith="starts_with",n.EndsWith="ends_with",n.Contains="contains",n.Matches="matches",n.Equal="equal",n.GreaterThan="greater_than",n.GreaterThanEqual="greater_than_equal",n.LesserThan="lower_than",n.LesserThanEqual="lower_than_equal",n.BetweenNumeric="between_numeric",n.Is="is",n.On="on",n.BetweenDate="between_date",n.OnOrAfter="on_or_after",n.OnOrBefore="on_or_before"},521:function(e,t,n){"use strict";var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,i)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||a(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(3603),t)},3603:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.evaluatePlan=void 0;const a=n(2380);t.evaluatePlan=function(e,t){const n=function(e,t){var n;return null===(n=e.rules)||void 0===n?void 0:n.find((e=>(0,a.createRuleEvaluator)({rule:e})(t)===a.RuleEvaluationResultEnum.Treatable))}(e,t);return n?{treatment:n.treatment}:{treatment:e.defaultTreatment}}},2380:function(e,t,n){"use strict";var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,i)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||a(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(2930),t),i(n(1304),t)},1304:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createRuleEvaluator=void 0;const a=n(2930),i=n(2898);t.createRuleEvaluator=function(e){return t=>e.rule.conditions.every((e=>(0,i.createConditionEvaluator)({condition:e})(t)))?a.RuleEvaluationResultEnum.Treatable:a.RuleEvaluationResultEnum.Insufficient}},2930:(e,t)=>{"use strict";var n,a;Object.defineProperty(t,"__esModule",{value:!0}),t.RuleEvaluationResultEnum=t.TreatmentEnum=t.ConditionLogicEnum=void 0,(t.ConditionLogicEnum||(t.ConditionLogicEnum={})).And="and",(a=t.TreatmentEnum||(t.TreatmentEnum={})).True="true",a.False="false",(n=t.RuleEvaluationResultEnum||(t.RuleEvaluationResultEnum={})).Treatable="treatable",n.Insufficient="insufficient"},5535:function(e,t,n){"use strict";var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,i)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||a(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(3779),t),i(n(1038),t),i(n(5113),t),i(n(4848),t)},5640:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.directEntitlementEvalutor=void 0;const a=n(5113);t.directEntitlementEvalutor=function(e,t,n={}){const i=t.features[e];let o=!1;return i&&null!==i.expireTime&&(o=i.expireTime!==a.NO_EXPIRATION_TIME&&i.expireTime<Date.now(),!o)?{isEntitled:!0}:{isEntitled:!1,justification:o?a.NotEntitledJustification.BUNDLE_EXPIRED:a.NotEntitledJustification.MISSING_FEATURE}}},9838:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.featureFlagEvaluator=void 0;const a=n(5113),i=n(6095),o=n(4668),r=n(2380);t.featureFlagEvaluator=function(e,t,n={}){const s=t.features[e];if(s&&s.featureFlag){const e=(0,o.prepareAttributes)(n),{treatment:t}=(0,i.evaluateFeatureFlag)(s.featureFlag,e);if(t===r.TreatmentEnum.True)return{isEntitled:!0}}return{isEntitled:!1,justification:a.NotEntitledJustification.MISSING_FEATURE}}},4529:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getIsEntitledEvaluators=void 0;const a=n(5640),i=n(9838),o=n(3751);t.getIsEntitledEvaluators=function(){return[a.directEntitlementEvalutor,i.featureFlagEvaluator,o.planTargetingRulesEvalutor]}},3751:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.planTargetingRulesEvalutor=void 0;const a=n(5113),i=n(4668),o=n(2380),r=n(521);t.planTargetingRulesEvalutor=function(e,t,n={}){const s=t.features[e];if(s&&s.planIds&&s.planIds.length>0){const e=(0,i.prepareAttributes)(n),a=t.plans;for(const t of s.planIds){const n=a[t];if(n){const{treatment:t}=(0,r.evaluatePlan)(n,e);if(t===o.TreatmentEnum.True)return{isEntitled:!0}}}}return{isEntitled:!1,justification:a.NotEntitledJustification.MISSING_FEATURE}}},3779:function(e,t,n){"use strict";var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,i)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||a(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(7850),t)},7850:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.evaluateIsEntitledToFeature=void 0;const a=n(5113),i=n(4848),o=n(4529);t.evaluateIsEntitledToFeature=function(e,t,n={}){if(!t)return{isEntitled:!1,justification:a.NotEntitledJustification.MISSING_FEATURE};const r=[];for(const a of(0,o.getIsEntitledEvaluators)())if(r.push(a(e,t,n)),!(0,i.shouldContinue)(r))break;return(0,i.getResult)(r)}},1038:function(e,t,n){"use strict";var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,i)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||a(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(519),t)},519:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.evaluateIsEntitledToPermissions=void 0;const a=n(7850),i=n(5113),o=n(4848),r=n(4852);t.evaluateIsEntitledToPermissions=function(e,t,n){if(!t)return{isEntitled:!1,justification:i.NotEntitledJustification.MISSING_PERMISSION};if(!(0,r.checkPermission)(t.permissions,e))return{isEntitled:!1,justification:i.NotEntitledJustification.MISSING_PERMISSION};const s=function(e,t){return Object.keys(t.features).filter((n=>t.features[n].linkedPermissions.includes(e)))}(e,t);if(!s.length)return{isEntitled:!0};const l=[];for(const e of s)if(l.push((0,a.evaluateIsEntitledToFeature)(e,t,n)),!(0,o.shouldContinue)(l))break;return(0,o.getResult)(l)}},5113:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.NO_EXPIRATION_TIME=t.NotEntitledJustification=void 0,(n=t.NotEntitledJustification||(t.NotEntitledJustification={})).MISSING_FEATURE="MISSING_FEATURE",n.MISSING_PERMISSION="MISSING_PERMISSION",n.BUNDLE_EXPIRED="BUNDLE_EXPIRED",t.NO_EXPIRATION_TIME=-1},4668:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.modifyObjectKeysWithPrefix=t.defaultFronteggAttributesMapper=t.prepareAttributes=void 0;const a=n(193);function i(e){return{email:e.email,emailVerified:e.email_verified,tenantId:e.tenantId,userId:e.id}}function o(e,t){return Object.keys(e).reduce(((n,a)=>(n[`${t}${a}`]=e[a],n)),{})}t.prepareAttributes=function(e={},t){const{custom:n={},jwt:r={}}=e,s=(0,a.flatten)(r);return{...n,...o(t?t(r):i(r),"frontegg."),...o(s,"jwt.")}},t.defaultFronteggAttributesMapper=i,t.modifyObjectKeysWithPrefix=o},1882:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.shouldContinue=t.getResult=void 0;const a=n(5113);t.getResult=function(e){let t=!1;for(const n of e){if(n.isEntitled)return n;n.justification===a.NotEntitledJustification.BUNDLE_EXPIRED&&(t=!0)}return{isEntitled:!1,justification:t?a.NotEntitledJustification.BUNDLE_EXPIRED:a.NotEntitledJustification.MISSING_FEATURE}},t.shouldContinue=function(e){return e.every((({isEntitled:e})=>!e))}},193:(e,t)=>{"use strict";function n(e){return e}Object.defineProperty(t,"__esModule",{value:!0}),t.flatten=void 0,t.flatten=function(e,t){const a=(null==(t=t||{})?void 0:t.delimiter)||".",i=null==t?void 0:t.maxDepth,o=(null==t?void 0:t.transformKey)||n,r={};return function e(n,s,l){l=l||1,Object.keys(n).forEach((function(c){const d=n[c],u=(null==t?void 0:t.safe)&&Array.isArray(d),y=Object.prototype.toString.call(d),f=(p=d)&&p.constructor&&"function"==typeof p.constructor.isBuffer&&p.constructor.isBuffer(p);var p;const g="[object Object]"===y||"[object Array]"===y,S=s?s+a+o(c):o(c);if(!u&&!f&&g&&Object.keys(d).length&&(!(null==t?void 0:t.maxDepth)||i&&l<i))return e(d,S,l+1);r[S]=d}))}(e),r}},4848:function(e,t,n){"use strict";var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,i)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||a(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(4852),t),i(n(4668),t),i(n(1882),t)},4852:(e,t)=>{"use strict";function n(e){return new RegExp("^"+e.replace(/\./g,"\\.").replace(/\*/g,".*")+"$","gs")}Object.defineProperty(t,"__esModule",{value:!0}),t.createPermissionCheckRegex=t.checkPermission=void 0,t.checkPermission=function(e,t){return Object.keys(e).some((e=>n(e).test(t)))},t.createPermissionCheckRegex=n},9714:e=>{"use strict";var t=function(e){return function(e){return!!e&&"object"==typeof e}(e)&&!function(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||function(e){return e.$$typeof===n}(e)}(e)},n="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function a(e,t){return!1!==t.clone&&t.isMergeableObject(e)?s((n=e,Array.isArray(n)?[]:{}),e,t):e;var n}function i(e,t,n){return e.concat(t).map((function(e){return a(e,n)}))}function o(e){return Object.keys(e).concat(function(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter((function(t){return e.propertyIsEnumerable(t)})):[]}(e))}function r(e,t){try{return t in e}catch(e){return!1}}function s(e,n,l){(l=l||{}).arrayMerge=l.arrayMerge||i,l.isMergeableObject=l.isMergeableObject||t,l.cloneUnlessOtherwiseSpecified=a;var c=Array.isArray(n);return c===Array.isArray(e)?c?l.arrayMerge(e,n,l):function(e,t,n){var i={};return n.isMergeableObject(e)&&o(e).forEach((function(t){i[t]=a(e[t],n)})),o(t).forEach((function(o){(function(e,t){return r(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))})(e,o)||(r(e,o)&&n.isMergeableObject(t[o])?i[o]=function(e,t){if(!t.customMerge)return s;var n=t.customMerge(e);return"function"==typeof n?n:s}(o,n)(e[o],t[o],n):i[o]=a(t[o],n))})),i}(e,n,l):a(n,l)}s.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce((function(e,n){return s(e,n,t)}),{})};var l=s;e.exports=l},9378:e=>{"use strict";e.exports=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var a,i,o;if(Array.isArray(t)){if((a=t.length)!=n.length)return!1;for(i=a;0!=i--;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((a=(o=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(i=a;0!=i--;)if(!Object.prototype.hasOwnProperty.call(n,o[i]))return!1;for(i=a;0!=i--;){var r=o[i];if(!e(t[r],n[r]))return!1}return!0}return t!=t&&n!=n}},7609:(e,t,n)=>{var a=n(7425).default;function i(){"use strict";e.exports=i=function(){return t},e.exports.__esModule=!0,e.exports.default=e.exports;var t={},n=Object.prototype,o=n.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},s="function"==typeof Symbol?Symbol:{},l=s.iterator||"@@iterator",c=s.asyncIterator||"@@asyncIterator",d=s.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function y(e,t,n,a){var i=t&&t.prototype instanceof g?t:g,o=Object.create(i.prototype),s=new _(a||[]);return r(o,"_invoke",{value:k(e,n,s)}),o}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=y;var p={};function g(){}function S(){}function v(){}var h={};u(h,l,(function(){return this}));var m=Object.getPrototypeOf,b=m&&m(m(L([])));b&&b!==n&&o.call(b,l)&&(h=b);var A=v.prototype=g.prototype=Object.create(h);function T(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function n(i,r,s,l){var c=f(e[i],e,r);if("throw"!==c.type){var d=c.arg,u=d.value;return u&&"object"==a(u)&&o.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,s,l)}),(function(e){n("throw",e,s,l)})):t.resolve(u).then((function(e){d.value=e,s(d)}),(function(e){return n("throw",e,s,l)}))}l(c.arg)}var i;r(this,"_invoke",{value:function(e,a){function o(){return new t((function(t,i){n(e,a,t,i)}))}return i=i?i.then(o,o):o()}})}function k(e,t,n){var a="suspendedStart";return function(i,o){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===i)throw o;return{value:void 0,done:!0}}for(n.method=i,n.arg=o;;){var r=n.delegate;if(r){var s=I(r,n);if(s){if(s===p)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===a)throw a="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a="executing";var l=f(e,t,n);if("normal"===l.type){if(a=n.done?"completed":"suspendedYield",l.arg===p)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(a="completed",n.method="throw",n.arg=l.arg)}}}function I(e,t){var n=t.method,a=e.iterator[n];if(void 0===a)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,I(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var i=f(a,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,p;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function _(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function L(e){if(e){var t=e[l];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,a=function t(){for(;++n<e.length;)if(o.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:w}}function w(){return{value:void 0,done:!0}}return S.prototype=v,r(A,"constructor",{value:v,configurable:!0}),r(v,"constructor",{value:S,configurable:!0}),S.displayName=u(v,d,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===S||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,u(e,d,"GeneratorFunction")),e.prototype=Object.create(A),e},t.awrap=function(e){return{__await:e}},T(E.prototype),u(E.prototype,c,(function(){return this})),t.AsyncIterator=E,t.async=function(e,n,a,i,o){void 0===o&&(o=Promise);var r=new E(y(e,n,a,i),o);return t.isGeneratorFunction(n)?r:r.next().then((function(e){return e.done?e.value:r.next()}))},T(A),u(A,d,"Generator"),u(A,l,(function(){return this})),u(A,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var a in t)n.push(a);return n.reverse(),function e(){for(;n.length;){var a=n.pop();if(a in t)return e.value=a,e.done=!1,e}return e.done=!0,e}},t.values=L,_.prototype={constructor:_,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(P),!e)for(var t in this)"t"===t.charAt(0)&&o.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,a){return r.type="throw",r.arg=e,t.next=n,a&&(t.method="next",t.arg=void 0),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],r=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=o.call(i,"catchLoc"),l=o.call(i,"finallyLoc");if(s&&l){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&o.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var r=i?i.completion:{};return r.type=e,r.arg=t,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(r)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var i=a.arg;P(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:L(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),p}},t}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports},7425:e=>{function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},2841:(e,t,n)=>{var a=n(7609)();e.exports=a;try{regeneratorRuntime=a}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=a:Function("r","regeneratorRuntime = r")(a)}}},t={};function n(a){var i=t[a];if(void 0!==i)return i.exports;var o=t[a]={exports:{}};return e[a].call(o.exports,o,o.exports,n),o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var a={};return(()=>{"use strict";n.r(a),n.d(a,{AdminPortal:()=>gw,AdminPortalRenderer:()=>hw,AppHolder:()=>D,CheckoutDialog:()=>Sw,FronteggApp:()=>fw,HostedLogin:()=>pw,LoginBoxRenderer:()=>Aw,createElement:()=>qL,defaultTheme:()=>mw,formatName:()=>HL,getThemeAdminByName:()=>vw,getThemeByName:()=>bw,initialize:()=>ww,mockFlagsList:()=>yw,restoreSearchParams:()=>YL,waitThemeSetter:()=>JL});var e={};n.r(e),n.d(e,{Delete:()=>Fr,Get:()=>Rr,Patch:()=>Nr,Post:()=>Cr,PostDownload:()=>Gr,Put:()=>Mr,extractHeadersFromOptions:()=>$r,getBaseUrl:()=>Lr,getMetadataHeaders:()=>wr,getScopedTenant:()=>Dr});var t={};n.r(t),n.d(t,{FeatureFlags:()=>Br,loadFeatureFlags:()=>Wr});var i={};n.r(i),n.d(i,{GetUserJwt:()=>zr,getCurrentUserTenantsV1:()=>Xr,getCurrentUserTenantsV3:()=>Yr,getUsersGroups:()=>Jr,getUsersRoles:()=>qr,getUsersV2:()=>Kr,getUsersV3:()=>Hr,sendResetBreachedPasswordEmails:()=>Qr,updateUserProfileV2:()=>Zr});var o={};n.r(o),n.d(o,{getHierarchyMetadata:()=>ys,getParentTenants:()=>ls,getParentTenantsById:()=>cs,getSubTenants:()=>rs,getSubTenantsAsTree:()=>ss,getTenants:()=>os,getTenantsUsersCount:()=>ds,searchSubTenants:()=>us,switchTenant:()=>is});var r={};n.r(r),n.d(r,{loadEntitlements:()=>Ks,loadEntitlementsV2:()=>Hs});var s={};n.r(s),n.d(s,{AuthStrategyEnum:()=>Ia,MachineToMachineAuthStrategy:()=>Oa,OAuthLogout:()=>kl,SocialLoginProviders:()=>ka,acceptInvitation:()=>ml,activateAccount:()=>pl,activateAccountV2:()=>gl,bulkCreateIPRestriction:()=>Rs,changePhoneNumber:()=>Pd,changePhoneNumberWithVerification:()=>Id,checkIfAllowToRememberMfaDevice:()=>Jc,createDomainRestriction:()=>Ps,createIPRestriction:()=>Us,createOrUpdateSessionConfigrations:()=>Rc,createSSOConfiguration:()=>td,createSSOConfigurationByMetadata:()=>id,createSSOConfigurationByMetadataUrl:()=>rd,createSSODomain:()=>ld,createSSOGroup:()=>fd,createSamlGroup:()=>vc,createTenantAccessToken:()=>Vc,createUserAccessToken:()=>xc,deleteAllSessionsForUser:()=>Nc,deleteDomainRestriction:()=>Ls,deleteIPRestriction:()=>Ns,deleteSSOConfiguration:()=>ad,deleteSSODomain:()=>cd,deleteSSOGroup:()=>gd,deleteSamlGroup:()=>mc,deleteSessionForUser:()=>Cc,deleteTenantAccessToken:()=>Gc,deleteTenantApiToken:()=>Kc,deleteUserAccessToken:()=>$c,deleteUserApiToken:()=>Hc,deleteWebAuthnDevice:()=>Rd,disableMFAAuthenticatorApp:()=>Gl,disableMFASMS:()=>xl,disableMFAWebAuthn:()=>jl,disableMfa:()=>Fl,enrollMFAAuthenticatorApp:()=>Dl,enrollMFAAuthenticatorAppForLogin:()=>zl,enrollMFAAuthenticatorAppForLoginV2:()=>Kl,enrollMFASMS:()=>Rl,enrollMFASMSForLogin:()=>Ql,enrollMFASMSForLoginV2:()=>Zl,enrollMFAWebAuthn:()=>Nl,enrollMFAWebAuthnForLogin:()=>ic,enrollMFAWebAuthnForLoginV2:()=>oc,enrollMfa:()=>Ll,exchangeOAuthTokens:()=>Ad,exchangeOAuthTokensV2:()=>md,forgotPassword:()=>Il,generateLoginResponse:()=>Zs,generateLoginResponseFromOAuthResponse:()=>il,generateLoginResponseFromOAuthResponseV2:()=>ol,generateLoginResponseV2:()=>el,generateLoginResponseV3:()=>al,generateStepupSession:()=>jd,getActivateAccountStrategy:()=>Sl,getCaptchaPolicy:()=>bs,getCurrentUserSession:()=>wc,getCurrentUserSessions:()=>Lc,getCurrentUserTenantsFunction:()=>as,getCustomSocialLoginProvidersV1:()=>Ic,getDomainRestrictions:()=>Is,getDomainRestrictionsConfig:()=>Os,getGlobalSecurityPolicy:()=>fs,getIPRestrictions:()=>ws,getIPRestrictionsConfig:()=>Ds,getLockoutPolicy:()=>vs,getMFADevices:()=>Bl,getMFAStrategiesConfig:()=>Fd,getMeAndEntitlements:()=>Vd,getMeV2:()=>$d,getMfaPolicy:()=>ps,getOidcConfiguration:()=>bc,getPasswordConfigPolicy:()=>ks,getPasswordHistoryPolicy:()=>As,getPublicAuthStrategiesConfigForAuthenticatedUser:()=>Md,getSSOConfigurations:()=>ed,getSSODefaultRoles:()=>ud,getSSOGroups:()=>Sd,getSSOPublicConfiguration:()=>Ac,getSamlConfiguration:()=>cc,getSamlRoles:()=>pc,getSamlRolesGroups:()=>gc,getSamlVendorConfiguration:()=>uc,getSessionConfigurations:()=>Uc,getSocialLoginProviders:()=>Tc,getSocialLoginProvidersV2:()=>Ec,getSocialLoginProvidersV2ForAuthenticatedUser:()=>kc,getTabTenantFromSessionStorage:()=>ns,getTenantAccessTokensData:()=>Fc,getTenantApiTokensData:()=>Bc,getUserAccessTokensData:()=>Mc,getUserApiTokensData:()=>jc,getUserAuthorization:()=>Gd,getUserById:()=>qc,getVendorConfig:()=>Pc,getVendorLockoutPolicy:()=>hs,getVendorMfaPolicy:()=>gs,getVendorPasswordHistoryPolicy:()=>Ts,getVendorPublicAuthStrategiesConfig:()=>Nd,getWebAuthnDevices:()=>Ud,loadPasswordConfig:()=>Pl,login:()=>dl,loginViaSocialLogin:()=>Oc,loginWithMfa:()=>yl,loginWithMfaV2:()=>fl,loginv2:()=>ul,logout:()=>El,oidcPostLogin:()=>cl,oidcPostLoginV2:()=>hd,passwordlessPostLogin:()=>Qc,passwordlessPostLoginV2:()=>Xc,passwordlessPreLogin:()=>Yc,postLogin:()=>ll,preDisableMFASMS:()=>$l,preDisableMFAWebAuthn:()=>Vl,preEnrollMFAAuthenticatorApp:()=>wl,preEnrollMFAAuthenticatorAppForLogin:()=>Wl,preEnrollMFASMS:()=>Ul,preEnrollMFASMSForLogin:()=>Xl,preEnrollMFAWebAuthn:()=>Cl,preEnrollMFAWebAuthnForLogin:()=>ac,preLogin:()=>rl,preLoginV2:()=>vd,preLoginWithIdpType:()=>sl,preVerifyMFAEmailCode:()=>ql,preVerifyMFASMSForLogin:()=>ec,preVerifyMFAWebAuthnForLogin:()=>rc,recoverMfaToken:()=>_l,refreshToken:()=>bl,refreshTokenV2:()=>Al,refreshTokenV3:()=>Tl,removeTabTenantFromSessionStorage:()=>ts,resendActivationEmail:()=>vl,resendInvitationEmail:()=>hl,resetPassword:()=>Ol,resetPhoneNumber:()=>Ed,revokeSessionsForUser:()=>Dc,saveLockoutPolicy:()=>ms,saveMfaPolicy:()=>Ss,savePasswordHistoryPolicy:()=>Es,setSSODefaultRoles:()=>yd,setTabTenantInSessionStorage:()=>es,signUpUser:()=>_c,silentOAuthRefreshToken:()=>Td,silentOAuthRefreshTokenV2:()=>bd,testCurrentIp:()=>Ms,testCurrentIpInAllowList:()=>Fs,updateDomainRestrictionConfig:()=>_s,updateIPRestrictionConfig:()=>Cs,updateSSOConfiguration:()=>nd,updateSSOConfigurationByMetadata:()=>od,updateSSOConfigurationByMetadataUrl:()=>sd,updateSSOGroup:()=>pd,updateSamlConfiguration:()=>dc,updateSamlGroup:()=>hc,updateSamlRoles:()=>Sc,updateSamlVendorMetadata:()=>yc,updateTenantApiTokensData:()=>zc,updateUserApiTokensData:()=>Wc,validateSSODomain:()=>dd,validateSamlDomain:()=>fc,verifyChangePhoneNumber:()=>Od,verifyInviteToken:()=>Zc,verifyMFAAuthenticatorAppForLogin:()=>Hl,verifyMFAEmailCode:()=>Jl,verifyMFAEmailCodeV2:()=>Yl,verifyMFASMSForLogin:()=>tc,verifyMFASMSForLoginV2:()=>nc,verifyMFAWebAuthnForLogin:()=>sc,verifyMFAWebAuthnForLoginV2:()=>lc,verifyMfa:()=>Ml,verifyNewDeviceSession:()=>Cd,verifyResetPhoneNumber:()=>kd,webAuthnCreateNewDeviceSession:()=>Dd,webAuthnPostLogin:()=>Ld,webAuthnPostLoginV2:()=>wd,webAuthnPreLogin:()=>_d});var l={};n.r(l),n.d(l,{addUser:()=>qd,changePassword:()=>Kd,createInviteUserLink:()=>eu,deleteInviteUserLink:()=>nu,deleteUser:()=>Jd,getInviteLinkConfiguration:()=>iu,getInviteUserLink:()=>au,getProfile:()=>Bd,getTemporaryUserConfiguration:()=>Zd,loadAvailablePermissions:()=>ru,loadAvailableRoles:()=>ou,loadStats:()=>su,loadUsers:()=>Hd,resendActivationLink:()=>lu,resendInvitationLink:()=>cu,resendInvitationLinkToAllTenants:()=>du,setPermanentUser:()=>Qd,updateInviteUserLink:()=>tu,updateProfile:()=>Wd,updateProfileImage:()=>zd,updateUser:()=>Yd,updateUserExpirationTime:()=>Xd});var c={};n.r(c),n.d(c,{getAdminBoxMetadata:()=>yu,getAuditsMetadata:()=>vu,getCurrentUserIpMetadata:()=>pu,getIpAdressMetadata:()=>hu,getNotificationsMetadata:()=>gu,getSamlMetadata:()=>Su,updateAdminBoxMetadata:()=>fu});var d={};n.r(d),n.d(d,{downloadReport:()=>Ou,getReport:()=>Eu,getReports:()=>Tu,renderReport:()=>ku,scheduleReport:()=>Iu,sendReport:()=>Pu});var u={};n.r(u),n.d(u,{getNotifications:()=>_u,markAllAsRead:()=>Du,updateNotificationIsPinned:()=>wu,updateNotificationStatus:()=>Lu});var y={};n.r(y),n.d(y,{exportAudits:()=>Nu,getAudits:()=>Ru,getAuditsStats:()=>Cu});var f={};n.r(f),n.d(f,{deleteEmailConfiguration:()=>Ju,deleteEmailSubscriptions:()=>Hu,deleteSMSConfiguration:()=>ty,deleteSMSSubscriptions:()=>Zu,deleteSlackConfiguration:()=>ju,deleteWebhooksConfiguration:()=>iy,getCategories:()=>ly,getChannelMaps:()=>cy,getEmailConfiguration:()=>Wu,getSMSConfiguration:()=>Yu,getSlackChannels:()=>xu,getSlackConfiguration:()=>Gu,getSlackScope:()=>$u,getWebhookLog:()=>oy,getWebhooksConfigurations:()=>ny,patchEmailConfiguration:()=>Ku,patchSMSConfiguration:()=>Qu,postEmailConfiguration:()=>zu,postSMSConfiguration:()=>Xu,postSlackCode:()=>Bu,postSlackConfiguration:()=>Vu,postWebhookRetry:()=>sy,postWebhookTest:()=>ry,postWebhooksConfiguration:()=>ay,putEmailSubscriptions:()=>qu,putSMSSubscriptions:()=>ey});var p={};n.r(p),n.d(p,{getPublicSettings:()=>yy,getSettings:()=>uy,updateSettings:()=>dy});var g={};n.r(g),n.d(g,{addRole:()=>vy,addRoleV2:()=>ky,attachPermissionToRoles:()=>Ty,attachPermissionsToRole:()=>by,deleteRole:()=>hy,getPermissionCategories:()=>Ey,getPermissions:()=>Ay,getRoles:()=>Sy,updateRole:()=>my});var S={};n.r(S),n.d(S,{ISubscriptionCancellationPolicy:()=>nf,ISubscriptionStatus:()=>ef,PaymentMethodType:()=>tf,ProviderType:()=>af,TenantCreatedAction:()=>rf,TrialEndAction:()=>of,cancelManagedSubscription:()=>Uy,cancelSubscription:()=>Py,createStripeCustomer:()=>Ky,createStripePaymentMethodSetupIntentSecret:()=>qy,createSubscription:()=>Wy,createTenantConfiguration:()=>Xy,getManagedSubscription:()=>wy,getManagedSubscriptions:()=>Dy,getPaymentMethod:()=>jy,getPaymentMethods:()=>Vy,getPaymentProviders:()=>Qy,getStripeCustomer:()=>zy,getStripePaymentProviderConfiguration:()=>Hy,getSubscription:()=>Oy,getSubscriptionInvoice:()=>Gy,getSubscriptionInvoicePdf:()=>$y,getSubscriptionInvoices:()=>Fy,getSubscriptionPlan:()=>My,getSubscriptionPlans:()=>Ny,getSubscriptionSummaries:()=>Jy,getSubscriptions:()=>Iy,getTenantConfiguration:()=>Yy,getVendorPublicConfigurations:()=>Zy,renewManagedSubscription:()=>Ry,renewSubscription:()=>_y,updateManagedSubscription:()=>Cy,updatePaymentMethodBillingDetails:()=>By,updateSubscription:()=>Ly});var v={};n.r(v),n.d(v,{getVendorPublicInfo:()=>sf});var h={};n.r(h),n.d(h,{addUserRolesForSubTenants:()=>uf,addUserToTenantAndSubTenants:()=>cf,addUsersToSubTenant:()=>hf,createSubTenant:()=>pf,deleteSubTenant:()=>gf,loadAllUsers:()=>lf,removeUserFromTenantAndSubTenants:()=>df,removeUserRolesFromSubTenants:()=>yf,setUserRolesForSubTenants:()=>ff,updateSubAccountAccess:()=>vf,updateSubTenant:()=>Sf});var m={};n.r(m),n.d(m,{countConfigurationUsers:()=>Ef,createConfiguration:()=>Af,deleteConfiguration:()=>Tf,getConfigs:()=>mf,updateConfiguration:()=>bf});var b={};n.r(b),n.d(b,{impersonate:()=>kf});var A={};n.r(A),n.d(A,{addRolesToGroup:()=>Uf,addUsersToGroup:()=>Cf,createGroup:()=>Lf,deleteGroup:()=>Df,deleteRolesFromGroup:()=>Rf,deleteUsersFromGroup:()=>Nf,getGroupById:()=>Of,getGroupConfiguration:()=>Mf,getGroups:()=>Pf,getGroupsByIds:()=>_f,updateGroup:()=>wf,updateGroupConfiguration:()=>Ff});var T={};n.r(T),n.d(T,{getInsights:()=>$f,getRecommendations:()=>Gf});var E={};n.r(E),n.d(E,{createPhoneNumber:()=>Vf,deletePhoneNumber:()=>jf,getUserPhoneNumbers:()=>xf,preVerifyPhoneNumber:()=>Bf,verifyDeletePhoneNumber:()=>zf,verifyPhoneNumber:()=>Wf});var k={};n.r(k),n.d(k,{ADMIN_PORTAL_ENTITLEMENTS_FF:()=>Js,AuthStrategyEnum:()=>Ia,ContextHolder:()=>Vo,FeatureFlags:()=>Br,FronteggApiError:()=>Bo,FronteggContext:()=>jo,FronteggFrameworks:()=>ua,GetUsersFilterPreset:()=>pa,GroupManagedByEnum:()=>ip,GroupRelations:()=>ap,ISubscriptionCancellationPolicy:()=>nf,ISubscriptionStatus:()=>ef,InsightCode:()=>rp,LOAD_AUTHORIZATION_FF:()=>zs,MFAStrategyEnum:()=>Ws,MachineToMachineAuthStrategy:()=>Oa,NotEntitledJustification:()=>qs,PaginationOrderEnum:()=>ya,PaymentMethodType:()=>tf,PermissionAssignmentTypeEnum:()=>Jf,ProviderType:()=>af,RecommendationActionKey:()=>sp,RecommendationCode:()=>op,RecommendationSeverity:()=>lp,RequestSource:()=>da,RestrictionType:()=>zn,ScimConnectionSource:()=>np,SecondaryAuthStrategy:()=>js,SecurityCategory:()=>cp,SocialLoginProviders:()=>ka,SortByEnum:()=>fa,TenantSortByEnum:()=>Hf,TenantType:()=>qf,USE_ENTITLEMENTS_V2_ENDPOINT_FF:()=>Vr,UserManagedByEnum:()=>Kf,WebAuthnDeviceType:()=>Bs,api:()=>dp,countConfigurationUsers:()=>Ef,createConfiguration:()=>Af,default:()=>up,deleteConfiguration:()=>Tf,fetch:()=>e,fronteggAuthApiRoutesRegex:()=>Yf,fronteggHeaders:()=>ca,fronteggRefreshTokenUrl:()=>Xf,fronteggSilentRefreshTokenUrl:()=>Qf,fronteggTenantsUrl:()=>ep,fronteggTenantsV3Url:()=>tp,fronteggUsersUrl:()=>Zf,getConfigs:()=>mf,getCurrentUserTenantsFunction:()=>as,getTabTenantFromSessionStorage:()=>ns,loadFeatureFlags:()=>Wr,providersArray:()=>ga,setTabTenantInSessionStorage:()=>es,updateConfiguration:()=>bf});var I={};function O(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function P(e){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},P(e)}function _(e){var t=function(e,t){if("object"!==P(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t);if("object"!==P(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"===P(t)?t:String(t)}function L(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,_(a.key),a)}}function w(e,t,n){return t&&L(e.prototype,t),n&&L(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}n.r(I),n.d(I,{AccountDetailsPageTabs:()=>lw,AccountPageFields:()=>tw,DomainRestrictionsTabFields:()=>sw,GeneralSettingsTabFields:()=>ow,InviteUserModalFields:()=>ew,IpRestrictionsTabFields:()=>rw,Metadata:()=>KL,PrivacyPageFields:()=>ZL,ProfilePageFields:()=>QL,SecurityPageTabs:()=>aw,SessionManagementTabFields:()=>iw,SignupFields:()=>XL,SubscriptionsPageFields:()=>nw,alpha:()=>$L,fieldAppearance:()=>cw,tabAppearance:()=>dw});var D=function(){function e(){O(this,e)}return w(e,null,[{key:"setInstance",value:function(t,n){e._apps[t]=n}},{key:"getInstance",value:function(t){var n=e._apps[t];if(!n)throw Error("[".concat(t,"] FronteggApp not found"));return n}}]),e}();function U(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function R(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,i,o,r,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(a=o.call(n)).done)&&(s.push(a.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(r=n.return(),Object(r)!==r))return}finally{if(c)throw i}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return U(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?U(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e,t,n,a,i,o,r){try{var s=e[o](r),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(a,i)}function N(e){return function(){var t=this,n=arguments;return new Promise((function(a,i){var o=e.apply(t,n);function r(e){C(o,a,i,r,s,"next",e)}function s(e){C(o,a,i,r,s,"throw",e)}r(void 0)}))}}D._apps={};var M=n(2841),F=n.n(M);function G(){return G=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},G.apply(this,arguments)}function $(e){for(var t=arguments.length,n=Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map((function(e){return"'"+e+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function x(e){return!!e&&!!e[Oe]}function V(e){return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;var n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===Pe}(e)||Array.isArray(e)||!!e[Ie]||!!e.constructor[Ie]||H(e)||q(e))}function j(e,t,n){void 0===n&&(n=!1),0===B(e)?(n?Object.keys:_e)(e).forEach((function(a){n&&"symbol"==typeof a||t(a,e[a],e)})):e.forEach((function(n,a){return t(a,n,e)}))}function B(e){var t=e[Oe];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:H(e)?2:q(e)?3:0}function W(e,t){return 2===B(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function z(e,t,n){var a=B(e);2===a?e.set(t,n):3===a?(e.delete(t),e.add(n)):e[t]=n}function K(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function H(e){return Ae&&e instanceof Map}function q(e){return Te&&e instanceof Set}function J(e){return e.o||e.t}function Y(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=Le(e);delete t[Oe];for(var n=_e(t),a=0;a<n.length;a++){var i=n[a],o=t[i];!1===o.writable&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(t[i]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function X(e,t){return void 0===t&&(t=!1),Z(e)||x(e)||!V(e)||(B(e)>1&&(e.set=e.add=e.clear=e.delete=Q),Object.freeze(e),t&&j(e,(function(e,t){return X(t,!0)}),!0)),e}function Q(){$(2)}function Z(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function ee(e){var t=we[e];return t||$(18,e),t}function te(){return me}function ne(e,t){t&&(ee("Patches"),e.u=[],e.s=[],e.v=t)}function ae(e){ie(e),e.p.forEach(re),e.p=null}function ie(e){e===me&&(me=e.l)}function oe(e){return me={p:[],l:me,h:e,m:!0,_:0}}function re(e){var t=e[Oe];0===t.i||1===t.i?t.j():t.O=!0}function se(e,t){t._=t.p.length;var n=t.p[0],a=void 0!==e&&e!==n;return t.h.g||ee("ES5").S(t,e,a),a?(n[Oe].P&&(ae(t),$(4)),V(e)&&(e=le(t,e),t.l||de(t,e)),t.u&&ee("Patches").M(n[Oe].t,e,t.u,t.s)):e=le(t,n,[]),ae(t),t.u&&t.v(t.u,t.s),e!==ke?e:void 0}function le(e,t,n){if(Z(t))return t;var a=t[Oe];if(!a)return j(t,(function(i,o){return ce(e,a,t,i,o,n)}),!0),t;if(a.A!==e)return t;if(!a.P)return de(e,a.t,!0),a.t;if(!a.I){a.I=!0,a.A._--;var i=4===a.i||5===a.i?a.o=Y(a.k):a.o;j(3===a.i?new Set(i):i,(function(t,o){return ce(e,a,i,t,o,n)})),de(e,i,!1),n&&e.u&&ee("Patches").R(a,n,e.u,e.s)}return a.o}function ce(e,t,n,a,i,o){if(x(i)){var r=le(e,i,o&&t&&3!==t.i&&!W(t.D,a)?o.concat(a):void 0);if(z(n,a,r),!x(r))return;e.m=!1}if(V(i)&&!Z(i)){if(!e.h.F&&e._<1)return;le(e,i),t&&t.A.l||de(e,i)}}function de(e,t,n){void 0===n&&(n=!1),e.h.F&&e.m&&X(t,n)}function ue(e,t){var n=e[Oe];return(n?J(n):e)[t]}function ye(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var a=Object.getOwnPropertyDescriptor(n,t);if(a)return a;n=Object.getPrototypeOf(n)}}function fe(e){e.P||(e.P=!0,e.l&&fe(e.l))}function pe(e){e.o||(e.o=Y(e.t))}function ge(e,t,n){var a=H(t)?ee("MapSet").N(t,n):q(t)?ee("MapSet").T(t,n):e.g?function(e,t){var n=Array.isArray(e),a={i:n?1:0,A:t?t.A:te(),P:!1,I:!1,D:{},l:t,t:e,k:null,o:null,j:null,C:!1},i=a,o=De;n&&(i=[a],o=Ue);var r=Proxy.revocable(i,o),s=r.revoke,l=r.proxy;return a.k=l,a.j=s,l}(t,n):ee("ES5").J(t,n);return(n?n.A:te()).p.push(a),a}function Se(e){return x(e)||$(22,e),function e(t){if(!V(t))return t;var n,a=t[Oe],i=B(t);if(a){if(!a.P&&(a.i<4||!ee("ES5").K(a)))return a.t;a.I=!0,n=ve(t,i),a.I=!1}else n=ve(t,i);return j(n,(function(t,i){a&&function(e,t){return 2===B(e)?e.get(t):e[t]}(a.t,t)===i||z(n,t,e(i))})),3===i?new Set(n):n}(e)}function ve(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return Y(e)}var he,me,be="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),Ae="undefined"!=typeof Map,Te="undefined"!=typeof Set,Ee="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,ke=be?Symbol.for("immer-nothing"):((he={})["immer-nothing"]=!0,he),Ie=be?Symbol.for("immer-draftable"):"__$immer_draftable",Oe=be?Symbol.for("immer-state"):"__$immer_state",Pe=("undefined"!=typeof Symbol&&Symbol.iterator,""+Object.prototype.constructor),_e="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,Le=Object.getOwnPropertyDescriptors||function(e){var t={};return _e(e).forEach((function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)})),t},we={},De={get:function(e,t){if(t===Oe)return e;var n=J(e);if(!W(n,t))return function(e,t,n){var a,i=ye(t,n);return i?"value"in i?i.value:null===(a=i.get)||void 0===a?void 0:a.call(e.k):void 0}(e,n,t);var a=n[t];return e.I||!V(a)?a:a===ue(e.t,t)?(pe(e),e.o[t]=ge(e.A.h,a,e)):a},has:function(e,t){return t in J(e)},ownKeys:function(e){return Reflect.ownKeys(J(e))},set:function(e,t,n){var a=ye(J(e),t);if(null==a?void 0:a.set)return a.set.call(e.k,n),!0;if(!e.P){var i=ue(J(e),t),o=null==i?void 0:i[Oe];if(o&&o.t===n)return e.o[t]=n,e.D[t]=!1,!0;if(K(n,i)&&(void 0!==n||W(e.t,t)))return!0;pe(e),fe(e)}return e.o[t]===n&&"number"!=typeof n&&(void 0!==n||t in e.o)||(e.o[t]=n,e.D[t]=!0,!0)},deleteProperty:function(e,t){return void 0!==ue(e.t,t)||t in e.t?(e.D[t]=!1,pe(e),fe(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=J(e),a=Reflect.getOwnPropertyDescriptor(n,t);return a?{writable:!0,configurable:1!==e.i||"length"!==t,enumerable:a.enumerable,value:n[t]}:a},defineProperty:function(){$(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){$(12)}},Ue={};j(De,(function(e,t){Ue[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),Ue.deleteProperty=function(e,t){return Ue.set.call(this,e,t,void 0)},Ue.set=function(e,t,n){return De.set.call(this,e[0],t,n,e[0])};var Re=function(){function e(e){var t=this;this.g=Ee,this.F=!0,this.produce=function(e,n,a){if("function"==typeof e&&"function"!=typeof n){var i=n;n=e;var o=t;return function(e){var t=this;void 0===e&&(e=i);for(var a=arguments.length,r=Array(a>1?a-1:0),s=1;s<a;s++)r[s-1]=arguments[s];return o.produce(e,(function(e){var a;return(a=n).call.apply(a,[t,e].concat(r))}))}}var r;if("function"!=typeof n&&$(6),void 0!==a&&"function"!=typeof a&&$(7),V(e)){var s=oe(t),l=ge(t,e,void 0),c=!0;try{r=n(l),c=!1}finally{c?ae(s):ie(s)}return"undefined"!=typeof Promise&&r instanceof Promise?r.then((function(e){return ne(s,a),se(e,s)}),(function(e){throw ae(s),e})):(ne(s,a),se(r,s))}if(!e||"object"!=typeof e){if(void 0===(r=n(e))&&(r=e),r===ke&&(r=void 0),t.F&&X(r,!0),a){var d=[],u=[];ee("Patches").M(e,r,d,u),a(d,u)}return r}$(21,e)},this.produceWithPatches=function(e,n){if("function"==typeof e)return function(n){for(var a=arguments.length,i=Array(a>1?a-1:0),o=1;o<a;o++)i[o-1]=arguments[o];return t.produceWithPatches(n,(function(t){return e.apply(void 0,[t].concat(i))}))};var a,i,o=t.produce(e,n,(function(e,t){a=e,i=t}));return"undefined"!=typeof Promise&&o instanceof Promise?o.then((function(e){return[e,a,i]})):[o,a,i]},"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze)}var t=e.prototype;return t.createDraft=function(e){V(e)||$(8),x(e)&&(e=Se(e));var t=oe(this),n=ge(this,e,void 0);return n[Oe].C=!0,ie(t),n},t.finishDraft=function(e,t){var n=(e&&e[Oe]).A;return ne(n,t),se(void 0,n)},t.setAutoFreeze=function(e){this.F=e},t.setUseProxies=function(e){e&&!Ee&&$(20),this.g=e},t.applyPatches=function(e,t){var n;for(n=t.length-1;n>=0;n--){var a=t[n];if(0===a.path.length&&"replace"===a.op){e=a.value;break}}n>-1&&(t=t.slice(n+1));var i=ee("Patches").$;return x(e)?i(e,t):this.produce(e,(function(e){return i(e,t)}))},e}(),Ce=new Re,Ne=Ce.produce;Ce.produceWithPatches.bind(Ce),Ce.setAutoFreeze.bind(Ce),Ce.setUseProxies.bind(Ce),Ce.applyPatches.bind(Ce),Ce.createDraft.bind(Ce),Ce.finishDraft.bind(Ce);const Me=Ne;function Fe(e,t,n){return(t=_(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ge(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function $e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ge(Object(n),!0).forEach((function(t){Fe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ge(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function xe(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var Ve="function"==typeof Symbol&&Symbol.observable||"@@observable",je=function(){return Math.random().toString(36).substring(7).split("").join(".")},Be={INIT:"@@redux/INIT"+je(),REPLACE:"@@redux/REPLACE"+je(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+je()}};function We(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function ze(e,t,n){var a;if("function"==typeof t&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error(xe(0));if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw new Error(xe(1));return n(ze)(e,t)}if("function"!=typeof e)throw new Error(xe(2));var i=e,o=t,r=[],s=r,l=!1;function c(){s===r&&(s=r.slice())}function d(){if(l)throw new Error(xe(3));return o}function u(e){if("function"!=typeof e)throw new Error(xe(4));if(l)throw new Error(xe(5));var t=!0;return c(),s.push(e),function(){if(t){if(l)throw new Error(xe(6));t=!1,c();var n=s.indexOf(e);s.splice(n,1),r=null}}}function y(e){if(!We(e))throw new Error(xe(7));if(void 0===e.type)throw new Error(xe(8));if(l)throw new Error(xe(9));try{l=!0,o=i(o,e)}finally{l=!1}for(var t=r=s,n=0;n<t.length;n++)(0,t[n])();return e}function f(e){if("function"!=typeof e)throw new Error(xe(10));i=e,y({type:Be.REPLACE})}function p(){var e,t=u;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new Error(xe(11));function n(){e.next&&e.next(d())}return n(),{unsubscribe:t(n)}}})[Ve]=function(){return this},e}return y({type:Be.INIT}),(a={dispatch:y,subscribe:u,getState:d,replaceReducer:f})[Ve]=p,a}function Ke(e){for(var t=Object.keys(e),n={},a=0;a<t.length;a++){var i=t[a];"function"==typeof e[i]&&(n[i]=e[i])}var o,r=Object.keys(n);try{!function(e){Object.keys(e).forEach((function(t){var n=e[t];if(void 0===n(void 0,{type:Be.INIT}))throw new Error(xe(12));if(void 0===n(void 0,{type:Be.PROBE_UNKNOWN_ACTION()}))throw new Error(xe(13))}))}(n)}catch(e){o=e}return function(e,t){if(void 0===e&&(e={}),o)throw o;for(var a=!1,i={},s=0;s<r.length;s++){var l=r[s],c=n[l],d=e[l],u=c(d,t);if(void 0===u)throw t&&t.type,new Error(xe(14));i[l]=u,a=a||u!==d}return(a=a||r.length!==Object.keys(e).length)?i:e}}function He(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}function qe(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),a=function(){throw new Error(xe(15))},i={getState:n.getState,dispatch:function(){return a.apply(void 0,arguments)}},o=t.map((function(e){return e(i)}));return a=He.apply(void 0,o)(n.dispatch),$e($e({},n),{},{dispatch:a})}}}function Je(e){return function(t){var n=t.dispatch,a=t.getState;return function(t){return function(i){return"function"==typeof i?i(n,a,e):t(i)}}}}var Ye=Je();Ye.withExtraArgument=Je;const Xe=Ye;var Qe,Ze=(Qe=function(e,t){return Qe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},Qe(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Qe(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),et=function(e,t){for(var n=0,a=t.length,i=e.length;n<a;n++,i++)e[i]=t[n];return e},tt=Object.defineProperty,nt=(Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols),at=Object.prototype.hasOwnProperty,it=Object.prototype.propertyIsEnumerable,ot=function(e,t,n){return t in e?tt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},rt=function(e,t){for(var n in t||(t={}))at.call(t,n)&&ot(e,n,t[n]);if(nt)for(var a=0,i=nt(t);a<i.length;a++)n=i[a],it.call(t,n)&&ot(e,n,t[n]);return e},st="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"==typeof arguments[0]?He:He.apply(null,arguments)};"undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__;var lt=function(e){function t(){for(var n=[],a=0;a<arguments.length;a++)n[a]=arguments[a];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Ze(t,e),Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.prototype.concat.apply(this,t)},t.prototype.prepend=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return 1===e.length&&Array.isArray(e[0])?new(t.bind.apply(t,et([void 0],e[0].concat(this)))):new(t.bind.apply(t,et([void 0],e.concat(this))))},t}(Array);function ct(e){return V(e)?Me(e,(function(){})):e}function dt(e){void 0===e&&(e={});var t=e.thunk,n=void 0===t||t,a=(e.immutableCheck,e.serializableCheck,new lt);return n&&(function(e){return"boolean"==typeof e}(n)?a.push(Xe):a.push(Xe.withExtraArgument(n.extraArgument))),a}function ut(e){var t,n=function(e){return dt(e)},a=e||{},i=a.reducer,o=void 0===i?void 0:i,r=a.middleware,s=void 0===r?n():r,l=a.devTools,c=void 0===l||l,d=a.preloadedState,u=void 0===d?void 0:d,y=a.enhancers,f=void 0===y?void 0:y;if("function"==typeof o)t=o;else{if(!function(e){if("object"!=typeof e||null===e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;for(var n=t;null!==Object.getPrototypeOf(n);)n=Object.getPrototypeOf(n);return t===n}(o))throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');t=Ke(o)}var p=s;"function"==typeof p&&(p=p(n));var g=qe.apply(void 0,p),S=He;c&&(S=st(rt({trace:!1},"object"==typeof c&&c)));var v=[g];return Array.isArray(f)?v=et([g],f):"function"==typeof f&&(v=f(v)),ze(t,u,S.apply(void 0,v))}function yt(e,t){function n(){for(var n=[],a=0;a<arguments.length;a++)n[a]=arguments[a];if(t){var i=t.apply(void 0,n);if(!i)throw new Error("prepareAction did not return an object");return rt(rt({type:e,payload:i.payload},"meta"in i&&{meta:i.meta}),"error"in i&&{error:i.error})}return{type:e,payload:n[0]}}return n.toString=function(){return""+e},n.type=e,n.match=function(t){return t.type===e},n}function ft(e){var t,n={},a=[],i={addCase:function(e,t){var a="string"==typeof e?e:e.type;if(a in n)throw new Error("addCase cannot be called with two reducers for the same action type");return n[a]=t,i},addMatcher:function(e,t){return a.push({matcher:e,reducer:t}),i},addDefaultCase:function(e){return t=e,i}};return e(i),[n,a,t]}function pt(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");var n,a="function"==typeof e.initialState?e.initialState:ct(e.initialState),i=e.reducers||{},o=Object.keys(i),r={},s={},l={};function c(){var t="function"==typeof e.extraReducers?ft(e.extraReducers):[e.extraReducers],n=t[0],i=void 0===n?{}:n,o=t[1],r=void 0===o?[]:o,l=t[2],c=void 0===l?void 0:l,d=rt(rt({},i),s);return function(e,t,n,a){void 0===n&&(n=[]);var i,o="function"==typeof t?ft(t):[t,n,a],r=o[0],s=o[1],l=o[2];if(function(e){return"function"==typeof e}(e))i=function(){return ct(e())};else{var c=ct(e);i=function(){return c}}function d(e,t){void 0===e&&(e=i());var n=et([r[t.type]],s.filter((function(e){return(0,e.matcher)(t)})).map((function(e){return e.reducer})));return 0===n.filter((function(e){return!!e})).length&&(n=[l]),n.reduce((function(e,n){if(n){var a;if(x(e))return void 0===(a=n(e,t))?e:a;if(V(e))return Me(e,(function(e){return n(e,t)}));if(void 0===(a=n(e,t))){if(null===e)return e;throw Error("A case reducer on a non-draftable value must not return undefined")}return a}return e}),e)}return d.getInitialState=i,d}(a,d,r,c)}return o.forEach((function(e){var n,a,o=i[e],c=t+"/"+e;"reducer"in o?(n=o.reducer,a=o.prepare):n=o,r[e]=n,s[c]=n,l[e]=a?yt(c,a):yt(c)})),{name:t,reducer:function(e,t){return n||(n=c()),n(e,t)},actions:l,caseReducers:r,getInitialState:function(){return n||(n=c()),n.getInitialState()}}}Object.assign;var gt="listenerMiddleware";yt(gt+"/add"),yt(gt+"/removeAll"),yt(gt+"/remove"),function(){function e(e,t){var n=i[e];return n?n.enumerable=t:i[e]=n={configurable:!0,enumerable:t,get:function(){var t=this[Oe];return De.get(t,e)},set:function(t){var n=this[Oe];De.set(n,e,t)}},n}function t(e){for(var t=e.length-1;t>=0;t--){var i=e[t][Oe];if(!i.P)switch(i.i){case 5:a(i)&&fe(i);break;case 4:n(i)&&fe(i)}}}function n(e){for(var t=e.t,n=e.k,a=_e(n),i=a.length-1;i>=0;i--){var o=a[i];if(o!==Oe){var r=t[o];if(void 0===r&&!W(t,o))return!0;var s=n[o],l=s&&s[Oe];if(l?l.t!==r:!K(s,r))return!0}}var c=!!t[Oe];return a.length!==_e(t).length+(c?0:1)}function a(e){var t=e.k;if(t.length!==e.t.length)return!0;var n=Object.getOwnPropertyDescriptor(t,t.length-1);if(n&&!n.get)return!0;for(var a=0;a<t.length;a++)if(!t.hasOwnProperty(a))return!0;return!1}var i={};!function(e,t){we[e]||(we[e]=t)}("ES5",{J:function(t,n){var a=Array.isArray(t),i=function(t,n){if(t){for(var a=Array(n.length),i=0;i<n.length;i++)Object.defineProperty(a,""+i,e(i,!0));return a}var o=Le(n);delete o[Oe];for(var r=_e(o),s=0;s<r.length;s++){var l=r[s];o[l]=e(l,t||!!o[l].enumerable)}return Object.create(Object.getPrototypeOf(n),o)}(a,t),o={i:a?5:4,A:n?n.A:te(),P:!1,I:!1,D:{},l:n,t,k:i,o:null,O:!1,C:!1};return Object.defineProperty(i,Oe,{value:o,writable:!0}),i},S:function(e,n,i){i?x(n)&&n[Oe].A===e&&t(e.p):(e.u&&function e(t){if(t&&"object"==typeof t){var n=t[Oe];if(n){var i=n.t,o=n.k,r=n.D,s=n.i;if(4===s)j(o,(function(t){t!==Oe&&(void 0!==i[t]||W(i,t)?r[t]||e(o[t]):(r[t]=!0,fe(n)))})),j(i,(function(e){void 0!==o[e]||W(o,e)||(r[e]=!1,fe(n))}));else if(5===s){if(a(n)&&(fe(n),r.length=!0),o.length<i.length)for(var l=o.length;l<i.length;l++)r[l]=!1;else for(var c=i.length;c<o.length;c++)r[c]=!0;for(var d=Math.min(o.length,i.length),u=0;u<d;u++)o.hasOwnProperty(u)||(r[u]=!0),void 0===r[u]&&e(o[u])}}}}(e.p[0]),t(e.p))},K:function(e){return 4===e.i?n(e):a(e)}})}();const St=(e,t)=>n=>G({},n,{[e]:t[e]}),vt=e=>({prepare:e=>({payload:e}),reducer:(t,{payload:n})=>G({},t,{[e]:G({},t[e],n)})}),ht=(e,t)=>({prepare:e=>({payload:e}),reducer:(n,{payload:a})=>{var i;return G({},n,{[e]:G({},n[e],{[t]:G({},null==n||null==(i=n[e])?void 0:i[t],a)})})}}),mt=e=>({prepare:e=>({payload:e}),reducer:(t,{payload:n})=>{var a,i;return G({},t,{[e]:G({},t[e],{loaders:G({},null==(a=t[e])?void 0:a.loaders,{[n.key]:null==(i=n.value)||i})})})}}),bt=e=>({prepare:e=>({payload:e}),reducer:(t,{payload:n})=>{var a;return G({},t,{[e]:G({},t[e],{errors:G({},t[e].errors,{[n.key]:null==(a=n.value)||a})})})}}),At=(e,t,n)=>({prepare:e=>({payload:e}),reducer:(a,{payload:i})=>{var o;return G({},a,{[e]:G({},a[e],{[t]:G({},null==a||null==(o=a[e])?void 0:o[t],i,n)})})}}),Tt=(e,t,n)=>a=>{var i;return G({},a,{[e]:G({},a[e],{[t]:G({},null==a||null==(i=a[e])?void 0:i[t],n)})})},Et=(e=500)=>new Promise((t=>setTimeout(t,e))),kt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",It=new Uint8Array(256);for(let e=0;e<kt.length;e++)It[kt.charCodeAt(e)]=e;const Ot=e=>{const t=.75*e.length,n=e.length;let a,i,o,r,s,l=0;const c=new Uint8Array(t);for(a=0;a<n;a+=4)i=It[e.charCodeAt(a)],o=It[e.charCodeAt(a+1)],r=It[e.charCodeAt(a+2)],s=It[e.charCodeAt(a+3)],c[l++]=i<<2|o>>4,c[l++]=(15&o)<<4|r>>2,c[l++]=(3&r)<<6|63&s;return c.buffer},Pt=e=>{if(e instanceof Array){const t=[];for(const n of e)t.push(Pt(n));return t}if(e instanceof ArrayBuffer)return(e=>{const t=new Uint8Array(e),n=t.length;let a,i="";for(a=0;a<n;a+=3)i+=kt[t[a]>>2],i+=kt[(3&t[a])<<4|t[a+1]>>4],i+=kt[(15&t[a+1])<<2|t[a+2]>>6],i+=kt[63&t[a+2]];return n%3==2?i=i.substring(0,i.length-1):n%3==1&&(i=i.substring(0,i.length-2)),i})(e);if(e instanceof Object){const t={};for(const n in e)t[n]=Pt(e[n]);return t}return e};let _t,Lt,wt,Dt;!function(e){e.preLogin="preLogin",e.magicLinkPreLoginSuccess="magicLinkPreLoginSuccess",e.loginWithSmsOtc="loginWithSmsOtc",e.loginWithQuickSmsOtc="loginWithQuickSmsOtc",e.loginWithOtc="loginWithOtc",e.loginWithPassword="loginWithPassword",e.loginWithTwoFactor="loginWithTwoFactor",e.redirectToSSO="redirectToSSO",e.loginWithSSOFailed="loginWithSSOFailed",e.success="success",e.forceTwoFactor="forceTwoFactor",e.recoverTwoFactor="recoverTwoFactor",e.promptPasskeys="promptPasskeys",e.breachedPassword="breachedPassword",e.breachedPasswordSuccess="breachedPasswordSuccess"}(_t||(_t={})),function(e){e.Login="login",e.RegisterQuickLogin="registerQuickLogin"}(Lt||(Lt={})),function(e){e.Internal="internal",e.UsbKey="usb-key",e.Android="android",e.Sms="sms"}(wt||(wt={})),function(e){e["social-login"]="social-login",e["custom-social-login"]="custom-social-login",e.direct="direct"}(Dt||(Dt={}));const Ut="FRONTEGG_AFTER_AUTH_REDIRECT_URL",Rt="HOSTED_LOGIN_VERIFIER_KEY",Ct="auth",Nt="connectivity",Mt="auditLogs",Ft="vendor",Gt={flow:Lt.Login,step:_t.preLogin,loading:!1,email:"",tenants:[]},$t={setLoginState:vt("loginState"),resetLoginState:St("loginState",{loginState:Gt})},xt={requestAuthorize:yt("auth/requestAuthorize",((e=!1)=>({payload:e}))),requestAuthorizeSSR:yt("auth/requestAuthorizeSSR",(e=>({payload:e}))),requestHostedLoginAuthorize:yt("auth/requestHostedLoginAuthorize",(e=>({payload:e}))),requestHostedLoginAuthorizeV2:yt("auth/requestHostedLoginAuthorizeV2",(e=>({payload:e}))),handleHostedLoginCallback:yt("auth/handleHostedLoginCallback",(e=>({payload:e}))),afterAuthNavigation:yt("auth/afterAuthNavigation"),preLogin:yt("auth/preLogin",(e=>({payload:e}))),postLogin:yt("auth/postLogin",(e=>({payload:e}))),login:yt("auth/login",(e=>({payload:e}))),loginWithMfa:yt("auth/loginWithMfa",(e=>({payload:e}))),recoverMfa:yt("auth/recoverMfa",(e=>({payload:e}))),logout:yt("auth/logout",(e=>({payload:e}))),silentLogout:yt("auth/silentLogout",(e=>({payload:e}))),checkIfAllowToRememberMfaDevice:yt("auth/checkIfAllowToRememberMfaDevice",(e=>({payload:e}))),changePhoneNumberWithVerification:yt("auth/changePhoneNumberWithVerification",(e=>({payload:e}))),verifyChangePhoneNumber:yt("auth/verifyChangePhoneNumber",(e=>({payload:e}))),quickSmsPasswordlessPreLogin:yt("auth/quickSmsPasswordlessPreLogin",(e=>({payload:e}))),passwordlessPreLogin:yt("auth/passwordlessPreLogin",(e=>({payload:e}))),passwordlessPostLogin:yt("auth/passwordlessPostLogin",(e=>({payload:e}))),verifyInviteToken:yt("auth/verifyInviteToken",(e=>({payload:e}))),webAuthnPrelogin:yt("auth/webAuthnPrelogin",(e=>({payload:e}))),webAuthnPostLogin:yt("auth/webAuthnPostLogin",(e=>({payload:e}))),webAuthnCreateNewDeviceSession:yt("auth/webAuthnCreateNewDeviceSession",(e=>({payload:e}))),webAuthnVerifyNewDeviceSession:yt("auth/webAuthnVerifyNewDeviceSession",(e=>({payload:e}))),getUserIP:yt("auth/getUserIP",(e=>({payload:e}))),preEnrollMFAWebAuthnForLogin:yt("auth/preEnrollWebAuthNForLogin",(e=>({payload:e}))),enrollMFAWebAuthnForLogin:yt("auth/enrollWebAuthNForLogin",(e=>({payload:e}))),enrollMFAAuthenticatorAppForLogin:yt("auth/enrollMFAAuthenticatorAppForLogin",(e=>({payload:e}))),preEnrollMFASMSForLogin:yt("auth/preEnrollMFASMSForLogin",(e=>({payload:e}))),enrollMFASMSForLogin:yt("auth/enrollMFASMSForLogin",(e=>({payload:e}))),preVerifyMFAWebAuthnForLogin:yt("auth/preVerifyMFAWebAuthnForLogin",(e=>({payload:e}))),verifyMFAWebAuthnForLogin:yt("auth/verifyMFAWebAuthnForLogin",(e=>({payload:e}))),preVerifyMFASMSForLogin:yt("auth/preVerifyMFASMSForLogin",(e=>({payload:e}))),verifyMFASMSForLogin:yt("auth/verifyMFASMSForLogin",(e=>({payload:e}))),preVerifyMFAEmailCode:yt("auth/preVerifyMFAEmailCode",(e=>({payload:e}))),verifyMFAEmailCode:yt("auth/verifyMFAEmailCode",(e=>({payload:e}))),resetBreachedPassword:yt("auth/resetBreachedPassword",(e=>({payload:e})))};let Vt;!function(e){e.activating="activating",e.success="success",e.resend="resend",e.activatingForm="activatingForm"}(Vt||(Vt={}));const jt={step:Vt.activating,loading:!1,resentEmail:!1,activationStrategy:{loading:!1}},Bt={setActivateState:vt("activateState"),resetActivateState:St("activateState",{activateState:jt}),setActivateStrategyState:ht("activateState","activationStrategy")},Wt={activateAccount:yt("auth/activateAccount",(e=>({payload:e}))),preActivateAccount:yt("auth/preActivateAccount",(e=>({payload:e}))),getActivateAccountStrategy:yt("auth/getActivateAccountStrategy",(e=>({payload:e}))),resendActivationEmail:yt("auth/resendActivationEmail",(e=>({payload:e})))};let zt;!function(e){e.validate="validate",e.invalid="invalid",e.pending="pending",e.success="success",e.failed="failed"}(zt||(zt={}));const Kt={step:zt.validate},Ht={setAcceptInvitationState:vt("acceptInvitationState"),resetAcceptInvitationState:St("acceptInvitationState",{acceptInvitationState:Kt})},qt={acceptInvitation:yt("auth/acceptInvitation",(e=>({payload:e})))};let Jt;!function(e){e.forgotPassword="forgotPassword",e.success="success"}(Jt||(Jt={}));const Yt={step:Jt.forgotPassword,loading:!1,email:"",passwordConfig:null},Xt={setForgotPasswordState:vt("forgotPasswordState"),resetForgotPasswordState:St("forgotPasswordState",{forgotPasswordState:Yt})},Qt={forgotPassword:yt("auth/forgotPassword",(e=>({payload:e}))),resetPassword:yt("auth/resetPassword",(e=>({payload:e}))),loadPasswordConfig:yt("auth/loadPasswordConfig",(e=>({payload:e})))};let Zt;!function(e){e.ResetPhoneNumber="ResetPhoneNumber",e.VerifyResetPhoneNumber="VerifyResetPhoneNumber",e.ChangePhoneNumber="ChangePhoneNumber"}(Zt||(Zt={}));const en={step:Zt.ResetPhoneNumber,loading:!1},tn={setResetPhoneNumberState:vt("resetPhoneNumberState"),resetResetPhoneNumberState:St("resetPhoneNumberState",{resetPhoneNumberState:en})},nn={resetPhoneNumber:yt("auth/resetPhoneNumber",(e=>({payload:e}))),verifyResetPhoneNumber:yt("auth/verifyResetPhoneNumber",(e=>({payload:e}))),changePhoneNumber:yt("auth/changePhoneNumber",(e=>({payload:e})))},an={firstLoad:!0,loading:!0,saving:!1,errors:{},loaders:{},ssoConfigurations:[]},on={setSSOLoader:mt("ssoState"),setSSOError:bt("ssoState"),setSSOState:vt("ssoState"),resetSSOState:St("ssoState",{ssoState:an})},rn={loadSSOConfigurationsV2:yt("auth/loadSSOConfigurationsV2"),saveSSOConfigurationV2:yt("auth/saveSSOConfigurationV2",(e=>({payload:e}))),updateSSOConfiguration:yt("auth/updateSSOConfiguration",(e=>({payload:e}))),deleteSSOConfiguration:yt("auth/deleteSSOConfiguration",(e=>({payload:e}))),saveSSODomain:yt("auth/saveSSODomain",(e=>({payload:e}))),deleteSSODomain:yt("auth/deleteSSODomain",(e=>({payload:e}))),validateSSODomainV2:yt("auth/validateSSODomainV2",(e=>({payload:e}))),setSSODefaultRoles:yt("auth/setSSODefaultRoles",(e=>({payload:e}))),setSSOGroups:yt("auth/setSSOGroups",(e=>({payload:e}))),updateSSOGroups:yt("auth/updateSSOGroups",(e=>({payload:e}))),saveSSOConfigurationByMetadata:yt("auth/saveSSOConfigurationByMetadata",(e=>({payload:e}))),updateSSOConfigurationByMetadata:yt("auth/updateSSOConfigurationByMetadata",(e=>({payload:e}))),loadSSOConfigurations:yt("auth/loadSSOConfigurations"),loadSSOAuthorizationRoles:yt("auth/loadSSOAuthorizationRoles"),saveSSOConfigurations:yt("auth/saveSSOConfigurations",(e=>({payload:e}))),saveSSOConfigurationsFile:yt("auth/saveSSOConfigurationsFile",(e=>({payload:e}))),saveSSOConfigurationByData:yt("auth/saveSSOConfigurationByData",(e=>({payload:e}))),saveSSOConfigurationByUrl:yt("auth/saveSSOConfigurationByUrl",(e=>({payload:e}))),saveSSOConfigurationsFileWithCallback:yt("auth/saveSSOConfigurationsFileWithCallback",(e=>({payload:e}))),validateSSODomain:yt("auth/validateSSODomain",(e=>({payload:e}))),updateSSOAuthorizationRoles:yt("auth/updateSSOAuthorizationRoles",(e=>({payload:e}))),deleteSamlGroup:yt("auth/deleteSamlGroup",(e=>({payload:e}))),createSamlGroup:yt("auth/createSamlGroup",(e=>({payload:e}))),oidcPostlogin:yt("auth/oidcPostlogin",(e=>({payload:e})))},sn={loading:!1,error:null},ln={setProfileState:vt("profileState"),resetProfileState:St("profileState",{profileState:sn})},cn={loadProfile:yt("auth/loadProfile"),saveProfile:yt("auth/saveProfile",(e=>({payload:e}))),changePassword:yt("auth/changePassword",(e=>({payload:e})))};let dn;!function(e){e.verify="verify",e.recoveryCode="recoveryCode",e.authenticatorApp="authenticatorApp",e.smsSetPhoneNumber="smsSetPhoneNumber",e.smsVerifyCode="smsVerifyCode",e.emailVerifyCode="emailVerifyCode",e.noMFAEnrolledStepUp="noMFAEnrolledStepUp"}(dn||(dn={}));const un={step:dn.verify,loading:!1,saving:!1},yn={setMfaState:vt("mfaState"),resetMfaState:St("mfaState",{mfaState:un})},fn={enrollMfa:yt("auth/enrollMfa"),getMFADevices:yt("auth/getMFADevices"),getMFAStrategies:yt("auth/getMFAStrategies"),verifyMfa:yt("auth/verifyMfa",(e=>({payload:e}))),verifyMfaAfterForce:yt("auth/verifyMfaAfterForce",(e=>({payload:e}))),disableMfa:yt("auth/disableMfa",(e=>({payload:e}))),preDisableMfaSms:yt("auth/preDisableMfaSms",(e=>({payload:e}))),disableMfaSms:yt("auth/disableMfaSms",(e=>({payload:e}))),preEnrollMfaSms:yt("auth/preEnrollMfaSms",(e=>({payload:e}))),enrollMfaSms:yt("auth/enrollMfaSms",(e=>({payload:e}))),preEnrollMfaWebAuthn:yt("auth/preEnrollMfaWebAuthn",(e=>({payload:e}))),enrollMfaWebAuthn:yt("auth/enrollMfaWebAuthn",(e=>({payload:e}))),preDisableMfaWebAuthn:yt("auth/preDisableMfaWebAuthn",(e=>({payload:e}))),disableMfaWebAuthn:yt("auth/disableMfaWebAuthn",(e=>({payload:e})))},pn={loaders:{},pageOffset:0,pageSize:20,errors:{},users:[],allUsers:[],roles:[],permissions:[],totalPages:0,shouldShowSubTenantUsersIfReseller:!1,allUsersQueryParams:{_filter:null,_offset:0,_limit:20,_order:"DESC",_sortBy:"name"},addUserDialogState:{loading:!1,open:!1},deleteUserDialogState:{loading:!1,open:!1},lockUserDialogState:{loading:!1,open:!1}},gn={setTeamLoader:mt("teamState"),setTeamError:bt("teamState"),setTeamState:vt("teamState"),resetTeamState:St("teamState",{teamState:pn})},Sn={loadUsersV2:yt("auth/loadUsersV2",(e=>({payload:e}))),loadUsers:yt("auth/loadUsers",(e=>({payload:e}))),loadAllSubTenantsUsers:yt("auth/loadAllSubTenantsUsers",(e=>({payload:e}))),loadRoles:yt("auth/loadRoles",(e=>({payload:e}))),addUser:yt("auth/addUser",(e=>({payload:e}))),addUsersBulk:yt("auth/addUsersBulk",(e=>({payload:e}))),addUserToSubTenants:yt("auth/addUserToSubTenants",(e=>({payload:e}))),updateUser:yt("auth/updateUser",(e=>({payload:e}))),deleteUser:yt("auth/deleteUser",(e=>({payload:e}))),setUserRolesForSubTenants:yt("auth/setUserRolesForSubTenants",(e=>({payload:e}))),deleteUserFromSubTenants:yt("auth/deleteUserFromSubTenants",(e=>({payload:e}))),lockUser:yt("auth/lockUser",(e=>({payload:e}))),resendActivationLink:yt("auth/resendActivationLink",(e=>({payload:e}))),resendInvitationLink:yt("auth/resendInvitationLink",(e=>({payload:e}))),resendInvitationEmail:yt("auth/resendInvitationEmail",(e=>({payload:e}))),resendInvitationLinkToAllSubTenants:yt("auth/resendInvitationLinkToAllSubTenants",(e=>({payload:e}))),getTemporaryUsersConfig:yt("auth/getTemporaryUsersConfig"),updateUserExpirationTime:yt("auth/updateUserExpirationTime",(e=>({payload:e}))),setUserAsPermanent:yt("auth/setUserAsPermanent",(e=>({payload:e}))),getInvitationLink:yt("auth/getInvitationLink"),createInvitationLink:yt("auth/createInvitationLink",(e=>({payload:e}))),updateInvitationLink:yt("auth/updateInvitationLink",(e=>({payload:e}))),deleteInvitationLink:yt("auth/deleteInvitationLink",(e=>({payload:e}))),openAddUserDialog:yt("auth/openAddUserDialog",(e=>({payload:e}))),closeAddUserDialog:yt("auth/closeAddUserDialog",(e=>({payload:e}))),openDeleteUserDialog:yt("auth/openDeleteUserDialog",(e=>({payload:e}))),closeDeleteUserDialog:yt("auth/closeDeleteUserDialog",(e=>({payload:e}))),openLockUserDialog:yt("auth/openLockUserDialog",(e=>({payload:e}))),closeLockUserDialog:yt("auth/closeLockUserDialog",(e=>({payload:e})))},vn={firstLoad:!0,loading:!1,error:""},hn={setSocialLoginsState:vt("socialLoginState"),resetSocialLoginsState:St("socialLoginState",{socialLoginState:vn})},mn={loadSocialLoginsConfiguration:yt("auth/loadSocialLoginsConfiguration"),loadSocialLoginsConfigurationV2:yt("auth/loadSocialLoginsConfigurationV2",(e=>({payload:e}))),loginViaSocialLogin:yt("auth/loginViaSocialLogin",(e=>({payload:e}))),setSocialLoginError:yt("auth/setSocialLoginError",(e=>({payload:e})))};let bn;!function(e){e.SignUp="SignUp",e.SignUpSuccess="SignUpSuccess"}(bn||(bn={}));const An={loading:!1,allowSignUps:!1,allowNotVerifiedUsersLogin:!1,firstLoad:!0,stage:bn.SignUp},Tn={setSignUpState:vt("signUpState"),resetSignUpState:St("signUpState",{signUpState:An})},En={signUpUser:yt("auth/signUpUser",(e=>({payload:e}))),resetSignUpStateSoft:yt("auth/resetSignUpStateSoft")},kn={apiTokenType:null,searchValue:"",showAddTokenDialog:!1,createdByUserIdColumn:"show",deleteTokenDialog:{open:!1,clientId:""},successDialog:{open:!1,secret:"",clientId:""},loaders:{},apiTokensDataTenant:[],apiTokensDataUser:[],roles:[],permissions:[],errors:{}},In={setApiTokensLoader:mt("apiTokensState"),setApiTokensError:bt("apiTokensState"),setApiTokensState:vt("apiTokensState"),resetApiTokensState:St("apiTokensState",{apiTokensState:kn})},On={loadApiTokens:yt("auth/loadApiTokens",(e=>({payload:e}))),loadUserApiTokens:yt("auth/loadUserApiTokens",(e=>({payload:e}))),loadTenantApiTokens:yt("auth/loadTenantApiTokens",(e=>({payload:e}))),initApiTokensData:yt("auth/initApiTokensData",(e=>({payload:e}))),addTenantApiToken:yt("auth/addTenantApiToken",(e=>({payload:e}))),addUserApiToken:yt("auth/addUserApiToken",(e=>({payload:e}))),deleteUserApiToken:yt("auth/deleteUserApiToken",(e=>({payload:e}))),deleteTenantApiToken:yt("auth/deleteTenantApiToken",(e=>({payload:e})))},Pn={globalPolicy:{loading:!0},publicPolicy:{loading:!1},vendorMfaPolicy:{loading:!0},mfaPolicy:{loading:!0},vendorLockoutPolicy:{loading:!0},lockoutPolicy:{loading:!0},captchaPolicy:{loading:!0},passwordHistoryPolicy:{loading:!0},passwordPolicy:{loading:!0},vendorPasswordHistoryPolicy:{loading:!0},publicAuthStrategyPolicy:{loading:!0}},_n={setSecurityPolicyState:vt("securityPolicyState"),setSecurityPolicyGlobalState:ht("securityPolicyState","globalPolicy"),setSecurityPolicyPublicState:ht("securityPolicyState","publicPolicy"),setSecurityPolicyAuthStrategyPublicState:ht("securityPolicyState","publicAuthStrategyPolicy"),setSecurityPolicyMfaState:ht("securityPolicyState","mfaPolicy"),setSecurityPolicyVendorMfaState:ht("securityPolicyState","vendorMfaPolicy"),setSecurityPolicyVendorLockoutState:ht("securityPolicyState","vendorLockoutPolicy"),setSecurityPolicyVendorPasswordHistoryState:ht("securityPolicyState","vendorPasswordHistoryPolicy"),setSecurityPolicyLockoutState:ht("securityPolicyState","lockoutPolicy"),setSecurityPolicyCaptchaState:ht("securityPolicyState","captchaPolicy"),setSecurityPolicyPasswordHistoryState:ht("securityPolicyState","passwordHistoryPolicy"),setSecurityPolicyPasswordState:ht("securityPolicyState","passwordPolicy"),resetSecurityPolicyState:St("securityPolicyState",{securityPolicyState:Pn})},Ln={loadSecurityPolicy:yt("auth/loadSecurityPolicy"),loadPublicSecurityPolicy:yt("auth/loadPublicSecurityPolicy"),loadSecurityPolicyMfa:yt("auth/loadSecurityPolicyMfa"),loadSecurityPolicyVendorMfa:yt("auth/loadSecurityPolicyVendorMfa"),saveSecurityPolicyMfa:yt("auth/saveSecurityPolicyMfa",(e=>({payload:e}))),loadSecurityPolicyLockout:yt("auth/loadSecurityPolicyLockout"),loadSecurityPolicyVendorLockout:yt("auth/loadSecurityPolicyVendorLockout"),saveSecurityPolicyLockout:yt("auth/saveSecurityPolicyLockout",(e=>({payload:e}))),loadSecurityPolicyCaptcha:yt("auth/loadSecurityPolicyCaptcha"),loadSecurityPolicyPasswordHistory:yt("auth/loadSecurityPolicyPasswordHistory"),loadSecurityPolicyVendorPasswordHistory:yt("auth/loadSecurityPolicyVendorPasswordHistory"),saveSecurityPolicyPasswordHistory:yt("auth/saveSecurityPolicyPasswordHistory",(e=>({payload:e}))),loadVendorPasswordConfig:yt("auth/loadVendorPasswordConfig"),loadPublicAuthStrategiesPolicy:yt("auth/loadPublicAuthStrategiesPolicy")},wn={loading:!1},Dn={setAccountSettingsState:vt("accountSettingsState"),resetAccountSettingsState:St("accountSettingsState",{accountSettingsState:wn})},Un={loadAccountSettings:yt("auth/loadAccountSettings",(e=>({payload:e}))),saveAccountSettings:yt("auth/saveAccountSettings",(e=>({payload:e})))},Rn={tenants:[],subTenants:[],loading:!0,tenantTree:null},Cn={setTenantsState:vt("tenantsState"),resetTenantsState:St("tenantsState",{tenantsState:Rn})},Nn={switchTenant:yt("auth/switchTenant",(e=>({payload:e}))),loadTenants:yt("auth/loadTenants",(e=>({payload:e}))),loadSubTenants:yt("auth/loadSubTenants",(e=>({payload:e}))),loadSubTenantsTree:yt("auth/loadSubTenantsTree",(e=>({payload:e})))},Mn={loaders:{},errors:{},roles:[],permissions:[],permissionCategories:[]},Fn={setRolesState:vt("rolesState"),resetRolesState:St("rolesState",{rolesState:Mn}),setRolesStateLoader:mt("rolesState"),setRolesStateError:bt("rolesState")},Gn={loadRolesAndPermissions:yt("auth/loadRoles",(e=>({payload:e}))),addRole:yt("auth/addRole",(e=>({payload:e}))),addRoleV2:yt("auth/addRoleV2",(e=>({payload:e}))),updateRole:yt("auth/updateRole",(e=>({payload:e}))),deleteRole:yt("auth/deleteRole",(e=>({payload:e}))),attachPermissionsToRole:yt("auth/attachPermissionsToRole",(e=>({payload:e})))},$n={loading:!1,sessions:[]},xn={setSessionsState:vt("sessionsState"),resetSessionsState:St("sessionsState",{sessionsState:$n})},Vn={loadUserSessions:yt("auth/loadUserSessions"),loadCurrentUserSession:yt("auth/loadCurrentUserSession"),deleteUserSession:yt("auth/deleteUserSession",(e=>({payload:e}))),deleteAllUserSessions:yt("auth/deleteAllUserSessions"),revokeUserSessions:yt("auth/revokeUserSessions",(e=>({payload:e})))},jn={loading:!1,configurations:{}},Bn={setSessionsPolicyState:vt("sessionsPolicyState"),resetSessionsPolicyState:St("sessionsPolicyState",{sessionsPolicyState:jn})},Wn={loadSessionsPolicy:yt("auth/loadSessionsPolicy"),createOrUpdateSessionsPolicy:yt("auth/createOrUpdateSessionsPolicy",(e=>({payload:e})))};let zn;!function(e){e.ALLOW="ALLOW",e.BLOCK="BLOCK"}(zn||(zn={}));const Kn={ipRestrictions:{loading:!1,pagination:{_offset:0,_limit:4,_filter:zn.ALLOW},totalPages:1,userIpValid:!1},emailDomainRestrictions:{loading:!0}},Hn={setRestrictionsState:vt("restrictionsState"),setIpRestrictionsState:ht("restrictionsState","ipRestrictions"),setEmailDomainRestrictionsState:ht("restrictionsState","emailDomainRestrictions")},qn={checkIfUserIpValid:yt("auth/checkIfUserIpValid"),addCurrentUserIpAndActivate:yt("auth/addCurrentUserIpAndActivate",(e=>({payload:e}))),loadIpRestrictions:yt("auth/loadIpRestrictions"),saveIpRestriction:yt("auth/saveIpRestriction",(e=>({payload:e}))),saveIpRestrictionsConfig:yt("auth/saveIpRestrictionsConfig",(e=>({payload:e}))),deleteIpRestriction:yt("auth/deleteIpRestriction",(e=>({payload:e}))),loadEmailDomainRestrictions:yt("auth/loadEmailDomainRestrictions"),saveEmailDomainRestriction:yt("auth/saveEmailDomainRestriction",(e=>({payload:e}))),saveEmailDomainRestrictionsConfig:yt("auth/saveEmailDomainRestrictionsConfig",(e=>({payload:e}))),deleteEmailDomainRestriction:yt("auth/deleteEmailDomainRestriction",(e=>({payload:e})))},Jn={loading:!1},Yn={setProvisioningState:vt("provisioningState"),resetProvisioningState:St("provisioningState",{provisioningState:Jn})},Xn={loadProvisionConnections:yt("auth/loadProvisionConnections"),createProvisionConnection:yt("auth/createProvisionConnection",(e=>({payload:e}))),deleteProvisionConnection:yt("auth/deleteProvisionConnection",(e=>({payload:e}))),updateProvisionConnection:yt("auth/updateProvisionConnection",(e=>({payload:e})))},Qn={devices:[],loading:!1,error:null},Zn={setPasskeysState:vt("passkeysState"),resetPasskeysState:St("passkeysState",{passkeysState:Qn})},ea={loadWebAuthnDevices:yt("auth/loadWebAuthnDevices"),deleteWebAuthnDevice:yt("auth/deleteWebAuthnDevice",(e=>({payload:e})))},ta={loaders:{},errors:{},groups:[],groupsConfiguration:{}},na={setUsersGroupsLoader:mt("groupsState"),setUsersGroupsError:bt("groupsState"),setGroupsState:vt("groupsState"),resetUsersGroupsState:St("groupsState",{groupsState:ta})},aa={loadGroups:yt("auth/loadUsersGroups"),getGroupById:yt("auth/getGroupById",(e=>({payload:e}))),createGroup:yt("auth/createGroup",(e=>({payload:e}))),updateGroup:yt("auth/updateGroup",(e=>({payload:e}))),deleteGroup:yt("auth/deleteGroup",(e=>({payload:e}))),addRolesToGroup:yt("auth/addRolesToGroup",(e=>({payload:e}))),deleteRolesFromGroup:yt("auth/deleteRolesFromGroup",(e=>({payload:e}))),addUsersToGroup:yt("auth/addUsersToGroup",(e=>({payload:e}))),deleteUsersFromGroup:yt("auth/deleteUsersFromGroup",(e=>({payload:e}))),getGroupConfiguration:yt("auth/getGroupConfiguration"),updateGroupConfiguration:yt("auth/updateGroupConfiguration",(e=>({payload:e}))),getTeamUsers:yt("auth/getUsers",(e=>({payload:e})))},ia={addGroupDialogState:{loading:!1,open:!1},editGroupDialogState:{loading:!1,open:!1},deleteGroupDialogState:{loading:!1,open:!1},addMembersToGroupDialogState:{loading:!1,open:!1,userIds:[]},deleteMemberFromGroupDialogState:{loading:!1,open:!1}},oa={setGroupsDialogsState:vt("groupsDialogsState"),resetGroupsDialogsState:St("groupsState",{groupsDialogsState:ia}),openAddGroupDialog:Tt("groupsDialogsState","addGroupDialogState",{open:!0}),closeAddGroupDialog:Tt("groupsDialogsState","addGroupDialogState",{open:!1}),openEditGroupDialog:At("groupsDialogsState","editGroupDialogState",{open:!0}),closeEditGroupDialog:Tt("groupsDialogsState","editGroupDialogState",{open:!1,loading:!1,group:void 0}),openDeleteGroupDialog:At("groupsDialogsState","deleteGroupDialogState",{open:!0}),closeDeleteGroupDialog:Tt("groupsDialogsState","deleteGroupDialogState",{open:!1,loading:!1,group:void 0}),openAddMembersToGroupDialog:Tt("groupsDialogsState","addMembersToGroupDialogState",{open:!0}),closeAddMembersToGroupDialog:Tt("groupsDialogsState","addMembersToGroupDialogState",{open:!1,userIds:[]}),openDeleteMemberFromGroupDialog:At("groupsDialogsState","deleteMemberFromGroupDialogState",{open:!0}),closeDeleteMemberFromGroupDialog:Tt("groupsDialogsState","deleteMemberFromGroupDialogState",{open:!1,userId:void 0})},ra={loading:!0,error:null},sa={setCustomLoginState:vt("customLoginState"),resetCustomLoginState:St("customLoginState",{customLoginState:ra})},la={loadTenantMetadata:yt("auth/loadTenantMetadata"),updateTenantMetadata:yt("auth/updateTenantMetadata",(e=>({payload:e})))},ca={frameWork:"x-frontegg-framework",fronteggSdkVersion:"x-frontegg-sdk",contentType:"Content-Type",source:"frontegg-source",scopedTenant:"frontegg-scoped-tenant"};let da,ua,ya,fa,pa;!function(e){e.AdminPortal="admin-portal",e.LoginBox="login-box"}(da||(da={})),function(e){e.Nextjs="nextjs",e.React="react",e.Angular="angular",e.Vuejs="vuejs",e.Flutter="flutter",e.Ios="ios",e.Android="android",e.Vanillajs="vanillajs"}(ua||(ua={})),function(e){e.ASC="ASC",e.DESC="DESC"}(ya||(ya={})),function(e){e.createdAt="createdAt",e.name="name",e.email="email",e.id="id",e.verified="verified",e.isLocked="isLocked",e.provider="provider",e.tenantId="tenantId"}(fa||(fa={})),function(e){e.MFA_UNENROLLED="mfa-unenrolled",e.BREACHED_PASSWORDS="breached-passwords",e.INACTIVE="inactive"}(pa||(pa={}));const ga=["local","saml","google","github","facebook","microsoft","scim2","slack"],Sa={loaders:{},errors:{},accounts:{tenantId:"",children:[]},accountsQueryParams:{_limit:50,_offset:0,_filter:"",_subTenantId:""},searchAccountsData:[],rootAccount:{tenantId:""},selectedAccount:{tenantId:"",userJwt:{accessToken:"",expiresIn:0,expires:""},users:[],usersQueryParams:{_offset:0,_limit:10,_order:ya.DESC,_sortBy:fa.name},usersPageOffset:0,accountSettings:{}}},va={setAllAccountsLoader:mt("allAccountsState"),setAllAccountsError:bt("allAccountsState"),setAllAccountsState:vt("allAccountsState"),setSelectedAccountState:ht("allAccountsState","selectedAccount"),resetAllAccountsState:St("allAccountsState",{allAccountsState:Sa})},ha={loadAccounts:yt("auth/loadAccounts",(e=>({payload:e}))),searchAccounts:yt("auth/searchAccounts",(e=>({payload:e}))),updateSubAccountAccessForUser:yt("auth/updateSubAccountAccessForUser",(e=>({payload:e}))),createSubAccount:yt("auth/createSubAccount",(e=>({payload:e}))),updateSubAccount:yt("auth/updateAccount",(e=>({payload:e}))),deleteSubAccount:yt("auth/deleteAccount",(e=>({payload:e}))),updateSubAccountSettings:yt("auth/updateSubAccountSettings",(e=>({payload:e}))),addUsersToAccount:yt("auth/addUsersToAccount",(e=>({payload:e}))),getAccountUsers:yt("auth/getAccountUsers",(e=>({payload:e}))),deleteUsersFromAccount:yt("auth/deleteUsersFromAccount",(e=>({payload:e}))),setUserRolesForSubAccount:yt("auth/setUserRolesForSubAccount",(e=>({payload:e}))),getUserJwtForSubAccount:yt("auth/getUserJwtForSubAccount",(e=>({payload:e}))),setRootAccountData:yt("auth/setRootAccountData"),setSelectedSubAccountData:yt("auth/setSelectedSubAccountData",(e=>({payload:e}))),loadNumberOfUsersForSelectedSubAccount:yt("auth/loadNumberOfUsersForSelectedSubAccount",(e=>({payload:e})))},ma={createSubAccountDialog:{loading:!1,open:!1,error:!1,jwt:"",canSelectParentAccount:!1},updateSubAccountDialog:{accountId:"",accountName:"",loading:!1,open:!1,error:!1,jwt:""},deleteSubAccountDialog:{accountId:"",accountName:"",isParentAccount:!1,loading:!1,open:!1,error:!1,jwt:""},addUsersToAccountDialog:{loading:!1,open:!1,accountName:"",accountId:"",permissionToGiveAccessToSubAccounts:!1,jwt:""},deleteUserFromAccountDialog:{userId:"",userName:"",accountId:"",loading:!1,open:!1,jwt:""},editUserRolesDialog:{loading:!1,open:!1,jwt:"",accountId:"",userId:"",userName:"",userRoles:[]}},ba={setAllAccountDialogsState:vt("allAccountsDialogsState"),resetAllAccountDialogsState:St("allAccountsDialogsState",{allAccountsDialogsState:ma}),openCreateSubAccountDialog:At("allAccountsDialogsState","createSubAccountDialog",{open:!0}),closeCreateSubAccountDialog:Tt("allAccountsDialogsState","createSubAccountDialog",ma.createSubAccountDialog),openUpdateSubAccountDialog:At("allAccountsDialogsState","updateSubAccountDialog",{open:!0}),closeUpdateSubAccountDialog:Tt("allAccountsDialogsState","updateSubAccountDialog",ma.updateSubAccountDialog),openDeleteSubAccountDialog:At("allAccountsDialogsState","deleteSubAccountDialog",{open:!0}),closeDeleteSubAccountDialog:Tt("allAccountsDialogsState","deleteSubAccountDialog",ma.deleteSubAccountDialog),openAddUsersToAccountDialog:At("allAccountsDialogsState","addUsersToAccountDialog",{open:!0}),closeAddUsersToAccountDialog:Tt("allAccountsDialogsState","addUsersToAccountDialog",ma.addUsersToAccountDialog),openDeleteUserFromAccountDialog:At("allAccountsDialogsState","deleteUserFromAccountDialog",{open:!0}),closeDeleteUserFromAccountDialog:Tt("allAccountsDialogsState","deleteUserFromAccountDialog",ma.deleteUserFromAccountDialog),openEditUserRolesDialog:At("allAccountsDialogsState","editUserRolesDialog",{open:!0}),closeEditUserRolesDialog:Tt("allAccountsDialogsState","editUserRolesDialog",ma.editUserRolesDialog)},Aa={loaders:{},errors:{},recommendations:void 0,insights:void 0,score:0,breachedPasswordUsersTable:{users:[],usersPageOffset:0,totalUsersItems:0,totalUsersPages:0,queryParams:{_offset:0,_limit:10}},unenrolledMfaUsersTable:{users:[],usersPageOffset:0,totalUsersItems:0,totalUsersPages:0,queryParams:{_offset:0,_limit:10}},inactiveUsersTable:{users:[],usersPageOffset:0,totalUsersItems:0,totalUsersPages:0,queryParams:{_offset:0,_limit:10,_maxInactiveSeconds:7776e3}}},Ta={setSecurityCenterState:vt("securityCenterState"),resetSecurityCenterState:St("securityCenterState",{securityCenterState:Aa}),setSecurityCenterStateLoader:mt("securityCenterState"),setSecurityCenterStateError:bt("securityCenterState")},Ea={loadRecommendations:yt("auth/loadRecommendations"),loadInsights:yt("auth/loadInsights"),sendResetBreachedPasswordEmail:yt("auth/sendResetBreachedPasswordEmail",(e=>({payload:e}))),sendBulkResetBreachedPasswordEmails:yt("auth/sendBulkResetBreachedPasswordEmails",(e=>({payload:e}))),loadBreachedPasswordUsers:yt("auth/loadBreachedPasswordUsers",(e=>({payload:e}))),loadUnenrolledMfaUsers:yt("auth/loadUnenrolledMfaUsers",(e=>({payload:e}))),loadInactiveUsers:yt("auth/loadInactiveUsers",(e=>({payload:e})))};let ka,Ia,Oa;!function(e){e.Microsoft="microsoft",e.Facebook="facebook",e.Google="google",e.Github="github",e.Slack="slack",e.Apple="apple",e.Linkedin="linkedin"}(ka||(ka={})),function(e){e.EmailAndPassword="EmailAndPassword",e.MagicLink="MagicLink",e.Code="Code",e.NoLocalAuthentication="NoLocalAuthentication",e.SmsCode="SmsCode"}(Ia||(Ia={})),function(e){e.ClientCredentials="ClientCredentials",e.AccessToken="AccessToken"}(Oa||(Oa={}));const Pa={[Ia.Code]:_t.loginWithOtc,[Ia.EmailAndPassword]:_t.loginWithPassword,[Ia.MagicLink]:_t.magicLinkPreLoginSuccess,[Ia.SmsCode]:_t.loginWithSmsOtc},_a={loading:!1,error:null,phoneNumbers:void 0},La={setSmsState:vt("smsState"),resetSmsState:St("smsState",{smsState:_a})},wa={loadPhoneNumbers:yt("auth/loadPhoneNumbers"),setUpPhoneNumber:yt("auth/setUpPhoneNumber",(e=>({payload:e}))),verifyPhoneNumber:yt("auth/verifyPhoneNumber",(e=>({payload:e}))),deletePhoneNumber:yt("auth/deletePhoneNumber",(e=>({payload:e}))),verifyDeletePhoneNumber:yt("auth/verifyDeletePhoneNumber",(e=>({payload:e}))),preVerifyPhoneNumber:yt("auth/preVerifyPhoneNumber",(e=>({payload:e})))},Da={loading:!1,mfaDevices:void 0,mfaToken:""},Ua={setStepUpState:vt("stepUpState"),resetStepUpState:St("stepUpState",{stepUpState:Da})},Ra={stepUpHostedLogin:yt("auth/stepUpHostedLogin",(e=>({payload:e}))),generateStepUpSession:yt("auth/generateStepUpSession",(e=>({payload:e}))),stepUpWithAuthenticator:yt("auth/stepUpWithAuthenticator",(e=>({payload:e}))),preVerifyMFASMSForStepUp:yt("auth/preVerifyMFASMSForStepUp",(e=>({payload:e}))),verifyMFASMSForStepUp:yt("auth/verifyMFASMSForStepUp",(e=>({payload:e}))),preVerifyMFAWebAuthnForStepUp:yt("auth/preVerifyMFAWebAuthnForStepUp",(e=>({payload:e}))),verifyMFAWebAuthnForStepUp:yt("auth/verifyMFAWebAuthnForStepUp",(e=>({payload:e}))),preVerifyMFAEmailCodeForStepUp:yt("auth/preVerifyMFAEmailCodeForStepUp",(e=>({payload:e}))),verifyMFAEmailCodeForStepUp:yt("auth/verifyMFAEmailCodeForStepUp",(e=>({payload:e})))},Ca={isAuthenticated:!1,isLoading:!0,isSSOAuth:!1,user:null,signUpState:An,loginState:Gt,stepUpState:Da,activateState:jt,acceptInvitationState:Kt,forgotPasswordState:Yt,ssoState:an,profileState:sn,customLoginState:ra,mfaState:un,teamState:pn,groupsState:ta,groupsDialogsState:ia,socialLoginState:vn,apiTokensState:kn,securityPolicyState:Pn,accountSettingsState:wn,tenantsState:Rn,rolesState:Mn,resetPhoneNumberState:en,sessionsState:$n,sessionsPolicyState:jn,restrictionsState:Kn,provisioningState:Jn,passkeysState:Qn,allAccountsState:Sa,allAccountsDialogsState:ma,securityCenterState:Aa,smsState:_a},Na=G({routes:{authenticatedUrl:"/",loginUrl:"/account/login",stepUpUrl:"/account/step-up",logoutUrl:"/account/logout",activateUrl:"/account/activate",impersonationUrl:"/account/impersonate",acceptInvitationUrl:"/account/invitation/accept",forgetPasswordUrl:"/account/forget-password",resetPhoneNumberUrl:"/account/reset-phone-number",resetPasswordUrl:"/account/reset-password",socialLoginCallbackUrl:"/account/social/success",signUpUrl:"/account/sign-up",oidcRedirectUrl:"/account/oidc/callback",samlCallbackUrl:"/account/saml/callback",magicLinkCallbackUrl:"/account/login/magic-link",hostedLoginRedirectUrl:"/oauth/callback",openAppUrl:"/account/redirect"},onRedirectTo:()=>{}},Ca);let Ma;!function(e){e.impersonating="impersonating",e.success="success"}(Ma||(Ma={}));const Fa={step:Ma.impersonating,loading:!1},Ga={setImpersonateState:vt("impersonateState"),resetImpersonateState:St("impersonateState",{impersonateState:Fa})},$a={impersonate:yt("impersonation/impersonate",(e=>({payload:e})))},{reducer:xa,actions:Va}=pt({name:Ct,initialState:Na,reducers:G({resetState:e=>G({},e,Ca),setState:(e,{payload:t})=>G({},e,t),setUser:("user",(e,{payload:t})=>G({},e,{user:t})),setEntitlements:ht("user","entitlements")},$t,Ua,hn,Bt,Ga,Ht,Xt,tn,Tn,ln,sa,on,yn,gn,na,oa,In,_n,Dn,Cn,Fn,xn,Bn,Hn,Yn,Zn,va,ba,Ta,La)});const ja=G({loadEntitlements:yt("auth/loadEntitlements",(e=>({payload:e})))},Va,xt,Ra,mn,Wt,qt,Qt,nn,En,cn,la,rn,fn,Sn,aa,{},On,Ln,Un,Nn,Gn,Vn,Wn,qn,Xn,$a,ea,ha,Ea,wa);var Ba=function(e){return"@@redux-saga/"+e},Wa=Ba("CANCEL_PROMISE"),za=Ba("CHANNEL_END"),Ka=Ba("IO"),Ha=Ba("MATCH"),qa=Ba("MULTICAST"),Ja=Ba("SAGA_ACTION"),Ya=Ba("SELF_CANCELLATION"),Xa=Ba("TASK"),Qa=Ba("TASK_CANCEL"),Za=Ba("TERMINATE"),ei=Ba("LOCATION");function ti(e,t){if(null==e)return{};var n,a,i={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}var ni=function(e){return null==e},ai=function(e){return null!=e},ii=function(e){return"function"==typeof e},oi=function(e){return"string"==typeof e},ri=Array.isArray,si=function(e){return e&&ii(e.then)},li=function(e){return e&&ii(e.next)&&ii(e.throw)},ci=function e(t){return t&&(oi(t)||yi(t)||ii(t)||ri(t)&&t.every(e))},di=function(e){return e&&ii(e.take)&&ii(e.close)},ui=function(e){return ii(e)&&e.hasOwnProperty("toString")},yi=function(e){return Boolean(e)&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype};const fi=function(e,t){var n;void 0===t&&(t=!0);var a=new Promise((function(a){n=setTimeout(a,Math.min(2147483647,e),t)}));return a[Wa]=function(){clearTimeout(n)},a};var pi=function(e){return function(){return e}},gi=pi(!0),Si=function(){},vi=function(e){return e};"function"==typeof Symbol&&Symbol.asyncIterator&&Symbol.asyncIterator;var hi=function(e,t){G(e,t),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(t).forEach((function(n){e[n]=t[n]}))};function mi(e,t){var n=e.indexOf(t);n>=0&&e.splice(n,1)}var bi=function(e){throw e},Ai=function(e){return{value:e,done:!0}};function Ti(e,t,n){void 0===t&&(t=bi),void 0===n&&(n="iterator");var a={meta:{name:n},next:e,throw:t,return:Ai,isSagaIterator:!0};return"undefined"!=typeof Symbol&&(a[Symbol.iterator]=function(){return a}),a}function Ei(e,t){var n=t.sagaStack;console.error(e),console.error(n)}var ki=function(e){return Array.apply(null,new Array(e))},Ii=function(e){return function(t){return e(Object.defineProperty(t,Ja,{value:!0}))}},Oi=function(e){return e===Za},Pi=function(e){return e===Qa},_i=function(e){return Oi(e)||Pi(e)};function Li(e,t){var n,a=Object.keys(e),i=a.length,o=0,r=ri(e)?ki(i):{},s={};return a.forEach((function(e){var a=function(a,s){n||(s||_i(a)?(t.cancel(),t(a,s)):(r[e]=a,++o===i&&(n=!0,t(r))))};a.cancel=Si,s[e]=a})),t.cancel=function(){n||(n=!0,a.forEach((function(e){return s[e].cancel()})))},s}function wi(e){return{name:e.name||"anonymous",location:Di(e)}}function Di(e){return e[ei]}var Ui=function(e){return function(e,t){void 0===e&&(e=10);var n=new Array(e),a=0,i=0,o=0,r=function(t){n[i]=t,i=(i+1)%e,a++},s=function(){if(0!=a){var t=n[o];return n[o]=null,a--,o=(o+1)%e,t}},l=function(){for(var e=[];a;)e.push(s());return e};return{isEmpty:function(){return 0==a},put:function(s){var c;if(a<e)r(s);else switch(t){case 1:throw new Error("Channel's Buffer overflow!");case 3:n[i]=s,o=i=(i+1)%e;break;case 4:c=2*e,n=l(),a=n.length,i=n.length,o=0,n.length=c,e=c,r(s)}},take:s,flush:l}}(e,4)},Ri="TAKE",Ci="CALL",Ni="FORK",Mi="SELECT",Fi=function(e,t){var n;return(n={})[Ka]=!0,n.combinator=!1,n.type=e,n.payload=t,n};function Gi(e,t){return void 0===e&&(e="*"),ci(e)?(ai(t)&&console.warn("take(pattern) takes one argument but two were provided. Consider passing an array for listening to several action types"),Fi(Ri,{pattern:e})):di(n=e)&&n[qa]&&ai(t)&&ci(t)?Fi(Ri,{channel:e,pattern:t}):di(e)?(ai(t)&&console.warn("take(channel) takes one argument but two were provided. Second argument is ignored."),Fi(Ri,{channel:e})):void 0;var n}function $i(e,t){return ni(t)&&(t=e,e=void 0),Fi("PUT",{channel:e,action:t})}function xi(e){var t=Fi("ALL",e);return t.combinator=!0,t}function Vi(e,t){var n,a=null;return ii(e)?n=e:(ri(e)?(a=e[0],n=e[1]):(a=e.context,n=e.fn),a&&oi(n)&&ii(a[n])&&(n=a[n])),{context:a,fn:n,args:t}}function ji(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return Fi(Ci,Vi(e,n))}function Bi(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return Fi(Ni,Vi(e,n))}function Wi(e){return void 0===e&&(e=Ya),Fi("CANCEL",e)}function zi(e){void 0===e&&(e=vi);for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return Fi(Mi,{selector:e,args:n})}var Ki=ji.bind(null,fi);const Hi=function(){var e={};return e.promise=new Promise((function(t,n){e.resolve=t,e.reject=n})),e};var qi=[],Ji=0;function Yi(e){try{Zi(),e()}finally{eo()}}function Xi(e){qi.push(e),Ji||(Zi(),to())}function Qi(e){try{return Zi(),e()}finally{to()}}function Zi(){Ji++}function eo(){Ji--}function to(){var e;for(eo();!Ji&&void 0!==(e=qi.shift());)Yi(e)}var no=function(e){return function(t){return e.some((function(e){return so(e)(t)}))}},ao=function(e){return function(t){return e(t)}},io=function(e){return function(t){return t.type===String(e)}},oo=function(e){return function(t){return t.type===e}},ro=function(){return gi};function so(e){var t="*"===e?ro:oi(e)?io:ri(e)?no:ui(e)?io:ii(e)?ao:yi(e)?oo:null;if(null===t)throw new Error("invalid pattern: "+e);return t(e)}var lo={type:za},co=function(e){return e&&e.type===za};function uo(){var e,t,n,a,i,o,r=(t=!1,a=n=[],i=function(){a===n&&(a=n.slice())},o=function(){t=!0;var e=n=a;a=[],e.forEach((function(e){e(lo)}))},(e={})[qa]=!0,e.put=function(e){if(!t)if(co(e))o();else for(var i=n=a,r=0,s=i.length;r<s;r++){var l=i[r];l[Ha](e)&&(l.cancel(),l(e))}},e.take=function(e,n){var o;void 0===n&&(n=ro),t?e(lo):(e[Ha]=n,i(),a.push(e),e.cancel=(o=!1,function(){o||(o=!0,i(),mi(a,e))}))},e.close=o,e),s=r.put;return r.put=function(e){e[Ja]?s(e):Xi((function(){s(e)}))},r}function yo(e,t){var n=e[Wa];ii(n)&&(t.cancel=n),e.then(t,(function(e){t(e,!0)}))}var fo,po=0,go=function(){return++po};function So(e){e.isRunning()&&e.cancel()}var vo=((fo={}).TAKE=function(e,t,n){var a=t.channel,i=void 0===a?e.channel:a,o=t.pattern,r=t.maybe,s=function(e){e instanceof Error?n(e,!0):!co(e)||r?n(e):n(Za)};try{i.take(s,ai(o)?so(o):null)}catch(e){return void n(e,!0)}n.cancel=s.cancel},fo.PUT=function(e,t,n){var a=t.channel,i=t.action,o=t.resolve;Xi((function(){var t;try{t=(a?a.put:e.dispatch)(i)}catch(e){return void n(e,!0)}o&&si(t)?yo(t,n):n(t)}))},fo.ALL=function(e,t,n,a){var i=a.digestEffect,o=po,r=Object.keys(t);if(0!==r.length){var s=Li(t,n);r.forEach((function(e){i(t[e],o,s[e],e)}))}else n(ri(t)?[]:{})},fo.RACE=function(e,t,n,a){var i=a.digestEffect,o=po,r=Object.keys(t),s=ri(t)?ki(r.length):{},l={},c=!1;r.forEach((function(e){var t=function(t,a){c||(a||_i(t)?(n.cancel(),n(t,a)):(n.cancel(),c=!0,s[e]=t,n(s)))};t.cancel=Si,l[e]=t})),n.cancel=function(){c||(c=!0,r.forEach((function(e){return l[e].cancel()})))},r.forEach((function(e){c||i(t[e],o,l[e],e)}))},fo.CALL=function(e,t,n,a){var i=t.context,o=t.fn,r=t.args,s=a.task;try{var l=o.apply(i,r);if(si(l))return void yo(l,n);if(li(l))return void Po(e,l,s.context,po,wi(o),!1,n);n(l)}catch(e){n(e,!0)}},fo.CPS=function(e,t,n){var a=t.context,i=t.fn,o=t.args;try{var r=function(e,t){ni(e)?n(t):n(e,!0)};i.apply(a,o.concat(r)),r.cancel&&(n.cancel=r.cancel)}catch(e){n(e,!0)}},fo.FORK=function(e,t,n,a){var i=t.context,o=t.fn,r=t.args,s=t.detached,l=a.task,c=function(e){var t=e.context,n=e.fn,a=e.args;try{var i=n.apply(t,a);if(li(i))return i;var o=!1;return Ti((function(e){return o?{value:e,done:!0}:(o=!0,{value:i,done:!si(i)})}))}catch(e){return Ti((function(){throw e}))}}({context:i,fn:o,args:r}),d=function(e,t){return e.isSagaIterator?{name:e.meta.name}:wi(t)}(c,o);Qi((function(){var t=Po(e,c,l.context,po,d,s,void 0);s?n(t):t.isRunning()?(l.queue.addTask(t),n(t)):t.isAborted()?l.queue.abort(t.error()):n(t)}))},fo.JOIN=function(e,t,n,a){var i=a.task,o=function(e,t){if(e.isRunning()){var n={task:i,cb:t};t.cancel=function(){e.isRunning()&&mi(e.joiners,n)},e.joiners.push(n)}else e.isAborted()?t(e.error(),!0):t(e.result())};if(ri(t)){if(0===t.length)return void n([]);var r=Li(t,n);t.forEach((function(e,t){o(e,r[t])}))}else o(t,n)},fo.CANCEL=function(e,t,n,a){var i=a.task;t===Ya?So(i):ri(t)?t.forEach(So):So(t),n()},fo.SELECT=function(e,t,n){var a=t.selector,i=t.args;try{n(a.apply(void 0,[e.getState()].concat(i)))}catch(e){n(e,!0)}},fo.ACTION_CHANNEL=function(e,t,n){var a=t.pattern,i=function(e){void 0===e&&(e=Ui());var t=!1,n=[];return{take:function(a){t&&e.isEmpty()?a(lo):e.isEmpty()?(n.push(a),a.cancel=function(){mi(n,a)}):a(e.take())},put:function(a){if(!t){if(0===n.length)return e.put(a);n.shift()(a)}},flush:function(n){t&&e.isEmpty()?n(lo):n(e.flush())},close:function(){if(!t){t=!0;var e=n;n=[];for(var a=0,i=e.length;a<i;a++)(0,e[a])(lo)}}}}(t.buffer),o=so(a),r=function t(n){co(n)||e.channel.take(t,o),i.put(n)},s=i.close;i.close=function(){r.cancel(),s()},e.channel.take(r,o),n(i)},fo.CANCELLED=function(e,t,n,a){n(a.task.isCancelled())},fo.FLUSH=function(e,t,n){t.flush(n)},fo.GET_CONTEXT=function(e,t,n,a){n(a.task.context[t])},fo.SET_CONTEXT=function(e,t,n,a){var i=a.task;hi(i.context,t),n()},fo);function ho(e,t){return e+"?"+t}function mo(e){var t=e.name,n=e.location;return n?t+"  "+ho(n.fileName,n.lineNumber):t}function bo(e){var t,n,a,i=(t=function(e){return e.cancelledTasks},n=e,(a=[]).concat.apply(a,n.map(t)));return i.length?["Tasks cancelled due to error:"].concat(i).join("\n"):""}var Ao=null,To=[],Eo=function(e){e.crashedEffect=Ao,To.push(e)},ko=function(){Ao=null,To.length=0},Io=function(){var e,t,n=To[0],a=To.slice(1),i=n.crashedEffect?(e=n.crashedEffect,(t=Di(e))?t.code+"  "+ho(t.fileName,t.lineNumber):""):null;return["The above error occurred in task "+mo(n.meta)+(i?" \n when executing effect "+i:"")].concat(a.map((function(e){return"    created by "+mo(e.meta)})),[bo(To)]).join("\n")};function Oo(e,t,n,a,i,o,r){var s;void 0===r&&(r=Si);var l,c,d=0,u=null,y=[],f=Object.create(n),p=function(e,t,n){var a,i=[],o=!1;function r(e){y.push.apply(y,p.getTasks().map((function(e){return e.meta.name}))),l(),n(e,!0)}function s(t){i.push(t),t.cont=function(s,l){o||(mi(i,t),t.cont=Si,l?r(s):(t===e&&(a=s),i.length||(o=!0,n(a))))}}function l(){o||(o=!0,i.forEach((function(e){e.cont=Si,e.cancel()})),i=[])}return s(e),{addTask:s,cancelAll:l,abort:r,getTasks:function(){return i}}}(t,0,g);function g(t,n){if(n){if(d=2,Eo({meta:i,cancelledTasks:y}),S.isRoot){var a=Io();ko(),e.onError(t,{sagaStack:a})}c=t,u&&u.reject(t)}else t===Qa?d=1:1!==d&&(d=3),l=t,u&&u.resolve(t);S.cont(t,n),S.joiners.forEach((function(e){e.cb(t,n)})),S.joiners=null}var S=((s={})[Xa]=!0,s.id=a,s.meta=i,s.isRoot=o,s.context=f,s.joiners=[],s.queue=p,s.cancel=function(){0===d&&(d=1,p.cancelAll(),g(Qa,!1))},s.cont=r,s.end=g,s.setContext=function(e){hi(f,e)},s.toPromise=function(){return u||(u=Hi(),2===d?u.reject(c):0!==d&&u.resolve(l)),u.promise},s.isRunning=function(){return 0===d},s.isCancelled=function(){return 1===d||0===d&&1===t.status},s.isAborted=function(){return 2===d},s.result=function(){return l},s.error=function(){return c},s);return S}function Po(e,t,n,a,i,o,r){var s=e.finalizeRunEffect((function(t,n,a){si(t)?yo(t,a):li(t)?Po(e,t,c.context,n,i,!1,a):t&&t[Ka]?(0,vo[t.type])(e,t.payload,a,d):a(t)}));u.cancel=Si;var l={meta:i,cancel:function(){0===l.status&&(l.status=1,u(Qa))},status:0},c=Oo(e,l,n,a,i,o,r),d={task:c,digestEffect:y};return r&&(r.cancel=c.cancel),u(),c;function u(e,n){try{var i;n?(i=t.throw(e),ko()):Pi(e)?(l.status=1,u.cancel(),i=ii(t.return)?t.return(Qa):{done:!0,value:Qa}):i=Oi(e)?ii(t.return)?t.return():{done:!0}:t.next(e),i.done?(1!==l.status&&(l.status=3),l.cont(i.value)):y(i.value,a,u)}catch(e){if(1===l.status)throw e;l.status=2,l.cont(e,!0)}}function y(t,n,a,i){void 0===i&&(i="");var o,r=go();function l(n,i){o||(o=!0,a.cancel=Si,e.sagaMonitor&&(i?e.sagaMonitor.effectRejected(r,n):e.sagaMonitor.effectResolved(r,n)),i&&function(e){Ao=e}(t),a(n,i))}e.sagaMonitor&&e.sagaMonitor.effectTriggered({effectId:r,parentEffectId:n,label:i,effect:t}),l.cancel=Si,a.cancel=function(){o||(o=!0,l.cancel(),l.cancel=Si,e.sagaMonitor&&e.sagaMonitor.effectCancelled(r))},s(t,r,l)}}function _o(e,t){for(var n=e.channel,a=void 0===n?uo():n,i=e.dispatch,o=e.getState,r=e.context,s=void 0===r?{}:r,l=e.sagaMonitor,c=e.effectMiddlewares,d=e.onError,u=void 0===d?Ei:d,y=arguments.length,f=new Array(y>2?y-2:0),p=2;p<y;p++)f[p-2]=arguments[p];var g,S=t.apply(void 0,f),v=go();if(l&&(l.rootSagaStarted=l.rootSagaStarted||Si,l.effectTriggered=l.effectTriggered||Si,l.effectResolved=l.effectResolved||Si,l.effectRejected=l.effectRejected||Si,l.effectCancelled=l.effectCancelled||Si,l.actionDispatched=l.actionDispatched||Si,l.rootSagaStarted({effectId:v,saga:t,args:f})),c){var h=He.apply(void 0,c);g=function(e){return function(t,n,a){return h((function(t){return e(t,n,a)}))(t)}}}else g=vi;var m={channel:a,dispatch:Ii(i),getState:o,sagaMonitor:l,onError:u,finalizeRunEffect:g};return Qi((function(){var e=Po(m,S,s,v,wi(t),!0,void 0);return l&&l.effectResolved(v,e),e}))}const Lo=function(e){var t,n=void 0===e?{}:e,a=n.context,i=void 0===a?{}:a,o=n.channel,r=void 0===o?uo():o,s=n.sagaMonitor,l=ti(n,["context","channel","sagaMonitor"]);function c(e){var n=e.getState,a=e.dispatch;return t=_o.bind(null,G({},l,{context:i,channel:r,dispatch:a,getState:n,sagaMonitor:s})),function(e){return function(t){s&&s.actionDispatched&&s.actionDispatched(t);var n=e(t);return r.put(t),n}}}return c.run=function(){return t.apply(void 0,arguments)},c.setContext=function(e){hi(i,e)},c};var wo=function(e){return{done:!0,value:e}},Do={};function Uo(e){return di(e)?"channel":ui(e)?String(e):ii(e)?e.name:String(e)}function Ro(e,t,n){var a,i,o,r=t;function s(t,n){if(r===Do)return wo(t);if(n&&!i)throw r=Do,n;a&&a(t);var s=n?e[i](n):e[r]();return r=s.nextState,o=s.effect,a=s.stateUpdater,i=s.errorState,r===Do?wo(t):o}return Ti(s,(function(e){return s(null,e)}),n)}function Co(e,t){for(var n=arguments.length,a=new Array(n>2?n-2:0),i=2;i<n;i++)a[i-2]=arguments[i];var o,r={done:!1,value:Gi(e)},s=function(e){return{done:!1,value:Bi.apply(void 0,[t].concat(a,[e]))}},l=function(e){return o=e};return Ro({q1:function(){return{nextState:"q2",effect:r,stateUpdater:l}},q2:function(){return{nextState:"q1",effect:s(o)}}},"q1","takeEvery("+Uo(e)+", "+t.name+")")}function No(e,t){for(var n=arguments.length,a=new Array(n>2?n-2:0),i=2;i<n;i++)a[i-2]=arguments[i];var o,r,s={done:!1,value:Gi(e)},l=function(e){return{done:!1,value:Bi.apply(void 0,[t].concat(a,[e]))}},c=function(e){return{done:!1,value:Wi(e)}},d=function(e){return o=e},u=function(e){return r=e};return Ro({q1:function(){return{nextState:"q2",effect:s,stateUpdater:u}},q2:function(){return o?{nextState:"q3",effect:c(o)}:{nextState:"q1",effect:l(r),stateUpdater:d}},q3:function(){return{nextState:"q1",effect:l(r),stateUpdater:d}}},"q1","takeLatest("+Uo(e)+", "+t.name+")")}function Mo(e,t){for(var n=arguments.length,a=new Array(n>2?n-2:0),i=2;i<n;i++)a[i-2]=arguments[i];var o,r={done:!1,value:Gi(e)},s=function(e){return{done:!1,value:ji.apply(void 0,[t].concat(a,[e]))}},l=function(e){return o=e};return Ro({q1:function(){return{nextState:"q2",effect:r,stateUpdater:l}},q2:function(){return{nextState:"q1",effect:s(o)}}},"q1","takeLeading("+Uo(e)+", "+t.name+")")}function Fo(e,t,n){for(var a=e,i=arguments.length,o=new Array(i>3?i-3:0),r=3;r<i;r++)o[r-3]=arguments[r];var s={done:!1,value:ji.apply(void 0,[n].concat(o))},l={done:!1,value:Ki(t)};return Ro({q1:function(){return{nextState:"q2",effect:s,errorState:"q10"}},q2:function(){return{nextState:Do}},q10:function(e){if((a-=1)<=0)throw e;return{nextState:"q1",effect:l}}},"q1","retry("+n.name+")")}function Go(e,t){for(var n=arguments.length,a=new Array(n>2?n-2:0),i=2;i<n;i++)a[i-2]=arguments[i];return Bi.apply(void 0,[Co,e,t].concat(a))}function $o(e,t){for(var n=arguments.length,a=new Array(n>2?n-2:0),i=2;i<n;i++)a[i-2]=arguments[i];return Bi.apply(void 0,[No,e,t].concat(a))}function xo(e,t){for(var n=arguments.length,a=new Array(n>2?n-2:0),i=2;i<n;i++)a[i-2]=arguments[i];return Bi.apply(void 0,[Mo,e,t].concat(a))}class Vo{constructor(){this.context=null,this.accessToken=null,this.user=null,this.requestSource=null,this.onRedirectTo=e=>window.location.href=e,this.logout=()=>window.location.href="/account/logout",this.entitlementsOptions=null,this.appName=null,this.sessionContext=void 0}static getInstance(){return Vo.instance||(Vo.instance=new Vo),Vo.instance}static setContext(e){Vo.getInstance().context=e}static setAccessToken(e){Vo.getInstance().accessToken=e}static setUser(e){Vo.getInstance().user=e}static setRequestSource(e){Vo.getInstance().requestSource=e}static setOnRedirectTo(e){Vo.getInstance().onRedirectTo=e}static setLogout(e,t){Vo.getInstance().logout=n=>{n?e(n):Vo.onRedirectTo(t)}}static setEntitlementsOptions(e){Vo.getInstance().entitlementsOptions=e}static setSessionContext(e){Vo.getInstance().sessionContext=e}static setAppName(e){Vo.getInstance().appName=e}static getContext(){var e;return null!=(e=Vo.getInstance().context)?e:{baseUrl:window.location.href,tokenResolver:()=>"my-authentication-token",logLevel:"error"}}static getAccessToken(){return Vo.getInstance().accessToken}static getRequestSource(){return Vo.getInstance().requestSource}static getUser(){return Vo.getInstance().user}static onRedirectTo(e,t){return Vo.getInstance().onRedirectTo(e,t)}static logout(e){return Vo.getInstance().logout(e)}static shouldLoadEntitlements(){var e;return(null==(e=Vo.getInstance().entitlementsOptions)?void 0:e.enabled)||!1}static isSessionPerTenantEnabled(){var e;return(null==(e=Vo.getInstance().sessionContext)?void 0:e.enableSessionPerTenant)||!1}static getAppName(){return Vo.getInstance().appName}}Vo.instance=void 0;const jo={getContext:()=>Vo.getContext(),getAccessToken:()=>Vo.getAccessToken(),getUser:()=>Vo.getUser(),onRedirectTo:(e,t)=>Vo.onRedirectTo(e,t),logout:e=>Vo.logout(e)};class Bo extends Error{constructor(e,t){super(e),this._statusCode=void 0,this._statusCode=t}get statusCode(){return this._statusCode}}const Wo={v1:"/identity/resources/users/webauthn/v1/devices"},zo={v1:"/identity/resources/auth/v1",v2:"/identity/resources/auth/v2"},Ko={v1:"/identity/resources/users/v1",v2:"/identity/resources/users/v2",v3:"/identity/resources/users/v3",roles:{v3:"/identity/resources/users/v3/roles"},groups:{v3:"/identity/resources/users/v3/groups"},tenants:{me:{v1:"/identity/resources/users/v1/me/tenants",v3:"/identity/resources/users/v3/me/tenants"}},apiTokens:{v1:"/identity/resources/users/api-tokens/v1"},accessTokens:{v1:"/identity/resources/users/access-tokens/v1"},sessions:{v1:"/identity/resources/users/sessions/v1",currentUser:{v1:"/identity/resources/users/sessions/v1/me"},configurations:{v1:"/identity/resources/configurations/sessions/v1"}},invitation:{resendAll:{v1:"/identity/resources/users/v1/invitation/reset/all"}},passwords:{resetBreachedPasswords:{v1:"/identity/resources/users/v1/passwords/breached/reset/bulk"}},authorization:{v1:"/identity/resources/users/v1/me/authorization"},temporary:{v1:"/identity/resources/users/temporary/v1",configuration:{v1:"/identity/resources/users/temporary/v1/configuration"}}},Ho={v1:"/identity/resources/configurations/v1"},qo={emailDomain:{v1:"/identity/resources/configurations/restrictions/v1/email-domain"},ip:{v1:"/identity/resources/configurations/v1/restrictions/ip"}},Jo={v1:"/identity/resources/sso/v1",v2:"/identity/resources/sso/v2",custom:{v1:"/identity/resources/sso/custom/v1"}},Yo={v1:"/identity/resources/permissions/v1"},Xo={apiTokens:{v1:"/identity/resources/tenants/api-tokens/v1",v2:"/identity/resources/tenants/api-tokens/v2"},accessTokens:{v1:"/identity/resources/tenants/access-tokens/v1"},invites:{user:{v1:"/identity/resources/tenants/invites/v1/user"},verify:{v1:"/identity/resources/tenants/invites/v1/verify"},configuration:{v1:"/identity/resources/tenants/invites/v1/configuration"}},users:{v1:"/identity/resources/tenants/users/v1"}},Qo={v1:"/identity/resources/roles/v1",v2:"/identity/resources/roles/v2"},Zo={v1:"/identity/resources/sub-tenants/users/v1",v2:"/identity/resources/sub-tenants/users/v2"},er={v1:"/identity/resources/impersonation/v1"},tr={v1:"/identity/resources/groups/v1",configurations:{v1:"/identity/resources/groups/v1/config"},getByIds:{v1:"/identity/resources/groups/v1/bulkGet"}},nr={v1:"/identity/resources/users/phone-numbers/v1"},ar={v1:"/team/resources/sso/v1",v2:"/team/resources/sso/v2"},ir={v1:"/team/resources/members/v1"},or={v1:"/team/resources/roles/v1"},rr={v1:"/team/resources/stats/v1"},sr={v1:"/team/resources/profile"},lr={v1:"/tenants/resources/account-settings/v1"},cr={v1:"/tenants/resources/hierarchy/v1",tree:{v1:"/tenants/resources/hierarchy/v1/tree"},parents:{v1:"/tenants/resources/hierarchy/v1/parents"},v2:"/tenants/resources/hierarchy/v2",metadata:{v2:"/tenants/resources/hierarchy/v2/metadata"}},dr={v1:"/tenants/resources/sub-tenants/v1"},ur={v1:"/integrations/resources/configurations/v1",v2:"/integrations/resources/configurations/v2"},yr={subscriptions:{v1:"/subscriptions/resources/billing/subscriptions/v1"},plans:{v1:"/subscriptions/resources/billing/plans/v1"},invoices:{v1:"/subscriptions/resources/billing/invoices/v1"},paymentMethods:{v1:"/subscriptions/resources/billing/payment-methods/v1"},summaries:{v1:"/subscriptions/resources/billing/summaries/v1"},tenantConfiguration:{v1:"/subscriptions/resources/billing/tenant-configurations/v1"},configurations:{vendorPublicConfigurations:{v1:"/subscriptions/resources/billing/configurations/vendor-public-configurations/v1"}},paymentProviders:{stripe:{customers:{v1:"/subscriptions/resources/billing/payment-providers/stripe/customers/v1"},publicConfigurations:{v1:"/subscriptions/resources/billing/payment-providers/stripe/public-configurations/v1"},subscriptions:{v1:"/subscriptions/resources/billing/payment-providers/stripe/subscriptions/v1"},setupIntents:{v1:"/subscriptions/resources/billing/payment-providers/stripe/setup-intents/v1"}}}},fr={v1:"/subscriptions/resources/payment-providers/v1"},pr={v1:"/subscriptions/resources/subscriptions/v1"},gr={v1:"/reports/resources/reports/v1",v2:"/reports/resources/reports/v2"},Sr={v1:"/reports/engine/resources/triggers/v1"},vr="/notification",hr="/audits",mr={v1:"/event/resources/configurations/v1"},br="/webhook",Ar="/oauth",Tr="/flags",Er="/directory/resources/v1/configurations/scim2",kr="/directory/resources/scim/temp",Ir="/entitlements/api/v1/user-entitlements",Or="/entitlements/api/v2/user-entitlements",Pr={v1:"/security-center/resources/recommendations/v1"},_r={v1:"/security-center/resources/insights/v1"};function Lr(e,t,n=!0){let a;a="function"==typeof e.baseUrl?e.baseUrl(t):e.baseUrl;const i=e.urlPrefix||"frontegg",o="frontegg"===i&&!n;return a.endsWith("/")||(a+="/"),a.endsWith(i)||o||(a+=i),a}function wr(e){var t,n;const a={};return null!=e&&null!=(t=e.metadataHeaders)&&t.fronteggSdkVersion&&(a[ca.fronteggSdkVersion]=e.metadataHeaders.fronteggSdkVersion),null!=e&&null!=(n=e.metadataHeaders)&&n.framework&&(a[ca.frameWork]=e.metadataHeaders.framework),a}function Dr(){return new URLSearchParams(window.location.search).get("tenantId")||null}const Ur=async e=>{var t,n,a;const i=Vo.getContext(),o=await async function(e,t){var n;const a=wr(e),i=await(null!=(n=null==e?void 0:e.tokenResolver)?n:Vo.getAccessToken)(),o=Vo.getRequestSource(),r=Dr();t&&(a[ca.contentType]=t),o&&(a[ca.source]=o),i&&(a.Authorization=`Bearer ${i}`),r&&(a[ca.scopedTenant]=r);for(const t of await async function(e){let t=[];if(e.additionalHeadersResolver&&(t=await e.additionalHeadersResolver()),e.tenantResolver){const n=await e.tenantResolver();null!=n&&n.tenant&&t.push({key:"frontegg-login-alias",value:n.tenant})}return t}(e))a[`${t.key}`]=`${t.value}`;return a}(i,e.contentType),r=await async function(e,t,n){const a=Lr(e,t),i=await async function(e,t){t||(t={});const n=await async function(e){let t=[];return e.additionalQueryParamsResolver&&(t=await e.additionalQueryParamsResolver()),t}(e);for(const e of n)t[e.key]=e.value;const a=Object.keys(t);for(const e of a){const n=t[e];t[e]="object"==typeof n?JSON.stringify(n):n}return t}(e,n);let o=t.startsWith("http")?t:`${a}${t}`;const r=Object.keys(i).length>0;return i&&r&&(o+=`?${new URLSearchParams(i)}`),o}(i,e.url,e.params),s=await fetch(r,{body:e.body?"application/json"===e.contentType?JSON.stringify(e.body):e.body:null,method:null!=(t=e.method)?t:"GET",headers:G({},o,e.headers),credentials:null!=(n=null!=(a=e.credentials)?a:i.requestCredentials)?n:"same-origin"});if(302===s.status)return window.location.href=await s.text(),new Promise((()=>{}));if(!s.ok){var l,c;if(413===s.status)throw new Bo("Error request is too large",s.status);let e,t=!0;try{e=await s.text(),e=JSON.parse(e)}catch(e){t=!1}throw e.errors?e=e.errors.join(", "):"string"!=typeof e&&(e=`Error ${s.status} - ${s.statusText}`),s.status>=400&&s.status<500&&["warn"].includes(null!=(l=i.logLevel)?l:"")?console.warn(e):500===s.status&&["warn","error"].includes(null!=(c=i.logLevel)?c:"")&&console.error(e),new Bo(t?e:"We're facing some difficulties, Please try again",s.status)}if(e.responseType&&"json"!==e.responseType){if("blob"===e.responseType){const{outputFileName:t}=e.params;return await s.blob().then((e=>URL.createObjectURL(e))).then((e=>{const n=document.createElement("a");n.href=e,n.setAttribute("download",t||"output"),n.click()}))}return await s.text()}try{return await s.json()}catch(e){return{}}},Rr=async(e,t,n)=>Ur(G({url:e,method:"GET",contentType:"application/json",params:t},n)),Cr=async(e,t,n)=>Ur(G({url:e,method:"POST",contentType:"application/json",body:t},n)),Nr=async(e,t,n)=>Ur(G({url:e,method:"PATCH",contentType:"application/json",body:t},n)),Mr=async(e,t,n)=>Ur(G({url:e,method:"PUT",contentType:"application/json",body:t},n)),Fr=async(e,t,n)=>Ur(G({url:e,method:"DELETE",contentType:"application/json",body:t},n)),Gr=async(e,t,n,a)=>Ur(G({url:e,method:"POST",contentType:"application/json",responseType:"blob",body:t,params:n},a)),$r=(e={})=>G({},e.jwt?{Authorization:e.jwt}:{}),xr="FRONTEGG_SEPARATE_TABS_BY_TENANT",Vr="admin_portal_use_entitlements_v2_endpoint",jr={flags:{}};class Br{constructor(){var e;this._flags={},this._flags=null!=(e=jr.flags)?e:{}}static getInstance(e="default"){return this._instances[e]}static set(e,t="default"){const n=new Br;return n.set(e),Br._instances[t]=n,n}static getFeatureFlags(e,t){const n=this.getInstance(t);return e.map((e=>"on"===(null==n?void 0:n._flags[e])))}get flags(){var e;return null!=(e=this.flags)?e:{}}set(e){var t;this._flags=G({},null!=(t=null==jr?void 0:jr.flags)?t:{},null!=e?e:{})}}async function Wr(){return Rr(Tr)}async function zr(e){return Cr(`${Ko.v3}/me/token`,e)}async function Kr(e,t){return Rr(Ko.v2,e,{headers:$r(t)})}async function Hr(e,t){return Rr(Ko.v3,e,{headers:$r(t)})}async function qr(e,t){return Rr(Ko.roles.v3,G({},e,{ids:e.ids.join(",")}),{headers:$r(t)})}async function Jr(e,t){return Rr(Ko.groups.v3,G({},e,{ids:e.ids.join(",")}),{headers:$r(t)})}async function Yr(e){return Rr(Ko.tenants.me.v3,void 0,{headers:$r(e)})}async function Xr(e){return Rr(Ko.tenants.me.v1,void 0,{headers:$r(e)})}async function Qr(){return Cr(Ko.passwords.resetBreachedPasswords.v1)}async function Zr(e){return Mr(`${Ko.v2}/me`,e)}function es(e){e&&sessionStorage.setItem(xr,e)}function ts(){sessionStorage.removeItem(xr)}function ns(){return Vo.isSessionPerTenantEnabled()?sessionStorage.getItem(xr):null}function as(){const[e]=Br.getFeatureFlags(["admin_portal_use_current_user_tenants_v1_endpoint"],Vo.getAppName()||"");return Vo.isSessionPerTenantEnabled()||e?Xr:Yr}async function is(e){return Vo.isSessionPerTenantEnabled()&&es(e.tenantId),Mr(`${Ko.v1}/tenant`,e)}async function os(){return Rr(`${Ko.v2}/me/tenants`)}async function rs(e){return Rr(cr.v1,void 0,{headers:$r(e)})}async function ss(e){return Rr(cr.tree.v1,void 0,{headers:$r(e)})}async function ls(e){return Rr(cr.parents.v1,void 0,{headers:$r(e)})}async function cs(e,t){return Rr(`${cr.parents.v1}/${e}`,void 0,{headers:$r(t)})}async function ds(e,t){return Cr(`${Xo.users.v1}/count`,e,{headers:$r(t)})}async function us(e,t){return Rr(cr.v2,e,{headers:$r(t)})}async function ys(e,t){return Rr(cr.metadata.v2,G({},e,{_tenantIds:e._tenantIds.join(",")}),{headers:$r(t)})}async function fs(){return Rr(Ho.v1)}async function ps(){return Rr(`${Ho.v1}/mfa-policy`)}async function gs(){return Rr(`${Ho.v1}/mfa-policy/vendor`)}async function Ss(e){return e.id?Nr(`${Ho.v1}/mfa-policy`,e):Cr(`${Ho.v1}/mfa-policy`,e)}async function vs(){return Rr(`${Ho.v1}/lockout-policy`)}async function hs(){return Rr(`${Ho.v1}/lockout-policy/vendor`)}async function ms(e){return e.id?Nr(`${Ho.v1}/lockout-policy`,e):Cr(`${Ho.v1}/lockout-policy`,e)}async function bs(){try{return await Rr(`${Ho.v1}/captcha-policy/public`)}catch{return null}}async function As(){return Rr(`${Ho.v1}/password-history-policy`)}async function Ts(){return Rr(`${Ho.v1}/password-history-policy/vendor`)}async function Es(e){return e.id?Nr(`${Ho.v1}/password-history-policy`,e):Cr(`${Ho.v1}/password-history-policy`,e)}async function ks(){return Rr(`${Ho.v1}/password`)}async function Is(){return Rr(`${qo.emailDomain.v1}`)}async function Os(){return Rr(`${qo.emailDomain.v1}/config`)}async function Ps(e){return Cr(`${qo.emailDomain.v1}`,e)}async function _s(e){return Cr(`${qo.emailDomain.v1}/config`,e)}async function Ls(e){return Fr(`${qo.emailDomain.v1}/${e}`)}async function ws(e){return Rr(`${qo.ip.v1}`,e)}async function Ds(){return Rr(`${qo.ip.v1}/config`)}async function Us(e){return Cr(`${qo.ip.v1}`,e)}async function Rs(e){return Cr(`${qo.ip.v1}/bulk`,e)}async function Cs(e){return Cr(`${qo.ip.v1}/config`,e)}async function Ns(e){return Fr(`${qo.ip.v1}/${e}`)}async function Ms(){return Cr(`${qo.ip.v1}/verify`)}async function Fs(){return Cr(`${qo.ip.v1}/verify/allow`)}Br._instances={};class Gs extends Error{constructor(e){super(e)}}const $s="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(e){const t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new Gs("'atob' failed: The string to be decoded is not correctly encoded.");let n="";for(let e,a,i=0,o=0;a=t.charAt(o++);~a&&(e=i%4?64*e+a:a,i++%4)?n+=String.fromCharCode(255&e>>(-2*i&6)):0)a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a);return n};class xs extends Error{constructor(e){super(e)}}const Vs=(e,t={})=>{const n=t.header?0:1;try{return JSON.parse((e=>{let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("Illegal base64url string!")}try{return function(e){return decodeURIComponent($s(e).replace(/(.)/g,((e,t)=>{let n=t.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n})))}(t)}catch(e){return $s(t)}})(e.split(".")[n]))}catch(e){throw new xs("Invalid token specified: "+e.message)}};let js,Bs,Ws;!function(e){e.WebAuthnPlatform="WebAuthnPlatform",e.WebAuthnCrossPlatform="WebAuthnCrossPlatform",e.SmsCode="SmsCode",e.SmsCodeV2="SmsCodeV2",e.Passkeys="Passkeys"}(js||(js={})),function(e){e.Platform="Platform",e.CrossPlatform="CrossPlatform"}(Bs||(Bs={})),function(e){e.AuthenticatorApp="AuthenticatorApp",e.WebAuthnPlatform="WebAuthnPlatform",e.WebAuthnCrossPlatform="WebAuthnCrossPlatform",e.SMS="SMS",e.EmailCode="EmailCode"}(Ws||(Ws={}));const zs="admin_portal_should_load_authorization";async function Ks(){return Rr(Ir)}async function Hs(){return Rr(Or)}let qs;!function(e){e.MISSING_PERMISSION="MISSING_PERMISSION",e.MISSING_FEATURE="MISSING_FEATURE",e.BUNDLE_EXPIRED="BUNDLE_EXPIRED"}(qs||(qs={}));const Js="admin_portal_entitlements",Ys=["type"],Xs=["type"],Qs=["type"];async function Zs(e){if(!e.accessToken)return e;Vo.setAccessToken(e.accessToken);const t=await Vd(),n=G({},e,e.accessToken?Vs(e.accessToken):{},t);return Vo.setUser(n),n}async function el(e){if(!e.accessToken)return{user:e};Vo.setAccessToken(e.accessToken);const[t,n]=await Promise.all([Vd(),os()]),a=G({},e,e.accessToken?Vs(e.accessToken):{},t);return Vo.setUser(a),{user:a,tenants:n}}function tl(){if(!Vo.shouldLoadEntitlements())return!1;const[e]=Br.getFeatureFlags([Js],Vo.getAppName()||"");return e}function nl(){const[e]=Br.getFeatureFlags([zs],Vo.getAppName()||"");return e}async function al(e){const{accessToken:t}=e;if(!t)return{user:e};Vo.setAccessToken(t);const[n,a]=await Promise.all([Vd(),as()()]),i=G({},e,t?Vs(t):{},n);return Vo.isSessionPerTenantEnabled()&&es(i.tenantId),Vo.setUser(i),{user:i,tenants:a.tenants,activeTenant:a.activeTenant}}async function il(e){Vo.setAccessToken(e.id_token);const t=await Vd(),n=e.id_token?Vs(e.id_token):{},a=G({mfaRequired:!1,accessToken:e.id_token,refreshToken:e.refresh_token},n,t,{expiresIn:e.expires_in||300});return Vo.setUser(a),a}async function ol(e){Vo.setAccessToken(e.id_token);const[t,n]=await Promise.all([Vd(),as()()]),a=e.id_token?Vs(e.id_token):{},i=G({mfaRequired:!1,accessToken:e.id_token,refreshToken:e.refresh_token},a,t,{expiresIn:e.expires_in||300});return Vo.isSessionPerTenantEnabled()&&es(i.tenantId),Vo.setUser(i),{user:i,tenants:n.tenants,activeTenant:n.activeTenant}}async function rl(e){try{const{address:t}=await Cr(`${zo.v1}/user/saml/prelogin`,e);return t}catch{return null}}async function sl(e){return Cr(`${zo.v1}/user/saml/prelogin`,e)}async function ll(e){return Zs(await Cr(`${zo.v1}/user/saml/postlogin`,e))}async function cl(e){return Zs(await Cr(`${zo.v1}/user/oidc/postlogin`,e))}async function dl(e){return Zs(await Cr(`${zo.v1}/user`,e))}async function ul(e){return al(await Cr(`${zo.v1}/user`,e))}async function yl(e){return Zs(await Cr(`${zo.v1}/user/mfa/verify`,e))}async function fl(e){return al(await Cr(`${zo.v1}/user/mfa/verify`,e))}async function pl(e){return Cr(`${Ko.v1}/activate`,e)}async function gl(e){return al(await Cr(`${Ko.v1}/activate`,e))}async function Sl(e){return Rr(`${Ko.v1}/activate/strategy`,e)}async function vl(e){return Cr(`${Ko.v1}/activate/reset`,e)}async function hl(e){return Cr(`${Ko.v1}/invitation/reset`,e)}async function ml(e){return Cr(`${Ko.v1}/invitation/accept`,e)}async function bl(){const e=ns();return Zs(await Cr(`${zo.v1}/user/token/refresh`,{tenantId:e}))}async function Al(){const e=ns();return el(await Cr(`${zo.v1}/user/token/refresh`,{tenantId:e}))}async function Tl(){const e=ns();return al(await Cr(`${zo.v1}/user/token/refresh`,{tenantId:e}))}async function El(){return Cr(`${zo.v1}/logout`)}async function kl(e){return Rr(`${Ar}/logout`,e)}async function Il(e){return Cr(`${Ko.v1}/passwords/reset`,e)}async function Ol(e){return Cr(`${Ko.v1}/passwords/reset/verify`,e)}async function Pl(e){return Rr(`${Ko.v1}/passwords/config`,e)}async function _l(e){return Cr(`${zo.v1}/user/mfa/recover`,e)}async function Ll(){return Cr(`${Ko.v1}/mfa/enroll`)}async function wl(){return Cr(`${Ko.v1}/mfa/authenticator/enroll`)}async function Dl(e){return Cr(`${Ko.v1}/mfa/authenticator/enroll/verify`,e)}async function Ul(e){return Cr(`${Ko.v1}/mfa/sms/enroll`,e)}async function Rl(e){return Cr(`${Ko.v1}/mfa/sms/enroll/verify`,e)}async function Cl(){return Cr(`${Ko.v1}/mfa/webauthn/enroll`)}async function Nl(e){return Cr(`${Ko.v1}/mfa/webauthn/enroll/verify`,e)}async function Ml(e){return Cr(`${Ko.v1}/mfa/enroll/verify`,e)}async function Fl(e){return Cr(`${Ko.v1}/mfa/disable`,e)}async function Gl(e,t){return Cr(`${Ko.v1}/mfa/authenticator/${e}/disable/verify`,t)}async function $l(e){return Cr(`${Ko.v1}/mfa/sms/${e}/disable`)}async function xl(e,t){return Cr(`${Ko.v1}/mfa/sms/${e}/disable/verify`,t)}async function Vl(e){return Cr(`${Ko.v1}/mfa/webauthn/${e}/disable`)}async function jl(e,t){return Cr(`${Ko.v1}/mfa/webauthn/${e}/disable/verify`,t)}async function Bl(){return Rr(`${Ko.v1}/mfa/devices`)}async function Wl(e){return Cr(`${zo.v1}/user/mfa/authenticator/enroll`,e)}async function zl(e){return Cr(`${zo.v1}/user/mfa/authenticator/enroll/verify`,e)}async function Kl(e){return al(await Cr(`${zo.v1}/user/mfa/authenticator/enroll/verify`,e))}async function Hl(e,t){return Cr(`${zo.v1}/user/mfa/authenticator/${e}/verify`,t)}async function ql(e){return Cr(`${zo.v1}/user/mfa/emailcode`,e)}async function Jl(e){return Cr(`${zo.v1}/user/mfa/emailcode/verify`,e)}async function Yl(e){return al(await Cr(`${zo.v1}/user/mfa/emailcode/verify`,e))}async function Xl(e){return Cr(`${zo.v1}/user/mfa/sms/enroll`,e)}async function Ql(e){return Cr(`${zo.v1}/user/mfa/sms/enroll/verify`,e)}async function Zl(e){return al(await Cr(`${zo.v1}/user/mfa/sms/enroll/verify`,e))}async function ec(e,t){return Cr(`${zo.v1}/user/mfa/sms/${e}`,t)}async function tc(e,t){return Cr(`${zo.v1}/user/mfa/sms/${e}/verify`,t)}async function nc(e,t){return al(await Cr(`${zo.v1}/user/mfa/sms/${e}/verify`,t))}async function ac(e){return Cr(`${zo.v1}/user/mfa/webauthn/enroll`,e)}async function ic(e){return Cr(`${zo.v1}/user/mfa/webauthn/enroll/verify`,e)}async function oc(e){return al(await Cr(`${zo.v1}/user/mfa/webauthn/enroll/verify`,e))}async function rc(e,t){return Cr(`${zo.v1}/user/mfa/webauthn/${e}`,t)}async function sc(e,t){return Cr(`${zo.v1}/user/mfa/webauthn/${e}/verify`,t)}async function lc(e,t){return al(await Cr(`${zo.v1}/user/mfa/webauthn/${e}/verify`,t))}async function cc(){return Rr(`${ar.v1}/saml/configurations`)}async function dc(e){return Cr(`${ar.v1}/saml/configurations`,e)}async function uc(){return Rr(`${ar.v1}/saml/configurations/vendor-config`)}async function yc(e){return Mr(`${ar.v1}/saml/configurations/metadata`,e)}async function fc(){return Mr(`${ar.v1}/saml/validations/domain`)}async function pc(){return Rr(`${ar.v1}/saml/configurations/roles/default`)}async function gc(){return Rr(`${ar.v2}/saml/configurations/groups`)}async function Sc({roleIds:e}){return Cr(`${ar.v1}/saml/configurations/roles/default`,{roleIds:e})}async function vc({roleIds:e,group:t}){return Cr(`${ar.v2}/saml/configurations/groups`,{group:t,roleIds:e})}async function hc({roleIds:e,group:t,id:n}){return Nr(`${ar.v2}/saml/configurations/groups/${n}`,{group:t,roleIds:e})}async function mc({id:e}){return Fr(`${ar.v2}/saml/configurations/groups/${e}`)}async function bc(){return Rr(`${ar.v1}/oidc/configurations`)}async function Ac(){return Rr(`${ar.v2}/configurations/public`)}async function Tc(){return Rr(Jo.v1)}async function Ec(){return Rr(Jo.v2)}async function kc(){return Rr(`${Jo.v2}/authenticated`)}async function Ic(){return Rr(Jo.custom.v1)}async function Oc({provider:e,code:t,idToken:n,redirectUri:a,codeVerifier:i,metadata:o,invitationToken:r,state:s}){const l={};return t&&(l.code=t),n&&(l.id_token=n),a&&(l.redirectUri=a),i&&(l.code_verifier=i),s&&(l.state=s),Cr(`${zo.v1}/user/sso/${e}/postlogin`,{metadata:o,invitationToken:r},{params:l})}async function Pc(){return Rr(`${Ho.v1}/public`)}async function _c(e){const{shouldActivate:t,authResponse:n,userId:a,tenantId:i}=await Cr(`${Ko.v1}/signUp`,e),o={shouldActivate:t,userId:a,tenantId:i};if(!t&&n){const{user:e,tenants:t,activeTenant:a}=await al(n);return G({},o,{user:e,tenants:t,activeTenant:a})}return o}async function Lc(){return Rr(Ko.sessions.currentUser.v1)}async function wc(){return Rr(`${Ko.sessions.currentUser.v1}/current`)}async function Dc(e){return Cr(`${Ko.sessions.v1}/revoke`,{userId:e})}async function Uc(){return Rr(Ko.sessions.configurations.v1)}async function Rc(e){await Cr(Ko.sessions.configurations.v1,e)}async function Cc(e){await Fr(`${Ko.sessions.currentUser.v1}/${e}`)}async function Nc(){await Fr(`${Ko.sessions.currentUser.v1}/all`)}async function Mc(){return Rr(Ko.accessTokens.v1)}async function Fc(){return Rr(Xo.accessTokens.v1)}async function Gc({id:e}){return Fr(`${Xo.accessTokens.v1}/${e}`)}async function $c({id:e}){return Fr(`${Ko.accessTokens.v1}/${e}`)}async function xc(e){return Cr(Ko.accessTokens.v1,e)}async function Vc(e){return Cr(Xo.accessTokens.v1,e)}async function jc(){return Rr(Ko.apiTokens.v1)}async function Bc(){return Rr(Xo.apiTokens.v1)}async function Wc(e){return Cr(Ko.apiTokens.v1,e)}async function zc(e){return Cr(Xo.apiTokens.v2,e)}async function Kc({tokenId:e}){return Fr(`${Xo.apiTokens.v1}/${e}`)}async function Hc({tokenId:e}){return Fr(`${Ko.apiTokens.v1}/${e}`)}async function qc({userId:e}){return Rr(`${Ko.v1}/${e}`)}async function Jc(e){return Rr(`${Ho.v1}/mfa-policy/allow-remember-device`,{mfaToken:e})}async function Yc(e){let{type:t}=e,n=ti(e,Ys);return Cr(`${zo.v1}/passwordless/${t.toLocaleLowerCase()}/prelogin`,n)}async function Xc(e){let{type:t}=e,n=ti(e,Xs);return al(await Cr(`${zo.v1}/passwordless/${t.toLocaleLowerCase()}/postlogin`,n))}async function Qc(e){let{type:t}=e,n=ti(e,Qs);return Cr(`${zo.v1}/passwordless/${t.toLocaleLowerCase()}/postlogin`,n)}async function Zc({token:e}){return Cr(Xo.invites.verify.v1,{token:e})}async function ed(){return Rr(`${ar.v1}/configurations`)}async function td(e){return Cr(`${ar.v1}/configurations`,e)}async function nd(e,t){return Nr(`${ar.v1}/configurations/${e}`,t)}async function ad(e){return Fr(`${ar.v1}/configurations/${e}`)}async function id(e){return Cr(`${ar.v1}/configurations/metadata`,e)}async function od(e,t){return Mr(`${ar.v1}/configurations/${e}/metadata`,t)}async function rd(e){return Cr(`${ar.v1}/configurations/metadata-url`,e)}async function sd(e,t){return Mr(`${ar.v1}/configurations/${e}/metadata-url`,t)}async function ld(e,t){return Cr(`${ar.v1}/configurations/${e}/domains`,t)}async function cd(e,t){return Fr(`${ar.v1}/configurations/${e}/domains/${t}`)}async function dd(e,t){return Mr(`${ar.v1}/configurations/${e}/domains/${t}/validate`)}async function ud(e){return Rr(`${ar.v1}/configurations/${e}/roles`)}async function yd(e,t){return Mr(`${ar.v1}/configurations/${e}/roles`,t)}async function fd(e,t){return Cr(`${ar.v1}/configurations/${e}/groups`,t)}async function pd(e,{roleIds:t,group:n,id:a}){return Nr(`${ar.v1}/configurations/${e}/groups/${a}`,{group:n,roleIds:t})}async function gd(e,t){return Fr(`${ar.v1}/configurations/${e}/groups/${t}`)}async function Sd(e){return Rr(`${ar.v1}/configurations/${e}/groups`)}async function vd(e){return Cr(`${zo.v2}/user/sso/prelogin`,e)}async function hd(e){return Zs(await Cr(`${zo.v2}/user/oidc/postlogin`,e))}async function md(e){return ol(await Cr(`${Ar}/token`,e))}async function bd(){const e=ns();return ol(await Cr(`${Ar}/authorize/silent`,{tenantId:e}))}async function Ad(e){return il(await Cr(`${Ar}/token`,e))}async function Td(){const e=ns();return il(await Cr(`${Ar}/authorize/silent`,{tenantId:e}))}async function Ed(e){return Cr(`${Ko.v1}/phone/reset`,e)}async function kd(e){return Cr(`${Ko.v1}/phone/reset/verify`,e)}async function Id(e){return Cr(`${Ko.v1}/phone`,e)}async function Od(e){return Cr(`${Ko.v1}/phone/verify`,e)}async function Pd(e){return Mr(`${Ko.v1}/phone/change`,e)}async function _d(e){return Cr(`${zo.v1}/webauthn/prelogin`,e)}async function Ld(e){return Cr(`${zo.v1}/webauthn/postlogin`,e)}async function wd(e){return al(await Cr(`${zo.v1}/webauthn/postlogin`,e))}async function Dd(){return Cr(Wo.v1)}async function Ud(){return Rr(Wo.v1)}async function Rd(e){return Fr(`${Wo.v1}/${e}`)}async function Cd(e){return Cr(`${Wo.v1}/verify`,e)}async function Nd(){return Rr(`${Ho.v1}/auth/strategies/public`)}async function Md(){return Rr(`${Ho.v1}/auth/strategies`)}async function Fd(){return Rr(`${Ho.v1}/mfa/strategies`)}async function Gd(){return Rr(`${Ko.authorization.v1}`)}async function $d(){return Rr(`${Ko.v2}/me`)}const xd=async()=>{try{return await Hs()}catch(e){}};async function Vd(){const[e]=Br.getFeatureFlags([Vr],Vo.getAppName()||""),t=[{action:$d,shouldLoad:!0},{action:e?xd:Ks,shouldLoad:tl()},{action:Gd,shouldLoad:nl()}].map((e=>async function({shouldLoad:e,action:t}){if(e)return await t()}(e))),[n,a,i]=await Promise.all(t),o=ns();return o&&(n.tenantId=o),G({},n,null!=i?i:{},{entitlements:a})}async function jd(e){const t=await Cr(`${zo.v1}/user/step-up/generate`,e);return t.accessToken?al(t):t}async function Bd(e){return Rr(`${Ko.v2}/me`,null!=e?e:{addRoles:!0})}async function Wd(e){return Mr(`${Ko.v2}/me`,e)}async function zd(e){return Mr(`${sr.v1}/me/image/v1`,e,{responseType:"plain",contentType:void 0})}async function Kd(e){return Cr(`${Ko.v1}/passwords/change`,e)}async function Hd(e){var t,n,a,i,o,r;const s=(e.filter||[]).reduce(((e,t)=>G({},e,{[t.id]:t.value})),{}),l=null!=(t=e.sort)&&t.length?{sortBy:null!=(n=null==(a=e.sort)||null==(i=a[0])?void 0:i.id)?n:"name",sortDirection:null!=(o=e.sort)&&null!=(r=o[0])&&r.desc?"desc":"asc"}:null;return Rr(ir.v1,G({pageOffset:e.pageOffset,pageSize:e.pageSize},s,l))}async function qd(e){return Cr(Ko.v2,G({},e,{provider:"local"}))}async function Jd(e){return Fr(`${ir.v1}/${e.userId}`)}async function Yd(e){return Mr(ir.v1,e)}async function Xd(e){const{userId:t,expirationInSeconds:n}=e;return Mr(`${Ko.temporary.v1}/${t}`,{expirationInSeconds:n})}async function Qd(e){return Fr(`${Ko.temporary.v1}/${e}`)}async function Zd(){return Rr(Ko.temporary.configuration.v1)}async function eu(e){return Cr(Xo.invites.user.v1,G({},e))}async function tu(e){return Nr(Xo.invites.user.v1,G({},e))}async function nu(){return Fr(Xo.invites.user.v1)}async function au(){return Rr(Xo.invites.user.v1)}async function iu(){return Rr(Xo.invites.configuration.v1)}async function ou(){return Rr(or.v1)}async function ru(){return Rr(Yo.v1)}async function su(){return Rr(`${rr.v1}/members`)}async function lu(e){return Cr(`${ir.v1}/${e.userId}/resendActivationEmail`,{})}async function cu(e){return Cr(Ko.v2,G({},e,{provider:"local"}))}async function du(e){return Cr(Ko.invitation.resendAll.v1,G({},e))}async function uu(e){var t,n;const a=await Rr("/metadata",e);if(null!=a&&null!=(t=a.rows)&&t[0])return null==a||null==(n=a.rows)?void 0:n[0];throw new Error(`metadata not found: ${e.entityName}`)}async function yu(){return Rr("/metadata/admin-box")}async function fu(e){return Cr("/metadata/admin-box",e)}async function pu(){const e=await Rr("/metadata/ipme");if(e)return e;throw new Error("ip metadata not found")}const gu=async()=>uu({entityName:"notifications"}),Su=async()=>uu({entityName:"saml"}),vu=async()=>uu({entityName:"audits"}),hu=async e=>async function(e){const t=await Rr(`/metadata/ip/${e}`);if(t)return t;throw new Error("ip metadata not found")}(e),mu=["dataFilters"],bu=["templateId","dataFilters"],Au=["dataFilters"];async function Tu(e){return Rr(`${gr.v2}/tenant-reports`,e)}async function Eu(e){return Rr(`${gr.v2}/${e.id}/tenant-reports`)}async function ku(e){let{dataFilters:t}=e,n=ti(e,mu);return{html:await Rr(`${Sr.v1}/preview-report`,G({},n,{dataFilters:btoa(JSON.stringify(t||{})),responseType:"html"}),{responseType:"plain"})}}async function Iu(e){let{templateId:t,dataFilters:n}=e,a=ti(e,bu);return Cr(`${gr.v2}/${t}/tenant-reports`,G({},a,{dataFilters:btoa(JSON.stringify(n||{}))}))}async function Ou(e){let{dataFilters:t}=e,n=ti(e,Au);const a=await Rr(`${Sr.v1}/preview-report`,G({},n,{dataFilters:btoa(JSON.stringify(t||{}))}),{responseType:"blob"});let i="text/html",o="html";"pdf"===n.responseType?(i="application/pdf",o="pdf"):"image"===n.responseType&&(i="image/jpeg",o="jpg");const r=new Blob([a],{type:i}),s=URL.createObjectURL(r),l=document.createElement("a");l.href=s,l.setAttribute("download",`report_${n.name||""}.${o}`),l.click(),setTimeout(l.remove.bind(l))}async function Pu(e){return Cr(`${Sr.v1}/tenant-reports`,e)}async function _u(e){return Rr(vr,{params:e})}async function Lu(e){return Mr(`${vr}/status`,{params:e})}async function wu(e){const{notificationId:t,pinStatus:n}=e;return Mr(`${vr}/${n}`,{notificationId:t})}async function Du(){return Cr(`${vr}/status/mark-all-read`)}const Uu=["endpoint","headerProps"];async function Ru(e){return Rr(hr,e)}async function Cu(e){return Rr(`${hr}/stats`,e)}async function Nu(e){const{endpoint:t,headerProps:n}=e,a=ti(e,Uu);return Gr(`${hr}/export/${t}`,{properties:n},a)}const Mu=["eventKey"],Fu=["eventKey"],Gu=()=>Rr(`${ur.v1}/slack`),$u=()=>Rr(`${ur.v1}/slack/applications`),xu=()=>Rr(`${ur.v1}/slack/channels`),Vu=e=>e.id?Nr(`${ur.v1}/slack/subscription/${e.id}`,e):Cr(`${ur.v1}/slack/subscriptions`,e),ju=e=>Fr(`${ur.v1}/slack/subscriptions/${e.id}`),Bu=e=>Cr(`${ur.v1}/slack/applications/registrations`,{code:e}),Wu=()=>Rr(`${ur.v1}/emails`),zu=e=>{let{eventKey:t}=e,n=ti(e,Mu);return Cr(`${ur.v1}/emails/${t}`,n)},Ku=({eventKey:e,enabled:t})=>Nr(`${ur.v1}/emails/${e}`,{enabled:t}),Hu=(e,t)=>Fr(`${ur.v1}/emails/${e}/subscriptions/${t}`),qu=(e,t,n)=>Mr(`${ur.v1}/emails/${t}/subscriptions/${e}`,n),Ju=e=>Fr(`${ur.v1}/emails/${e}`),Yu=()=>Rr(`${ur.v2}/sms`),Xu=e=>{let{eventKey:t}=e,n=ti(e,Fu);return Cr(`${ur.v2}/sms/${t}`,n)},Qu=({eventKey:e,enabled:t})=>Nr(`${ur.v2}/sms/${e}`,{enabled:t}),Zu=(e,t)=>Fr(`${ur.v2}/sms/${e}/subscriptions/${t}`),ey=(e,t,n)=>Mr(`${ur.v2}/sms/${t}/subscriptions/${e}`,n),ty=e=>Fr(`${ur.v2}/sms/${e}`),ny=()=>Rr(br),ay=e=>e._id?Nr(`${br}/${e._id}`,e):Cr(`${br}/custom`,e),iy=e=>Fr(`${br}/${e}`),oy=(e,t=0,n=10)=>{const a=new URLSearchParams({id:e,offset:`${t}`,limit:`${n}`});return Rr(`${br}/logs/?${a.toString()}`)},ry=e=>Cr(`${br}/test`,e),sy=e=>Cr(`${br}/logs/${e}/retries`),ly=()=>Rr(`${mr.v1}/categories`),cy=e=>Rr(mr.v1,{channels:e});async function dy(e,t){return Mr(lr.v1,e,{headers:$r(t)})}async function uy(e){return Rr(lr.v1,void 0,{headers:$r(e)})}async function yy(){return Rr(`${lr.v1}/public`)}const fy=["roleId"],py=["roleId"],gy=["permissionId"];async function Sy(){return Rr(Qo.v1)}async function vy(e){return Cr(Qo.v1,e)}async function hy({roleId:e}){return Fr(`${Qo.v1}/${e}`)}async function my(e){let{roleId:t}=e,n=ti(e,fy);return Nr(`${Qo.v1}/${t}`,n)}async function by(e){let{roleId:t}=e,n=ti(e,py);return Mr(`${Qo.v1}/${t}/permissions`,n)}async function Ay(){return Rr(Yo.v1)}async function Ty(e){let{permissionId:t}=e,n=ti(e,gy);return Mr(`${Yo.v1}/${t}/roles`,n)}async function Ey(){return Rr(`${Yo.v1}/categories`)}async function ky(e){return Cr(Qo.v2,e)}async function Iy(){return Rr(yr.subscriptions.v1)}async function Oy(e){return Rr(`${yr.subscriptions.v1}/${e}`)}async function Py(e){return Mr(`${yr.subscriptions.v1}/${e}/cancellations/`,{})}async function _y(e){return Mr(`${yr.subscriptions.v1}/${e}/renewals/`,{})}async function Ly(e,{paymentMethodId:t,planId:n}){return Mr(`${yr.subscriptions.v1}/${e}`,{paymentMethodId:t,planId:n})}async function wy(e){return Rr(`${pr.v1}/${e}`)}async function Dy(){return Rr(`${pr.v1}`)}async function Uy(e){return Mr(`${pr.v1}/${e}/cancellations/`,{})}async function Ry(e){return Mr(`${pr.v1}/${e}/renewals/`,{})}async function Cy(e,{paymentMethodId:t,planId:n}){return Mr(`${pr.v1}/${e}`,{paymentMethodId:t,planId:n})}async function Ny(){return Rr(yr.plans.v1)}async function My(e){return Rr(`${yr.plans.v1}/${e}`)}async function Fy(){return Rr(yr.invoices.v1)}async function Gy(e){return Rr(`${yr.invoices.v1}/${e}`)}async function $y(e,t){return Rr(`${yr.invoices.v1}/${e}/pdf`,{outputFileName:t},{responseType:"blob"})}const xy=["email"];async function Vy(){return Rr(yr.paymentMethods.v1)}async function jy(e){return Rr(`${yr.paymentMethods.v1}/${e}`)}async function By(e,t){let{email:n}=t,a=ti(t,xy);return Nr(`${yr.paymentMethods.v1}/${e}/billing-details`,{email:n,address:a})}async function Wy(e){return Cr(yr.paymentProviders.stripe.subscriptions.v1,e)}async function zy(e){return Rr(`${yr.paymentProviders.stripe.customers.v1}/${e}`)}async function Ky(e){return Cr(`${yr.paymentProviders.stripe.customers.v1}`,e)}async function Hy(){return Rr(`${yr.paymentProviders.stripe.publicConfigurations.v1}`)}async function qy(e){return Cr(`${yr.paymentProviders.stripe.setupIntents.v1}`,e)}async function Jy(e){return Rr(`${yr.summaries.v1}/${e}`)}async function Yy(e){return Rr(`${yr.tenantConfiguration.v1}/${e}`)}async function Xy(e){return Cr(`${yr.tenantConfiguration.v1}`,e)}async function Qy(){return Rr(fr.v1)}async function Zy(){return Rr(`${yr.configurations.vendorPublicConfigurations.v1}`)}let ef,tf,nf,af,of,rf;async function sf(){return Rr("/vendors/public")}async function lf(e){return Rr(Zo.v1,e)}async function cf(e){return Cr(Zo.v1,e)}async function df(e,t){return Fr(Zo.v1,e,{headers:$r(t)})}async function uf(e,t,n){return Cr(`${Zo.v1}/${e}/roles`,t,{headers:$r(n)})}async function yf(e,t,n){return Fr(`${Zo.v1}/${e}/roles`,t,{headers:$r(n)})}async function ff(e,t,n){return Nr(`${Zo.v1}/${e}/roles`,t,{headers:$r(n)})}async function pf(e,t){return Cr(dr.v1,e,{headers:$r(t)})}async function gf(e,t){return Fr(`${dr.v1}/${e}`,void 0,{headers:$r(t)})}async function Sf({tenantId:e},t,n){return Nr(`${dr.v1}/${e}`,t,{headers:$r(n)})}async function vf(e,t,n){return Mr(`${Zo.v1}/${e}/access`,t,{headers:$r(n)})}async function hf(e,t){return Cr(`${Zo.v2}/`,e,{headers:$r(t)})}async function mf(){return Rr(`${Er}`)}async function bf(e,t){return Nr(`${Er}/${e}`,t)}async function Af(e){return Cr(`${Er}`,e)}async function Tf(e){return Fr(`${Er}/${e}`)}async function Ef(e){return Rr(`${kr}/${e}/Users/count`)}async function kf(e){return Cr(`${er.v1}`,e)}!function(e){e.ACTIVE="active",e.CANCELED="canceled",e.INCOMPLETE="incomplete",e.EXPIRED="expired",e.TRIALING="trialing",e.TRIAL_ENDED="trialEnded"}(ef||(ef={})),function(e){e.UNKNWON="unknown",e.CARD="card"}(tf||(tf={})),function(e){e.AT_PERIOD_END="atPeriodEnd"}(nf||(nf={})),(af||(af={})).Stripe="Stripe",function(e){e.CHANGE_TO_DEFAULT="change_to_default",e.RETAIN_TRIAL="retain_trial"}(of||(of={})),function(e){e.CREATE="create_customer"}(rf||(rf={}));const If=["groupId"];async function Of({groupId:e},t){return Rr(`${tr.v1}/${e}`,G({},t))}async function Pf(e){return Rr(`${tr.v1}`,G({},e))}async function _f(e,t){return Cr(`${tr.getByIds.v1}`,e,{params:t})}async function Lf(e){return Cr(`${tr.v1}`,e)}async function wf(e){let{groupId:t}=e,n=ti(e,If);return Nr(`${tr.v1}/${t}`,n)}async function Df(e){return Fr(`${tr.v1}/${e}`)}async function Uf(e,t){return Cr(`${tr.v1}/${e}/roles`,t)}async function Rf(e,t){return Fr(`${tr.v1}/${e}/roles`,t)}async function Cf(e,t){return Cr(`${tr.v1}/${e}/users`,t)}async function Nf(e,t){return Fr(`${tr.v1}/${e}/users`,t)}async function Mf(){return Rr(`${tr.configurations.v1}`)}async function Ff(e){return Cr(`${tr.configurations.v1}`,e)}async function Gf(){return Rr(Pr.v1)}async function $f(){return Rr(_r.v1)}async function xf(e){return Rr(`${nr.v1}`,e)}async function Vf(e){return Cr(`${nr.v1}`,e)}async function jf(e){return Fr(`${nr.v1}/${e}`)}async function Bf(e){return Cr(`${nr.v1}/preverify`,e)}async function Wf(e){return Cr(`${nr.v1}/verify`,e)}async function zf(e,t){return Cr(`${nr.v1}/${e}/delete/verify`,t)}let Kf,Hf,qf,Jf;!function(e){e.FRONTEGG="frontegg",e.SCIM2="scim2"}(Kf||(Kf={})),function(e){e.createdAt="createdAt",e.name="name",e.tenantId="tenantId"}(Hf||(Hf={})),function(e){e.CUSTOMER="customer",e.SPAM="spam",e.TEST="test",e.RESELLER="reseller",e.HEADQUARTER="headquarter"}(qf||(qf={})),function(e){e.NEVER="NEVER",e.ALWAYS="ALWAYS",e.ASSIGNABLE="ASSIGNABLE"}(Jf||(Jf={}));const Yf=[/^(.*)\/logout$/g,"/logout",/^\/identity\/resources\/auth\/v[0-9]*\/user\/[^\/]*\/postlogin$/g,/^\/identity\/resources\/auth\/v[0-9]*\/passwordless\/[^\/]*\/postlogin$/g,/^\/identity\/resources\/auth\/v[0-9]*\/webauthn\/postlogin$/g,/^\/identity\/resources\/auth\/v[0-9]*\/user$/g,/^\/identity\/resources\/auth\/v[0-9]*\/user\/token\/refresh$/g,/^\/identity\/resources\/users\/v[0-9]*$/g,/^\/identity\/resources\/users\/v[0-9]*\/signUp$/g,/^\/identity\/resources\/users\/v[0-9]*\/activate$/g,/^\/identity\/resources\/users\/v[0-9]*\/invitation\/accept$/g,/^\/identity\/resources\/auth\/v[0-9]*\/user\/mfa\/verify$/g,/^\/identity\/resources\/auth\/v[0-9]*\/user\/mfa\/[^\/]*\/[^\/]*\/verify$/g,/^\/oauth\/token$/g,/^\/oauth\/authorize\/silent$/g],Xf=`${zo.v1}/user/token/refresh`,Qf=`${Ar}/authorize/silent`,Zf=`${Ko.v2}/me`,ep=`${Ko.v2}/me/tenants`,tp=`${Ko.v3}/me/tenants`;let np,ap,ip,op,rp,sp,lp,cp;!function(e){e.FRONTEGG="frontegg",e.OKTA="okta",e.AZURE_AD="azure-ad",e.OTHER="other"}(np||(np={})),function(e){e.roles="roles",e.users="users",e.rolesAndUsers="rolesAndUsers"}(ap||(ap={})),function(e){e.FRONTEGG="frontegg",e.SCIM2="scim2"}(ip||(ip={})),function(e){e.FORCE_MFA="FORCE_MFA",e.BREACHED_PASSWORDS_EXIST="BREACHED_PASSWORDS_EXIST",e.ENABLE_USER_LOCKOUT="ENABLE_USER_LOCKOUT",e.STRENGTHEN_USER_LOCKOUT="STRENGTHEN_USER_LOCKOUT",e.ENABLE_PASSWORD_HISTORY="ENABLE_PASSWORD_HISTORY",e.STRENGTHEN_PASSWORD_HISTORY="STRENGTHEN_PASSWORD_HISTORY",e.ENABLE_FORCE_RELOGIN="ENABLE_FORCE_RELOGIN",e.SET_FORCE_RELOGIN="SET_FORCE_RELOGIN",e.ENABLE_SESSION_CONCURRENCY="ENABLE_SESSION_CONCURRENCY",e.SET_SESSION_CONCURRENCY="SET_SESSION_CONCURRENCY",e.ENABLE_IDLE_SESSION="ENABLE_IDLE_SESSION",e.SET_IDLE_SESSION="SET_IDLE_SESSION",e.ENABLE_IP_RESTRICTIONS="ENABLE_IP_RESTRICTIONS",e.CHANGE_IP_TO_ALLOWLIST="CHANGE_IP_TO_ALLOWLIST",e.ENABLE_DOMAIN_RESTRICTIONS="ENABLE_DOMAIN_RESTRICTIONS",e.CHANGE_DOMAIN_TO_ALLOWLIST="CHANGE_DOMAIN_TO_ALLOWLIST",e.CONFIGURE_SSO="CONFIGURE_SSO"}(op||(op={})),function(e){e.MFA_FORCED="MFA_FORCED",e.PARTIALLY_FORCED_MFA="PARTIALLY_FORCED_MFA",e.PARTIAL_MFA_USAGE="PARTIAL_MFA_USAGE",e.FULL_MFA_USAGE="FULL_MFA_USAGE",e.BREACHED_PASSWORD_USERS_EXIST="BREACHED_PASSWORD_USERS_EXIST",e.IMPROVE_LOCKOUT_POLICY="IMPROVE_LOCKOUT_POLICY",e.IMPROVE_PASSWORD_HISTORY_POLICY="IMPROVE_PASSWORD_HISTORY_POLICY",e.NO_SESSION_SETTINGS="NO_SESSION_SETTINGS",e.PARTIAL_SESSION_SETTINGS="PARTIAL_SESSION_SETTINGS",e.FULL_SESSION_SETTINGS="FULL_SESSION_SETTINGS",e.NO_IP_RESTRICTIONS="NO_IP_RESTRICTIONS",e.IP_ALLOWLIST="IP_ALLOWLIST",e.IP_DENYLIST="IP_DENYLIST",e.NO_DOMAIN_RESTRICTIONS="NO_DOMAIN_RESTRICTIONS",e.DOMAIN_ALLOWLIST="DOMAIN_ALLOWLIST",e.DOMAIN_DENYLIST="DOMAIN_DENYLIST",e.FULL_PASSWORD_SETTINGS="FULL_PASSWORD_SETTINGS"}(rp||(rp={})),function(e){e.SEND_RESET_BREACHED_PASSWORD_EMAIL="SEND_RESET_BREACHED_PASSWORD_EMAIL",e.ADJUST_FORCE_RELOGIN="ADJUST_FORCE_RELOGIN",e.ADJUST_MAX_CONCURRENT_SESSIONS="ADJUST_MAX_CONCURRENT_SESSIONS",e.ADJUST_IDLE_TIMEOUT="ADJUST_IDLE_TIMEOUT"}(sp||(sp={})),function(e){e.SEVERE="SEVERE",e.WARNING="WARNING",e.INFO="INFO"}(lp||(lp={})),function(e){e.MFA="MFA",e.SESSIONS="SESSIONS",e.PASSWORD="PASSWORD",e.INACTIVITY="INACTIVITY",e.IP="IP",e.DOMAIN="DOMAIN",e.SSO="SSO"}(cp||(cp={}));const dp={auth:s,teams:l,metadata:c,reports:d,connectivity:f,notifications:u,audits:y,tenants:o,accountSettings:p,roles:g,subscriptions:S,vendor:v,subTenants:h,featureFlags:t,directory:m,impersonate:b,groups:A,users:i,entitlements:r,securityCenter:T,userPhoneNumbers:E},up={fetch:e,ContextHolder:Vo,FronteggContext:jo,api:dp,FronteggApiError:Bo,AuthStrategyEnum:Ia,MachineToMachineAuthStrategy:Oa,SocialLoginProviders:ka,ISubscriptionCancellationPolicy:nf,ISubscriptionStatus:ef,PaymentMethodType:tf,ProviderType:af};let yp,fp;!function(e){e.LOAD_SSO_CONFIGURATIONS="LOAD_SSO_CONFIGURATIONS",e.SAVE_SSO_CONFIGURATION="SAVE_SSO_CONFIGURATION",e.UPDATE_SSO_CONFIGURATION="UPDATE_SSO_CONFIGURATION",e.SAVE_SSO_CONFIGURATION_BY_METADATA="SAVE_SSO_CONFIGURATION_BY_METADATA",e.UPDATE_SSO_CONFIGURATION_BY_METADATA="UPDATE_SSO_CONFIGURATION",e.DELETE_SSO_CONFIGURATION="DELETE_SSO_CONFIGURATION",e.SAVE_SSO_DOMAIN="SAVE_SSO_DOMAIN",e.DELETE_SSO_DOMAIN="DELETE_SSO_DOMAIN",e.VALIDATE_SSO_DOMAIN="VALIDATE_SSO_DOMAIN",e.UPDATE_SSO_DEFAULT_ROLES="UPDATE_SSO_DEFAULT_ROLES",e.DELETE_SSO_GROUPS="DELETE_SSO_GROUPS",e.SAVE_SSO_GROUPS="SAVE_SSO_GROUPS",e.GET_SSO_AUTHORIZATION_ROLES="GET_SSO_AUTHORIZATION_ROLES"}(yp||(yp={})),function(e){e.Saml="saml",e.Okta="okta",e.Azure="azure",e.Google="google",e.Oidc="oidc"}(fp||(fp={}));const pp="input is invalid type",gp="undefined"!=typeof ArrayBuffer,Sp="0123456789abcdef".split(""),vp=[-2147483648,8388608,32768,128],hp=[24,16,8,0],mp=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],bp=["hex","array","digest","arrayBuffer"],Ap=[];Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),gp&&!ArrayBuffer.isView&&(ArrayBuffer.isView=function(e){return"object"==typeof e&&e.buffer&&e.buffer.constructor===ArrayBuffer});const Tp=function(e){return function(t){const n=new kp(!0).update(t);return null==n?void 0:n[e]()}},Ep=function(e){return function(t,n){const a=new Ip(t,!0).update(n);return null==a?void 0:a[e]()}};class kp{constructor(e=!1){this.blocks=void 0,this.h0=void 0,this.h1=void 0,this.h2=void 0,this.h3=void 0,this.h4=void 0,this.h5=void 0,this.h6=void 0,this.h7=void 0,this.block=void 0,this.start=void 0,this.bytes=void 0,this.hBytes=void 0,this.finalized=void 0,this.hashed=void 0,this.first=void 0,this.lastByteIndex=void 0,this.sharedMemory=!1,this.toString=()=>this.hex(),this.array=()=>kp.prototype.digest(),e?(Ap[0]=Ap[16]=Ap[1]=Ap[2]=Ap[3]=Ap[4]=Ap[5]=Ap[6]=Ap[7]=Ap[8]=Ap[9]=Ap[10]=Ap[11]=Ap[12]=Ap[13]=Ap[14]=Ap[15]=0,this.blocks=Ap):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225,this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.sharedMemory=e}update(e){if(this.finalized)return;let t;const n=typeof e;if("string"!==n){if("object"!==n)throw new Error(pp);if(null===e)throw new Error(pp);if(gp&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!(Array.isArray(e)||gp&&ArrayBuffer.isView(e)))throw new Error(pp);t=!0}let a,i,o=0;const r=e.length,s=this.blocks;for(;o<r;){if(this.hashed&&(this.hashed=!1,s[0]=this.block,s[16]=s[1]=s[2]=s[3]=s[4]=s[5]=s[6]=s[7]=s[8]=s[9]=s[10]=s[11]=s[12]=s[13]=s[14]=s[15]=0),t)for(i=this.start;o<r&&i<64;++o)s[i>>2]|=e[o]<<hp[3&i++];else for(i=this.start;o<r&&i<64;++o)a=e.charCodeAt(o),a<128?s[i>>2]|=a<<hp[3&i++]:a<2048?(s[i>>2]|=(192|a>>6)<<hp[3&i++],s[i>>2]|=(128|63&a)<<hp[3&i++]):a<55296||a>=57344?(s[i>>2]|=(224|a>>12)<<hp[3&i++],s[i>>2]|=(128|a>>6&63)<<hp[3&i++],s[i>>2]|=(128|63&a)<<hp[3&i++]):(a=65536+((1023&a)<<10|1023&e.charCodeAt(++o)),s[i>>2]|=(240|a>>18)<<hp[3&i++],s[i>>2]|=(128|a>>12&63)<<hp[3&i++],s[i>>2]|=(128|a>>6&63)<<hp[3&i++],s[i>>2]|=(128|63&a)<<hp[3&i++]);this.lastByteIndex=i,this.bytes+=i-this.start,i>=64?(this.block=s[16],this.start=i-64,this.hash(),this.hashed=!0):this.start=i}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}finalize(){if(this.finalized)return;this.finalized=!0;const e=this.blocks,t=this.lastByteIndex;e[16]=this.block,e[t>>2]|=vp[3&t],this.block=e[16],t>=56&&(this.hashed||this.hash(),e[0]=this.block,e[16]=e[1]=e[2]=e[3]=e[4]=e[5]=e[6]=e[7]=e[8]=e[9]=e[10]=e[11]=e[12]=e[13]=e[14]=e[15]=0),e[14]=this.hBytes<<3|this.bytes>>>29,e[15]=this.bytes<<3,this.hash()}hash(){let e,t,n,a,i,o,r,s,l,c,d,u=this.h0,y=this.h1,f=this.h2,p=this.h3,g=this.h4,S=this.h5,v=this.h6,h=this.h7;const m=this.blocks;for(e=16;e<64;++e)i=m[e-15],t=(i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3,i=m[e-2],n=(i>>>17|i<<15)^(i>>>19|i<<13)^i>>>10,m[e]=m[e-16]+t+m[e-7]+n<<0;for(d=y&f,e=0;e<64;e+=4)this.first?(s=704751109,i=m[0]-210244248,h=i-1521486534<<0,p=i+143694565<<0,this.first=!1):(t=(u>>>2|u<<30)^(u>>>13|u<<19)^(u>>>22|u<<10),n=(g>>>6|g<<26)^(g>>>11|g<<21)^(g>>>25|g<<7),s=u&y,a=s^u&f^d,r=g&S^~g&v,i=h+n+r+mp[e]+m[e],o=t+a,h=p+i<<0,p=i+o<<0),t=(p>>>2|p<<30)^(p>>>13|p<<19)^(p>>>22|p<<10),n=(h>>>6|h<<26)^(h>>>11|h<<21)^(h>>>25|h<<7),l=p&u,a=l^p&y^s,r=h&g^~h&S,i=v+n+r+mp[e+1]+m[e+1],o=t+a,v=f+i<<0,f=i+o<<0,t=(f>>>2|f<<30)^(f>>>13|f<<19)^(f>>>22|f<<10),n=(v>>>6|v<<26)^(v>>>11|v<<21)^(v>>>25|v<<7),c=f&p,a=c^f&u^l,r=v&h^~v&g,i=S+n+r+mp[e+2]+m[e+2],o=t+a,S=y+i<<0,y=i+o<<0,t=(y>>>2|y<<30)^(y>>>13|y<<19)^(y>>>22|y<<10),n=(S>>>6|S<<26)^(S>>>11|S<<21)^(S>>>25|S<<7),d=y&f,a=d^y&p^c,r=S&v^~S&h,i=g+n+r+mp[e+3]+m[e+3],o=t+a,g=u+i<<0,u=i+o<<0;this.h0=this.h0+u<<0,this.h1=this.h1+y<<0,this.h2=this.h2+f<<0,this.h3=this.h3+p<<0,this.h4=this.h4+g<<0,this.h5=this.h5+S<<0,this.h6=this.h6+v<<0,this.h7=this.h7+h<<0}hex(){this.finalize();const e=this.h0,t=this.h1,n=this.h2,a=this.h3,i=this.h4,o=this.h5,r=this.h6,s=this.h7;let l=Sp[e>>28&15]+Sp[e>>24&15]+Sp[e>>20&15]+Sp[e>>16&15]+Sp[e>>12&15]+Sp[e>>8&15]+Sp[e>>4&15]+Sp[15&e]+Sp[t>>28&15]+Sp[t>>24&15]+Sp[t>>20&15]+Sp[t>>16&15]+Sp[t>>12&15]+Sp[t>>8&15]+Sp[t>>4&15]+Sp[15&t]+Sp[n>>28&15]+Sp[n>>24&15]+Sp[n>>20&15]+Sp[n>>16&15]+Sp[n>>12&15]+Sp[n>>8&15]+Sp[n>>4&15]+Sp[15&n]+Sp[a>>28&15]+Sp[a>>24&15]+Sp[a>>20&15]+Sp[a>>16&15]+Sp[a>>12&15]+Sp[a>>8&15]+Sp[a>>4&15]+Sp[15&a]+Sp[i>>28&15]+Sp[i>>24&15]+Sp[i>>20&15]+Sp[i>>16&15]+Sp[i>>12&15]+Sp[i>>8&15]+Sp[i>>4&15]+Sp[15&i]+Sp[o>>28&15]+Sp[o>>24&15]+Sp[o>>20&15]+Sp[o>>16&15]+Sp[o>>12&15]+Sp[o>>8&15]+Sp[o>>4&15]+Sp[15&o]+Sp[r>>28&15]+Sp[r>>24&15]+Sp[r>>20&15]+Sp[r>>16&15]+Sp[r>>12&15]+Sp[r>>8&15]+Sp[r>>4&15]+Sp[15&r];return l+=Sp[s>>28&15]+Sp[s>>24&15]+Sp[s>>20&15]+Sp[s>>16&15]+Sp[s>>12&15]+Sp[s>>8&15]+Sp[s>>4&15]+Sp[15&s],l}digest(){this.finalize();const e=this.h0,t=this.h1,n=this.h2,a=this.h3,i=this.h4,o=this.h5,r=this.h6,s=this.h7,l=[e>>24&255,e>>16&255,e>>8&255,255&e,t>>24&255,t>>16&255,t>>8&255,255&t,n>>24&255,n>>16&255,n>>8&255,255&n,a>>24&255,a>>16&255,a>>8&255,255&a,i>>24&255,i>>16&255,i>>8&255,255&i,o>>24&255,o>>16&255,o>>8&255,255&o,r>>24&255,r>>16&255,r>>8&255,255&r];return l.push(s>>24&255,s>>16&255,s>>8&255,255&s),l}arrayBuffer(){this.finalize();const e=new ArrayBuffer(32),t=new DataView(e);return t.setUint32(0,this.h0),t.setUint32(4,this.h1),t.setUint32(8,this.h2),t.setUint32(12,this.h3),t.setUint32(16,this.h4),t.setUint32(20,this.h5),t.setUint32(24,this.h6),t.setUint32(28,this.h7),e}}class Ip extends kp{constructor(e,t=!1){let n;super(t),this.inner=void 0,this.oKeyPad=void 0;const a=typeof e;if("string"===a){const t=[],a=e.length;let i,o=0;for(n=0;n<a;++n)i=e.charCodeAt(n),i<128?t[o++]=i:i<2048?(t[o++]=192|i>>6,t[o++]=128|63&i):i<55296||i>=57344?(t[o++]=224|i>>12,t[o++]=128|i>>6&63,t[o++]=128|63&i):(i=65536+((1023&i)<<10|1023&e.charCodeAt(++n)),t[o++]=240|i>>18,t[o++]=128|i>>12&63,t[o++]=128|i>>6&63,t[o++]=128|63&i);e=t}else{if("object"!==a)throw new Error(pp);if(null===e)throw new Error(pp);if(gp&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!(Array.isArray(e)||gp&&ArrayBuffer.isView(e)))throw new Error(pp)}var i;e.length>64&&(e=null==(i=new kp(!0).update(e))?void 0:i.array());const o=[],r=[];for(n=0;n<64;++n){const t=e[n]||0;o[n]=92^t,r[n]=54^t}kp.call(this,t),this.update(r),this.oKeyPad=o,this.inner=!0,this.sharedMemory=t}finalize(){if(super.finalize(),this.inner){this.inner=!1;const e=this.array();kp.call(this,this.sharedMemory),this.update(this.oKeyPad),this.update(e),kp.prototype.finalize.call(this)}}}const Op=function(){const e=Tp("hex");e.create=function(){return new kp},e.update=function(t){return e.create().update(t)};for(let t=0;t<bp.length;++t){const n=bp[t];e[n]=Tp(n)}return e}();function Pp(e,t){const n=G({},e);return t.forEach((e=>{delete n[e]})),n}async function _p(e){var t,n;return null!=(t=window.crypto)&&null!=(n=t.subtle)&&n.digest?async function(e){const t=await crypto.subtle.digest("SHA-256",(new TextEncoder).encode(e));return btoa(String.fromCharCode(...new Uint8Array(t))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}(e):(console.warn("Generating CodeChallenge in non-secure domain:",window.location.origin),async function(e){const t=Op.digest((new TextEncoder).encode(e));return btoa(String.fromCharCode(...new Uint8Array(t))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}(e))}function Lp(e=16){let t="";const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let a=0;a<e;a++)t+=n.charAt(Math.floor(Math.random()*n.length));return t}!function(){const e=Ep("hex");e.create=function(e){return new Ip(e)},e.update=function(t,n){return e.create(t).update(n)};for(let t=0;t<bp.length;++t){const n=bp[t];e[n]=Ep(n)}}();const wp=e=>new Promise(((t,n)=>{const a=new FileReader;a.readAsText(e),a.onload=()=>t(a.result),a.onerror=n}));function*Dp(e){const t=yield zi((e=>e.root.appName));return Br.getFeatureFlags(e,t)}const Up={clientId:"CLIENT_ID_16806d3d-8fc3-4450-be97-abdaf66b723e",secret:"SECRET_16806d3d-8fc3-4450-be97-abdaf66b723e",createdAt:"createdAt",description:"Demo API Token (preview only)"},Rp=G({},Up,{roleIds:[],tenantId:"my-tenant-id",createdByUserId:"createdByUserId"}),Cp=[{id:"a040dcf6-b907-4e83-9970-6bd23c88fd40",key:"ReadOnly",name:"Read Only",description:null,isDefault:!1,createdAt:new Date,updatedAt:new Date,permissions:["8d71b676-754c-4600-afe7-ca5add1e6809","04dbcc11-61db-40a9-9577-9b73e50d1d03"],vendorId:"vendorId"},{id:"b43b2c4b-e056-4eec-8c55-d200a475bbc0",key:"Admin",name:"Admin",description:null,isDefault:!0,createdAt:new Date,updatedAt:new Date,permissions:["8d71b676-754c-4600-afe7-ca5add1e6809","04dbcc11-61db-40a9-9577-9b73e50d1d03","16647407-ed6f-4ca6-83a0-86225d921959","f403c6b9-1abe-4ec7-9971-aa032255fc25","a43e059d-d731-44b1-94bb-fb6b16c62210"],vendorId:"vendorId"},{id:"1234",key:"Support",name:"Support",description:null,isDefault:!0,createdAt:new Date,updatedAt:new Date,permissions:["8d71b676-754c-4600-afe7-ca5add1e6809","04dbcc11-61db-40a9-9577-9b73e50d1d03","f26b00f8-ffe0-4739-b15c-7db15c27ea26","a9c803b0-ebfa-49b9-9607-f0d3a390ee61"],tenantId:"tenantId",vendorId:"vendorId"}],Np={sub:"",tenants:[],id:"testId",name:"Demo User Name",email:"demo-user@frontegg.com",mfaEnrolled:!0,profilePictureUrl:"https://www.gravatar.com/avatar/42b2ad2bad6fc9b9db5086dfcf8072ac?d=https://ui-avatars.com/api/fe/128/random?t=1617261890875?t=1617261917434",roles:[{id:"roleId",key:"admin",isDefault:!1,name:"Admin",description:null,permissions:["8d71b676-754c-4600-afe7-ca5add1e6809","04dbcc11-61db-40a9-9577-9b73e50d1d03"],tenantId:"tenantId",vendorId:"vendorId",createdAt:new Date,updatedAt:new Date}],permissions:[{id:"8d71b676-754c-4600-afe7-ca5add1e6809",key:"fe.*",name:"General Admin",description:"description",categoryId:"category",fePermission:!0,createdAt:new Date,updatedAt:new Date,roleIds:[]}],tenantId:"my-tenant-id",tenantIds:["my-tenant-id"],activatedForTenant:!0,metadata:JSON.stringify({phoneNumber:"+972-54123456",jobTitle:"Developer",address:{city:"Tel Aviv",country:"Israel"}}),verified:!1},Mp=G({},Np,{accessToken:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI1MTY5YmY0Zi02YmI5LTQ5NGMtOGNkZS05MDc4NDQ0NWY4MDciLCJuYW1lIjoiRHVtbXkgVXNlciIsImVtYWlsIjoiZHVtbXlAZnJvbnRlZ2cuY29tIiwiZW1haWxfdmVyaWZpZWQiOnRydWUsIm1ldGFkYXRhIjp7fSwicm9sZXMiOlsiYWRtaW4iXSwicGVybWlzc2lvbnMiOlsiZmUuKiJdLCJ0ZW5hbnRJZCI6Im15LXRlbmFudC1pZCIsInRlbmFudElkcyI6WyJteS10ZW5hbnQtaWQiXSwicHJvZmlsZVBpY3R1cmVVcmwiOiJodHRwczovL3d3dy5ncmF2YXRhci5jb20vYXZhdGFyLzQyYjJhZDJiYWQ2ZmM5YjlkYjUwODZkZmNmODA3MmFjP2Q9aHR0cHM6Ly91aS1hdmF0YXJzLmNvbS9hcGkvZmUvMTI4L3JhbmRvbT90PTE2MTcyNjE4OTA4NzU_dD0xNjE3MjYxOTE3NDM0IiwidHlwZSI6InVzZXJUb2tlbiIsImlhdCI6MTYxNzkwNjMyNCwiZXhwIjoxNjE3OTkyNzI0LCJpc3MiOiJmcm9udGVnZyJ9.paaXLkpWEWbQmUtoK2P8IwXCxK4WJp7XhXonvzF8g1I",expiresIn:86400,mfaRequired:!1,refreshToken:"refresh-token-dummy-de39dc9c-9d22-4852-b7f5-c3c0aa613b58",type:"userToken",iat:1617906324,exp:1617992724,iss:"frontegg",email_verified:!0}),Fp={loading:!1,error:void 0,saving:!0,profile:Np},Gp={id:"id",enforceMFAType:"DontForce",createdAt:new Date,updatedAt:new Date,allowOverrideEnforcePasswordHistory:!0,allowOverridePasswordComplexity:!1,allowOverridePasswordExpiration:!1,allowSignups:!0,apiTokensEnabled:!0,cookieSameSite:"cookieSameSite",defaultRefreshTokenExpiration:0,defaultTokenExpiration:1,publicKey:"publicKey"},$p={allowSignups:!0,allowNotVerifiedUsersLogin:!1,apiTokensEnabled:!0,forcePermissions:!1,authStrategy:Ia.EmailAndPassword,machineToMachineAuthStrategy:Oa.ClientCredentials},xp={id:"id",enforceMFAType:"DontForce",createdAt:new Date,updatedAt:new Date},Vp={id:"id",enabled:!0,maxAttempts:1,createdAt:new Date,updatedAt:new Date},jp={id:"id",enabled:!0,historySize:1,createdAt:new Date,updatedAt:new Date},Bp={enabled:!0,domain:"domain",validated:!0,generatedVerification:"generatedVerification",ssoEndpoint:"ssoEndpoint",publicCertificate:"publicCertificate",signRequest:!0,createdAt:new Date,updatedAt:new Date,acsUrl:void 0,spEntityId:void 0,oidcClientId:void 0,oidcSecret:void 0,type:void 0},Wp={id:"id",createdAt:"createdAt",updatedAt:"updatedAt",properties:[],vendorId:"vendorId",entityName:"saml",isActive:!0,configuration:{acsUrl:"acsUrl",spEntityId:"spEntityId"}},zp=[{id:"id",description:"description",key:"key",name:"name",permissions:[],permissionLevel:1}],Kp={firstLoad:!1,loading:!1,error:void 0,saving:!1,samlConfiguration:Bp,roles:zp,authorizationRoles:[],errors:{},loaders:{},ssoConfigurations:[]},Hp=[{description:"string",fePermission:!0,id:"id",key:"key",name:"name",roleIds:[],createdAt:new Date,updatedAt:new Date,categoryId:"categoryId"}],qp={id:"id2",email:"demo-user2@frontegg.com",name:"Demo User Name2",phone:void 0,profileImage:void 0,profileImageUrl:void 0,tenantId:"tenantId",vendorId:"vendorId",roleIds:[],activatedForTenant:!0,verified:!1,createdAt:(new Date).toISOString(),customData:void 0,lastLogin:void 0,mfaEnabled:void 0,roles:[Cp[0]],groups:[{id:"id2",name:"Developers",color:"#03A9F4",roles:[Cp[0]],managedBy:ip.FRONTEGG}]},Jp={id:qp.id,email:qp.email,name:qp.name,phoneNumber:void 0,profileImage:void 0,tenantId:"tenantId",activatedForTenant:!0,createdAt:new Date(2022,4,1),verified:!0,lastLogin:new Date(2022,5,25),mfaEnrolled:!1,roles:[Cp[1]],tenantIds:[],metadata:"",sub:"",tenants:[]},Yp={id:"id",email:"demo-user@frontegg.com",name:"Demo User Name",phone:void 0,profileImage:void 0,profileImageUrl:void 0,tenantId:"tenantId",vendorId:"vendorId",roleIds:[],activatedForTenant:!0,createdAt:new Date(2022,4,1).toISOString(),verified:!0,customData:void 0,lastLogin:new Date(2022,5,25).toISOString(),mfaEnabled:void 0,roles:[Cp[1]],groups:[{id:"id1",name:"Designers",color:"#E1F5E2",roles:[Cp[0]],managedBy:ip.FRONTEGG}]},Xp={id:Yp.id,email:Yp.email,name:Yp.name,phoneNumber:void 0,profileImage:void 0,tenantId:"tenantId",activatedForTenant:!0,createdAt:new Date(2022,4,1),verified:!0,lastLogin:new Date(2022,5,25),mfaEnrolled:!1,roles:[Cp[1]],tenantIds:[],metadata:"",sub:"",tenants:[]},Qp={metadata:"",mfaEnrolled:!1,provider:"",sub:"",tenantIds:[],tenants:[],verified:!1,id:"id",email:"email",name:"name",tenantId:"tenantId",createdAt:new Date},Zp=[Yp,qp],eg=[Xp,Jp],tg=[Qp],ng=[{id:"my-tenant-id",isReseller:!1,name:"Frontegg demo",deletedAt:null,metadata:void 0,tenantId:"my-tenant-id",vendorId:"vendorId",createdAt:new Date,updatedAt:new Date,address:void 0,timezone:void 0,dateFormat:void 0,timeFormat:void 0,currency:void 0,logo:void 0}],ag=[{id:"laptop",userAgent:"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_6) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.0 Safari/605.1.15",createdAt:new Date,ipAddress:"190.194.88.251",current:!0},{id:"iphone",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 15_2_1 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.2 Mobile/15E148 Safari/604.1",createdAt:new Date(Date.now()-1e4),ipAddress:"191.49.203.21"},{id:"tablet",userAgent:"Mozilla/5.0 (Linux; Android 6.0.1; SGP771 Build/32.2.A.0.253; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/52.0.2743.98 Safari/537.36",createdAt:new Date(Date.now()-3e4),ipAddress:"130.19.196.136"},{id:"anotherlaptop",userAgent:"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_6) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.0 Safari/605.1.15",createdAt:new Date(Date.now()-1002232300),ipAddress:"2.228.163.92"}],ig={sessionConcurrentConfiguration:{isActive:!0,maxSessions:10},sessionIdleTimeoutConfiguration:{isActive:!0,timeout:3600},sessionTimeoutConfiguration:{isActive:!0,timeout:7776e3}},og={isActive:!0,strategy:zn.ALLOW},rg=[{updatedAt:new Date,createdAt:new Date,id:"1",ip:"255.255.255.255",isActive:!0,strategy:zn.ALLOW,description:"My IP"},{updatedAt:new Date,createdAt:new Date,id:"2",ip:"255.255.255.254",isActive:!0,strategy:zn.ALLOW,description:"IP 2"},{updatedAt:new Date,createdAt:new Date,id:"3",ip:"255.255.255.253",isActive:!0,strategy:zn.BLOCK,description:"IP 3"},{updatedAt:new Date,createdAt:new Date,id:"4",ip:"255.255.255.253",isActive:!0,strategy:zn.BLOCK,description:"IP 4"}],sg=e=>{const t=[];return Array.from({length:e}).forEach(((e,n)=>{t.push(G({},Yp,{name:"Demo User",id:`id${n}`,profilePictureUrl:null,createdAt:new Date}))})),t},lg=e=>({id:"b43b2c4b-e056-4eec-8c55-d200a475bbc0"+e,key:e,name:e,description:null,isDefault:!0,createdAt:new Date,updatedAt:new Date,permissions:[],tenantId:"tenantId",vendorId:"vendorId"}),cg=[{id:"id1",name:"Designers",color:"#E1F5E2",description:"The whole design team",users:sg(6),roles:[lg("Editor")],metadata:'{"lastTermsCheck":"2022-08-16T10:31:11.270Z"}',managedBy:ip.FRONTEGG},{id:"id2",name:"Developers",color:"#03A9F4",description:"All frontend and backend developers",users:sg(44),roles:[lg("Editor")],managedBy:ip.FRONTEGG},{id:"id3",name:"Product",color:"#E1583E",description:"PMs and team leads",users:sg(8),roles:[lg("Viewer")],managedBy:ip.FRONTEGG},{id:"id4",name:"Management",color:"#9AE0FF",description:"Executives",users:sg(5),roles:[lg("Admin")],managedBy:ip.FRONTEGG},{id:"id5",name:"Sales",color:"#ED8E7C",users:sg(21),description:"BDR, AE, and inside sales",roles:[lg("Viewer")],managedBy:ip.FRONTEGG},{id:"id6",name:"Support",color:"#A79D7B",users:sg(23),description:"Dev success and customer success",roles:[lg("Admin")],managedBy:ip.FRONTEGG},{id:"id7",name:"Marketing",color:"#2CA744",users:sg(10),description:"The marketing department",roles:[lg("Viewer")],managedBy:ip.FRONTEGG},{id:"id8",name:"HR",color:"#EAE1C2",users:sg(4),description:"Human resources",roles:[lg("Viewer")],managedBy:ip.FRONTEGG},{id:"id9",name:"Finance",color:"#5587C0",users:sg(3),roles:[lg("Viewer")],managedBy:ip.FRONTEGG},{id:"id10",name:"Operations",color:"#B1CAE7",users:sg(8),roles:[lg("Editor")],managedBy:ip.FRONTEGG},{id:"id11",name:"Legal",color:"#2CA744",users:sg(4),roles:[lg("Viewer")],managedBy:ip.FRONTEGG}],dg={scoring:{score:79},recommendations:{items:[{code:op.FORCE_MFA,severity:lp.WARNING,category:cp.MFA},{code:op.ENABLE_FORCE_RELOGIN,severity:lp.WARNING,category:cp.SESSIONS}]}},ug={insights:{items:[{category:cp.MFA,code:rp.PARTIALLY_FORCED_MFA,metadata:{totalUsers:2,mfa:{enrolledUsersCount:1}}},{category:cp.SESSIONS,code:rp.PARTIAL_SESSION_SETTINGS,metadata:{totalUsers:2,sessions:{idleTimeoutRecommendation:1800}}},{category:cp.PASSWORD,code:rp.IMPROVE_PASSWORD_HISTORY_POLICY,metadata:{password:{userLockoutRecommendation:5,historyRecommendations:5}}},{category:cp.DOMAIN,code:rp.NO_IP_RESTRICTIONS,metadata:{restrictions:{ipsCount:1,domainsCount:1}}}]}},yg={users:eg,totalUsersItems:2,totalUsersPages:1,usersPageOffset:0},fg={users:[eg[0]],totalUsersItems:1,totalUsersPages:1,usersPageOffset:0,queryParams:{_maxInactiveSeconds:7776e3}},pg={users:[eg[1]],totalUsersItems:1,totalUsersPages:1,usersPageOffset:0},gg=[{id:"8d71b676-754c-4600-afe7-ca5add1e6809",key:"fe.secure.*",name:"Secure write",description:"all secure access permissions",categoryId:"77154759-0a04-4669-b6b4-0858d3c1190e",fePermission:!0,assignmentType:Jf.ASSIGNABLE,createdAt:new Date,updatedAt:new Date},{id:"85e1fd7b-2bb7-498f-8521-5f8e5774c01e",key:"fe.account-hierarchy.write.subAccountAccess",name:"Give access to sub accounts",description:"Give a user access to sub account",assignmentType:Jf.ASSIGNABLE,createdAt:new Date,updatedAt:new Date,categoryId:"d24db1e3-002b-421d-951d-09a967dd7cd5",fePermission:!0},{id:"a1807695-54a2-4f95-95de-a9b246488aae",key:"fe.account-hierarchy.read.subAccount",name:"Read sub accounts",description:"Read sub accounts",assignmentType:Jf.ASSIGNABLE,createdAt:new Date,updatedAt:new Date,categoryId:"d24db1e3-002b-421d-951d-09a967dd7cd5",fePermission:!0},{id:"04dbcc11-61db-40a9-9577-9b73e50d1d03",key:"fe.secure.read.*",name:"Secure read",description:"all secure access read permissions",assignmentType:Jf.ASSIGNABLE,createdAt:new Date,updatedAt:new Date,categoryId:"77154759-0a04-4669-b6b4-0858d3c1190e",fePermission:!0},{id:"a1807695-54a2-4f95-95de-a9b246488aae",key:"fe.account-hierarchy.read.subAccount",name:"Read sub accounts",description:"Read sub accounts",assignmentType:Jf.ASSIGNABLE,createdAt:new Date,updatedAt:new Date,categoryId:"d24db1e3-002b-421d-951d-09a967dd7cd5",fePermission:!0},{id:"85e1fd7b-2bb7-498f-8521-5f8e5774c01e",key:"fe.account-hierarchy.write.subAccountAccess",name:"Give access to sub accounts",description:"Give a user access to sub account",assignmentType:Jf.ASSIGNABLE,createdAt:new Date,updatedAt:new Date,categoryId:"d24db1e3-002b-421d-951d-09a967dd7cd5",fePermission:!0},{id:"a9c803b0-ebfa-49b9-9607-f0d3a390ee61",key:"fe.account-settings.delete.account",name:"Delete Account",description:"Delete my account",assignmentType:Jf.ASSIGNABLE,createdAt:new Date,updatedAt:new Date,categoryId:"42aaebe1-893d-4da5-99d7-375a4537b7a4",fePermission:!0},{id:"f26b00f8-ffe0-4739-b15c-7db15c27ea26",key:"fe.account-settings.write.custom-login-box",name:"Edit custom login settings",description:"Write account's custom login box styling",assignmentType:Jf.ASSIGNABLE,createdAt:new Date,updatedAt:new Date,categoryId:"42aaebe1-893d-4da5-99d7-375a4537b7a4",fePermission:!0},{id:"a43e059d-d731-44b1-94bb-fb6b16c62210",key:"fe.connectivity.delete.*",name:"Connectivity delete",description:"all connectivity delete permissions",assignmentType:Jf.ASSIGNABLE,createdAt:new Date,updatedAt:new Date,categoryId:"d18fccaa-e09a-4e6e-b902-cc9c615ff12d",fePermission:!0},{id:"f403c6b9-1abe-4ec7-9971-aa032255fc25",key:"fe.connectivity.delete.slackAppRegistration",name:"Delete slack application registration",description:"allow user to delete slack app registration",assignmentType:Jf.ASSIGNABLE,createdAt:new Date,updatedAt:new Date,categoryId:"62fc3fe0-f06b-4a0f-854c-cdf51353b616",fePermission:!0},{id:"e8c0e727-f562-449a-82c5-f7691defde02",key:"fe.connectivity.read.*",name:"Connectivity read",description:"all connectivity read permissions",assignmentType:Jf.ASSIGNABLE,createdAt:new Date,updatedAt:new Date,categoryId:"d18fccaa-e09a-4e6e-b902-cc9c615ff12d",fePermission:!0},{id:"2a5dcd6d-57a3-45c4-815f-c265609cc1f7",key:"fe.connectivity.read.emailConfig",name:"Read email configuration",description:"read email integration configuration",assignmentType:Jf.ASSIGNABLE,createdAt:new Date,updatedAt:new Date,categoryId:"2d7b4be7-8269-4ff4-81d6-0c92e95790d5",fePermission:!0},{id:"4fee0eb0-5b17-450b-bea4-b9b908230bda",key:"fe.connectivity.read.eventCategories",name:"Read events categories",description:"view connectivity events categories",assignmentType:Jf.ASSIGNABLE,createdAt:new Date,updatedAt:new Date,categoryId:"31c7a260-55d6-43d5-a872-4f9e22982ff5",fePermission:!0},{id:"750a96a5-8abf-4340-b91a-723c7bb8bcfd",key:"fe.connectivity.read.events",name:"Read events",description:"view connectivity events",assignmentType:Jf.ASSIGNABLE,createdAt:new Date,updatedAt:new Date,categoryId:"31c7a260-55d6-43d5-a872-4f9e22982ff5",fePermission:!0},{id:"ef2a5f1a-74c5-431f-b1a6-d4fb5026e374",key:"fe.connectivity.read.slackApp",name:"Read slack application",description:"get slack application configuration in order to register",assignmentType:Jf.ASSIGNABLE,createdAt:new Date,updatedAt:new Date,categoryId:"62fc3fe0-f06b-4a0f-854c-cdf51353b616",fePermission:!0},{id:"9fc1fa37-a8b9-4931-b2b5-5de55df25289",key:"fe.connectivity.read.slackChannels",name:"Read slack channels",description:"view registered slack workspace channels",assignmentType:Jf.ASSIGNABLE,createdAt:new Date,updatedAt:new Date,categoryId:"62fc3fe0-f06b-4a0f-854c-cdf51353b616",fePermission:!0},{id:"87c3df9d-0ab2-4e97-bfc8-777a68ba2543",key:"fe.connectivity.read.slackSubscriptions",name:"Read slack subscriptions",description:"view slack events subscriptions",assignmentType:Jf.ASSIGNABLE,createdAt:new Date,updatedAt:new Date,categoryId:"62fc3fe0-f06b-4a0f-854c-cdf51353b616",fePermission:!0},{id:"7826470b-151f-4bab-b2c0-785e09878616",key:"fe.connectivity.read.slackUsers",name:"Read slack users",description:"view registered slack workspace users",assignmentType:Jf.ASSIGNABLE,createdAt:new Date,updatedAt:new Date,categoryId:"62fc3fe0-f06b-4a0f-854c-cdf51353b616",fePermission:!0},{id:"ee779734-a7e3-47b3-ace9-944f9bee8ad8",key:"fe.connectivity.read.smsConfig",name:"Read SMS configuration",description:"read SMS integration configuration",assignmentType:Jf.ASSIGNABLE,createdAt:new Date,updatedAt:new Date,categoryId:"5743fccc-b4ea-4907-bdca-7446ea088974",fePermission:!0},{id:"54583a96-c731-4a84-9abc-1b8b827f06ae",key:"fe.connectivity.read.userBellNotifications",name:"Read bell notifications",description:"view user bell notifications",assignmentType:Jf.ASSIGNABLE,createdAt:new Date,updatedAt:new Date,categoryId:"18d2584b-7f03-4038-ab93-bc2b0f4511be",fePermission:!0},{id:"2dfde8ef-7df2-4426-bb8d-33615e399a4d",key:"fe.connectivity.read.webhookLogs",name:"Read webhooks logs",description:"view webhooks logs",assignmentType:Jf.ASSIGNABLE,createdAt:new Date,updatedAt:new Date,categoryId:"e74e5390-396b-429c-9544-62417912d018",fePermission:!0},{id:"16647407-ed6f-4ca6-83a0-86225d921959",key:"fe.connectivity.read.webhooks",name:"Read webhooks",description:"view webhooks configuration",assignmentType:Jf.ASSIGNABLE,createdAt:new Date,updatedAt:new Date,categoryId:"e74e5390-396b-429c-9544-62417912d018",fePermission:!0}],Sg=[{id:"d9b4dbd0-476c-4708-b079-d9e6e4758971",name:"test",description:"",createdAt:new Date,updatedAt:new Date,permissionIds:[],feCategory:!1},{id:"2b3f1746-1135-4b8d-aff3-5697cffc4482",name:"SAML",description:"Secure access SAML",createdAt:new Date,updatedAt:new Date,permissionIds:["8ea45a49-c403-4551-9da9-77f5da44f130","8d94c261-1f7d-46bd-88a8-511e9f39273b","7391ac41-b076-4386-8a14-7c2d798d3335","6d8f5a1f-b3cd-421a-ba85-7784bdd97dc2","3c989065-35e1-4198-8c9c-c94084222794"],feCategory:!0},{id:"2c2281da-cf81-4943-9605-42969677e9fe",name:"Security Policies",description:"Secure access security policies",createdAt:new Date,updatedAt:new Date,permissionIds:["e5642338-b265-4ce5-94e4-8c21490033ad","daddb9e9-a836-4901-b175-2d1182dab6f5","bd4242ce-e84f-4387-9c41-c90e7d1fc6fa","ba33b4c1-47f0-4aa2-9e3a-fcf96229d355","ade4558f-5438-4383-b42b-728e8a745cc8","ad064258-2178-48f8-845c-ac1ce0217be8","acefb7fd-11c7-4a43-9544-b4fb461db94c","909b6a0a-4efc-4464-90ac-b8b9a8f22fc2","8a03c1e7-3991-4cca-8726-88c339766144","860eb891-b9eb-44ba-94c1-51cfc2be9dd9","719e09ae-5513-4cc3-bce1-97503a0a7658","6fcd99e7-2206-4c45-86aa-411a87b7fcac","235592cc-47c7-49cc-82e4-129f5333cc45","2214404d-3140-44bf-9c9d-438fa56b5a50"],feCategory:!0},{id:"2d7b4be7-8269-4ff4-81d6-0c92e95790d5",name:"Email integration",description:"Connectivity email integration",createdAt:new Date,updatedAt:new Date,permissionIds:["9a0bb3db-8bdb-4278-8f18-9c484bcd2f8c","440f5616-ad85-43d1-b25d-1fd7930c6d26","2a5dcd6d-57a3-45c4-815f-c265609cc1f7"],feCategory:!0},{id:"31c7a260-55d6-43d5-a872-4f9e22982ff5",name:"Events",description:"Connectivity Events",createdAt:new Date,updatedAt:new Date,permissionIds:["85c90d0f-3bb0-40c0-914a-640c7ca9eea5","750a96a5-8abf-4340-b91a-723c7bb8bcfd","4fee0eb0-5b17-450b-bea4-b9b908230bda"],feCategory:!0},{id:"42aaebe1-893d-4da5-99d7-375a4537b7a4",name:"Account settings",description:"Account profile settings",createdAt:new Date,updatedAt:new Date,permissionIds:["f26b00f8-ffe0-4739-b15c-7db15c27ea26","eb11313d-c7bb-43c0-a85d-c79bedab46b1","a9c803b0-ebfa-49b9-9607-f0d3a390ee61","634d3fab-b470-4a92-a25b-245459ddd6db"],feCategory:!0},{id:"62fc3fe0-f06b-4a0f-854c-cdf51353b616",name:"Slack integration",description:"Connectivity Slack integration",createdAt:new Date,updatedAt:new Date,permissionIds:["f403c6b9-1abe-4ec7-9971-aa032255fc25","ef2a5f1a-74c5-431f-b1a6-d4fb5026e374","e3231a61-e425-4ac1-aa87-654ab995af5c","9fc1fa37-a8b9-4931-b2b5-5de55df25289","87c3df9d-0ab2-4e97-bfc8-777a68ba2543","7993a558-0af5-4d77-b9fc-8e8114f0ce0b","7826470b-151f-4bab-b2c0-785e09878616","5b0323d1-a0a0-4d4f-9bb8-b1634d9afa94","4245736e-13b0-48fd-9a08-bc93809dcdaf","2fccccb1-36f5-4c5c-8d93-73ab15d0b2d9"],feCategory:!0},{id:"6b925df5-8b09-470a-9fcc-dae0beae1af4",name:"Audits",description:"Audit Logs",createdAt:new Date,updatedAt:new Date,permissionIds:["97085bb5-bec7-49eb-9744-4d35bbb83ad3"],feCategory:!0},{id:"77154759-0a04-4669-b6b4-0858d3c1190e",name:"Secure access",description:"Secure access general",createdAt:new Date,updatedAt:new Date,permissionIds:["925e0c16-aead-41e6-b62f-8ddb2ea4ed06","8d71b676-754c-4600-afe7-ca5add1e6809","1c81d4ca-47a2-4564-b9d9-9d346b8cdbe7","04dbcc11-61db-40a9-9577-9b73e50d1d03"],feCategory:!0},{id:"916d6db5-489e-4109-95cf-57dee7802c57",name:"Webpush integration",description:"Webpush notifications integration",createdAt:new Date,updatedAt:new Date,permissionIds:["e5a7bbd3-f76b-4559-979d-885c5c75f72f","cb47ea6f-0a59-4694-97d0-9c32f6732e85"],feCategory:!0},{id:"9707ef7f-afd3-4d1f-962e-68c0d876db53",name:"Subscriptions",description:"Subscriptions access general",createdAt:new Date,updatedAt:new Date,permissionIds:["ce03de78-a7f4-4498-acce-df4aae30ed0d","ae81dd56-2f94-4da8-9c16-b6c781b0dcb7","72e55675-ea98-4f1a-85f0-09319cdcbcbf"],feCategory:!0},{id:"a71e2e14-0cdb-42df-b297-d00af2d4e62e",name:"Users management",description:"Secure access users management",createdAt:new Date,updatedAt:new Date,permissionIds:["e7263c99-874f-4e17-8d63-25ae3d9f5739","db957d5f-4048-4011-bcb4-5d21af0560e4","c52b0a96-dcff-4fba-aa8e-ce3a7336bde2","bc754ce1-ebbe-446a-bb84-4f287be0651c","998756c3-773a-4771-b7a5-510e795fb5f4","88565631-dc77-472c-b1d9-18674483c24b","6b84ddeb-a242-48c5-bf2a-62105315518a","61874f64-2204-4eec-8f02-0d38bd5a66b8","4c47caae-d384-48bb-99bc-554aafa2888f","43695880-d40e-412d-b342-434d58c5c8ca","4003ac5b-326c-4dc2-afb1-8900e16ee443","007c612d-5184-4f04-846e-d49c6591de0c"],feCategory:!0},{id:"c058e114-917c-4ad1-940e-11e9cc40b638",name:"Roles and permissions",description:"Secure access roles and permissions",createdAt:new Date,updatedAt:new Date,permissionIds:["c89960c8-6d67-44fa-a3aa-1a6826f45b0d","93be3a9a-98a2-48b8-a146-a223e457c904","80e49f9a-7628-4efc-913b-5f80ca92f106","7f2576d6-cbbb-4c7b-bb70-d75a88d9ce47","6a337814-34e5-4c24-a56f-d462c1db218b"],feCategory:!0},{id:"c38e9f59-ff65-4f9f-a31d-0bbfc44df347",name:"Groups",description:"Secure access groups",createdAt:new Date,updatedAt:new Date,permissionIds:["e1907e68-877d-4f2d-a266-d54e143c3c0c","7a17405a-6c4b-4053-9843-f9d5e3af9e00","5ee7bb2d-aad4-497f-94d2-9e255c470882","4c406972-c815-46a9-8f47-9708adc334b8","399bff45-aa24-49ae-9357-5f05a5eef3a5","0037b3ad-5f77-4157-aa33-33c92b5fe057"],feCategory:!0},{id:"d18fccaa-e09a-4e6e-b902-cc9c615ff12d",name:"Connectivity",description:"Connectivity general",createdAt:new Date,updatedAt:new Date,permissionIds:["e8c0e727-f562-449a-82c5-f7691defde02","c88bf74a-66a4-48c2-bc1b-2e2aa057858d","a43e059d-d731-44b1-94bb-fb6b16c62210","3f118e4c-badd-45d1-8056-3f3428be92ca"],feCategory:!0},{id:"d24db1e3-002b-421d-951d-09a967dd7cd5",name:"Account Hierarchy",description:"Account hierarchy",createdAt:new Date,updatedAt:new Date,permissionIds:["b6e66e0f-c6d2-4113-865a-57d08b1dec45","a1807695-54a2-4f95-95de-a9b246488aae","85e1fd7b-2bb7-498f-8521-5f8e5774c01e","60cfedb4-64ca-40d1-8b3a-4288bcde1209"],feCategory:!0},{id:"e74e5390-396b-429c-9544-62417912d018",name:"Webhooks integration",description:"Connectivity webhooks integration",createdAt:new Date,updatedAt:new Date,permissionIds:["996e42ed-b1d8-4e36-aa76-58091c56bdf7","8e7014d4-13fa-439a-a313-a2b9141f8b47","2dfde8ef-7df2-4426-bb8d-33615e399a4d","16647407-ed6f-4ca6-83a0-86225d921959"],feCategory:!0},{id:"e8af2833-1bbf-4ccf-8658-f6e0c60621b9",name:"API tokens",description:"Secure access API tokens",createdAt:new Date,updatedAt:new Date,permissionIds:["f03dc571-0769-4bcf-9c51-776b81582a14","c395932b-c732-41ad-bec6-ced7602bf79e","94351961-e9c8-4c63-8818-ae8481ceab22","5a744287-d01e-4a7a-8a37-2ce212ce5ff5","0cf97f9f-84dc-4dfc-bf41-2ad4b6c072e9","0c8cdac0-b364-4ab6-9737-7aa43f944013"],feCategory:!0}];let vg,hg,mg;!function(e){e.SOCIAL_LOGIN="SOCIAL_LOGIN",e.PASSWORDLESS="PASSWORDLESS",e.ACTIVATION_LINK="ACTIVATION_LINK"}(vg||(vg={})),function(e){e.SOCIAL_LOGIN="SOCIAL_LOGIN",e.PASSWORD="PASSWORD"}(hg||(hg={})),function(e){e.profile="profile",e.privacy="privacy",e.personalApiTokens="personalApiTokens",e.account="account",e.users="users",e.groups="groups",e.security="security",e.sso="sso",e.audits="audits",e.webhooks="webhooks",e.apiTokens="apiTokens",e.roles="roles",e.subscriptions="subscription",e.allAccounts="allAccounts"}(mg||(mg={})),mg.profile,mg.privacy,mg.personalApiTokens,mg.account,mg.users,mg.groups,mg.security,mg.sso,mg.audits,mg.webhooks,mg.apiTokens,mg.roles,mg.subscriptions,mg.allAccounts;const bg=e=>{try{return new URL(e),!0}catch(e){return!1}},Ag=e=>{const{searchParams:t}=new URL(e),n=t.toString();if(n)return`?${n}`},Tg=e=>{const t=new URLSearchParams(window.location.search).get(e);return null!=t?t:void 0},Eg="tenantId",kg=e=>e.mfaRequired&&e.mfaToken?(Vo.setAccessToken(null),Vo.setUser(null),!0):(Vo.setAccessToken(e.accessToken),Vo.setUser(e),!1),Ig=e=>{const{numberOfPhoneDevices:t,numberOfAuthenticators:n,numberOfEmails:a,totalDevices:i}=(e=>{const t=+Boolean(e.webauthn.length),n=+Boolean(e.phones.length),a=+Boolean(e.authenticators.length),i=+Boolean(e.emails.length);return{numberOfWebAuthnDevices:t,numberOfPhoneDevices:n,numberOfAuthenticators:a,numberOfEmails:i,totalDevices:t+n+a+i}})(e);if(1===i){if(n)return dn.authenticatorApp;if(t)return dn.smsVerifyCode;if(a)return dn.emailVerifyCode}return dn.verify},Og=e=>{if(1===e.length){const[t]=e;if(t===Ws.AuthenticatorApp)return dn.authenticatorApp;if(t===Ws.SMS)return dn.smsSetPhoneNumber;if(t===Ws.EmailCode)return dn.emailVerifyCode}return dn.verify};function*Pg(e){let t=_t.loginWithTwoFactor,n={};const{loginState:a}=yield zi((e=>e.auth)),{isAllowedToRemember:i,mfaDeviceExpiration:o}=yield ji(dp.auth.checkIfAllowToRememberMfaDevice,e.mfaToken);!e.hasOwnProperty("mfaEnrolled")||e.mfaEnrolled?n={mfaDevices:e.mfaDevices,step:Ig(e.mfaDevices)}:(n={step:Og(e.mfaStrategies),qrCode:e.qrCode,recoveryCode:e.recoveryCode,loading:!1,mfaToken:e.mfaToken,mfaStrategies:e.mfaStrategies},t=_t.forceTwoFactor);let r={};const s=localStorage.getItem("register-quick-login");return s&&(r={quickLoginToRegister:s,flow:Lt.RegisterQuickLogin}),{user:void 0,isAuthenticated:!1,mfaState:n,loginState:G({},a,r,{mfaToken:e.mfaToken,mfaRequired:e.mfaRequired,loading:!1,error:void 0,step:t,tenantsLoading:!0,email:e.userEmail,tenants:[],allowRememberMfaDevice:i,mfaDeviceExpiration:o,isBreachedPassword:e.isBreachedPassword})}}const _g=(e,t)=>e?(e=>Boolean(null==e?void 0:e.statusCode))(e)?e.message:((e=>e instanceof Error||(null==e?void 0:e.message)&&(null==e?void 0:e.stack)&&"Error"===(null==e?void 0:e.name))(e)?console.error(e.message):"string"==typeof e&&console.error(e),null!=t?t:"We're facing some difficulties, Please try again"):t;let Lg;function wg(e,t){var n,a;null==(n=(a=window).onFronteggEvent)||n.call(a,e,t)}!function(e){e.SIGNUP_COMPLETED="signup_completed",e.USER_VERIFIED="user_verified"}(Lg||(Lg={}));const Dg=(e,t=[])=>Object.entries(e).reduce(((e,[n,a])=>"object"==typeof a?[...e,...Dg(a,[...t,n])]:[...e,{type:[...t,n].join("/"),payload:a}]),[]),Ug=["callback"];function*Rg(){yield $i(ja.setCustomLoginState({loading:!0}));try{const e=yield ji(dp.metadata.getAdminBoxMetadata);yield $i(ja.setCustomLoginState({tenantMetadata:e,loading:!1}))}catch(e){yield $i(ja.setCustomLoginState({loading:!1,error:_g(e)}))}}function*Cg(e){let{payload:{callback:t}}=e,n=ti(e.payload,Ug);try{yield $i(ja.setCustomLoginState({error:null,saving:!0}));const e=Dg(n);if(0===e.length)throw new Error("No changes to update");yield ji(dp.metadata.updateAdminBoxMetadata,{actions:e});const a=yield ji(dp.metadata.getAdminBoxMetadata);yield $i(ja.setCustomLoginState({tenantMetadata:a,saving:!1})),null==t||t(!0)}catch(e){yield $i(ja.setCustomLoginState({error:_g(e,"No changes to update"),saving:!1})),null==t||t(null,e)}}function*Ng(){return!!(yield ji(Mg))}function*Mg(){const e=Vo.getContext();if(null==e||!e.tenantResolver)return;const t=yield e.tenantResolver();if(null!=t&&t.tenant)return t.tenant;const{customLoginAlias:n,hasCustomLogin:a}=yield zi((e=>{var t,n;const a=null==(t=e.auth)||null==(n=t.tenantsState)?void 0:n.activeTenant;return{customLoginAlias:null==a?void 0:a.alias,hasCustomLogin:null==a?void 0:a.hasCustomLogin}}));return a?n:void 0}function*Fg(){try{var e;if(!(yield ji(Ng)))return;const t=yield zi((e=>e.auth.isAuthenticated)),{getSettings:n,getPublicSettings:a}=dp.accountSettings,{applicationUrl:i}=yield ji(t?n:a);if(!i)return;const{routes:o}=yield zi((e=>e.auth)),r=null!=(e=Ag(i))?e:"";yield $i(ja.setState({routes:G({},o,{customLoginAuthenticatedUrl:i,customLoginUrl:o.loginUrl+r})})),yield $i(ja.setCustomLoginState({customLoginSearchParams:null!=r?r:void 0}))}catch{}}function*Gg(){yield xo(ja.loadTenantMetadata,Rg),yield xo(ja.updateTenantMetadata,Cg)}let $g;!function(e){e.RECOMMENDATIONS="recommendations",e.INSIGHTS="insights",e.SEND_BULK_RESET_BREACHED_PASSWORD_EMAILS="sendBulkResetBreachedPasswordEmails",e.SEND_BREACHED_PASSWORD_EMAIL="sendBreachedPasswordEmail",e.BREACHED_PASSWORD_USERS_TABLE="breachedPasswordUsersTable",e.UNENROLLED_MFA_USERS_TABLE="unenrolledMfaUsersTable",e.INACTIVE_USERS_TABLE="inactiveUsersTable"}($g||($g={}));const xg=["callback"];function Vg(e){return function*(t){const[n]=yield ji(Dp,["security-center-admin-portal-major-version"]);yield e(t),n&&(yield jg(),yield Bg())}}function*jg(){const e=$g.RECOMMENDATIONS;yield $i(ja.setSecurityCenterStateLoader({key:e,value:!0}));try{var t;const{recommendations:n,scoring:a}=yield ji(dp.securityCenter.getRecommendations);yield $i(ja.setSecurityCenterState({recommendations:n.items,score:null!=(t=null==a?void 0:a.score)?t:0}))}catch(t){yield $i(ja.setSecurityCenterStateError({key:e,value:_g(t)}))}finally{yield $i(ja.setSecurityCenterStateLoader({key:e,value:!1}))}}function*Bg(){const e=$g.INSIGHTS;yield $i(ja.setSecurityCenterStateLoader({key:e,value:!0}));try{const{insights:t}=yield ji(dp.securityCenter.getInsights);yield $i(ja.setSecurityCenterState({insights:t.items}))}catch(t){yield $i(ja.setSecurityCenterStateError({key:e,value:_g(t)}))}finally{yield $i(ja.setSecurityCenterStateLoader({key:e,value:!1}))}}function*Wg(e){let{payload:{callback:t}}=e,n=ti(e.payload,xg);const a=$g.SEND_BREACHED_PASSWORD_EMAIL;yield $i(ja.setSecurityCenterStateError({key:a,value:!1})),yield $i(ja.setSecurityCenterStateLoader({key:a,value:!0}));try{yield ji(dp.auth.forgotPassword,n),null==t||t(!0)}catch(e){yield $i(ja.setSecurityCenterStateError({key:a,value:_g(e)})),null==t||t(!1,e)}finally{yield $i(ja.setSecurityCenterStateLoader({key:a,value:!1}))}}function*zg({payload:{callback:e}}){const t=$g.SEND_BULK_RESET_BREACHED_PASSWORD_EMAILS;yield $i(ja.setSecurityCenterStateError({key:t,value:!1})),yield $i(ja.setSecurityCenterStateLoader({key:t,value:!0}));try{yield ji(dp.users.sendResetBreachedPasswordEmails),null==e||e(!0)}catch(n){yield $i(ja.setSecurityCenterStateError({key:t,value:_g(n)})),null==e||e(!1)}finally{yield $i(ja.setSecurityCenterStateLoader({key:t,value:!1}))}}function*Kg({key:e,tableState:t,updateStateKey:n,_offset:a,_limit:i,_preset:o,_email:r,_maxInactiveSeconds:s}){var l,c,d,u;yield $i(ja.setSecurityCenterStateError({key:e,value:!1})),yield $i(ja.setSecurityCenterStateLoader({key:e,value:!0}));const y=null!=(l=null!=a?a:null==t||null==(c=t.queryParams)?void 0:c._offset)?l:0,f=null!=(d=null!=i?i:null==t||null==(u=t.queryParams)?void 0:u._limit)?d:10,p=G({_offset:y,_limit:f,_includeSubTenants:!1,_preset:o,_maxInactiveSeconds:s},!!r&&{_email:r});try{const{items:t,_metadata:{totalItems:a,totalPages:i}}=yield ji(dp.users.getUsersV3,p),o={totalUsersItems:a,totalUsersPages:i,usersPageOffset:y,queryParams:G({_offset:y,_limit:f,_maxInactiveSeconds:s},!!r&&{_email:r})};if(t.length){const e=yield function*(e){const t=e.map((e=>e.id)),n=yield ji(dp.roles.getRoles),a=yield ji(dp.users.getUsersRoles,{ids:t});return e.map((e=>{var t,i;const o=null==a||null==(t=a.find((t=>t.userId===e.id)))?void 0:t.roleIds;return G({},e,{roles:null!=(i=null==o?void 0:o.map((e=>{var t;return null!=(t=null==n?void 0:n.find((t=>t.id===e)))?t:[]})))?i:[]})}))}(t);yield $i(ja.setSecurityCenterState({[n]:G({users:e},o)}))}else yield $i(ja.setSecurityCenterState({[n]:G({users:[]},o)}))}catch(t){yield $i(ja.setSecurityCenterStateError({key:e,value:_g(t)}))}finally{yield $i(ja.setSecurityCenterStateLoader({key:e,value:!1}))}}function*Hg({payload:e}){var t;const n=$g.BREACHED_PASSWORD_USERS_TABLE,a=yield null!=(t=zi((e=>{var t;return null==(t=e.auth.securityCenterState)?void 0:t.breachedPasswordUsersTable})))?t:{};yield Kg(G({key:n,updateStateKey:"breachedPasswordUsersTable",_preset:pa.BREACHED_PASSWORDS,tableState:a},e))}function*qg({payload:e}){var t;const n=$g.UNENROLLED_MFA_USERS_TABLE,a=yield null!=(t=zi((e=>{var t;return null==(t=e.auth.securityCenterState)?void 0:t.unenrolledMfaUsersTable})))?t:{};yield Kg(G({key:n,updateStateKey:"unenrolledMfaUsersTable",_preset:pa.MFA_UNENROLLED,tableState:a},e))}function*Jg({payload:e}){var t;const n=$g.INACTIVE_USERS_TABLE,a=yield null!=(t=zi((e=>{var t;return null==(t=e.auth.securityCenterState)?void 0:t.inactiveUsersTable})))?t:{};yield Kg(G({key:n,updateStateKey:"inactiveUsersTable",_preset:pa.INACTIVE,tableState:a},e))}function*Yg(){yield Go(ja.loadRecommendations,jg),yield Go(ja.loadInsights,Bg),yield Go(ja.sendResetBreachedPasswordEmail,Wg),yield Go(ja.sendBulkResetBreachedPasswordEmails,zg),yield Go(ja.loadBreachedPasswordUsers,Hg),yield Go(ja.loadUnenrolledMfaUsers,qg),yield Go(ja.loadInactiveUsers,Jg)}function*Xg(){const e=$g.RECOMMENDATIONS;yield $i(ja.setSecurityCenterStateLoader({key:e,value:!0})),yield Ki(500),yield $i(ja.setSecurityCenterState({recommendations:dg.recommendations.items,score:dg.scoring.score})),yield $i(ja.setSecurityCenterStateLoader({key:e,value:!1}))}function*Qg(){const e=$g.INSIGHTS;yield $i(ja.setSecurityCenterStateLoader({key:e,value:!0})),yield Ki(500),yield $i(ja.setSecurityCenterState({insights:ug.insights.items})),yield $i(ja.setSecurityCenterStateLoader({key:e,value:!1}))}function*Zg(){const e=$g.BREACHED_PASSWORD_USERS_TABLE;yield $i(ja.setSecurityCenterStateLoader({key:e,value:!0})),yield Ki(500),yield $i(ja.setSecurityCenterState({breachedPasswordUsersTable:yg})),yield $i(ja.setSecurityCenterStateLoader({key:e,value:!1}))}function*eS(){const e=$g.UNENROLLED_MFA_USERS_TABLE;yield $i(ja.setSecurityCenterStateLoader({key:e,value:!0})),yield Ki(500),yield $i(ja.setSecurityCenterState({unenrolledMfaUsersTable:pg})),yield $i(ja.setSecurityCenterStateLoader({key:e,value:!1}))}function*tS(){const e=$g.INACTIVE_USERS_TABLE;yield $i(ja.setSecurityCenterStateLoader({key:e,value:!0})),yield Ki(500),yield $i(ja.setSecurityCenterState({inactiveUsersTable:fg})),yield $i(ja.setSecurityCenterStateLoader({key:e,value:!1}))}function*nS({payload:{callback:e}}){const t=$g.SEND_BREACHED_PASSWORD_EMAIL;yield $i(ja.setSecurityCenterStateLoader({key:t,value:!0})),yield Ki(500),null==e||e(!0),yield $i(ja.setSecurityCenterStateLoader({key:t,value:!1}))}function*aS(){yield Go(ja.loadRecommendations,Xg),yield Go(ja.loadInsights,Qg),yield Go(ja.loadBreachedPasswordUsers,Zg),yield Go(ja.loadUnenrolledMfaUsers,eS),yield Go(ja.loadInactiveUsers,tS),yield Go(ja.sendResetBreachedPasswordEmail,nS)}const iS=["callback"],oS=["callback"],rS=["callback"],sS=["callback"],lS=["callback"],cS=["callback"];function*dS(){yield $i(ja.setSecurityPolicyGlobalState({loading:!0,error:null}));try{const e=yield ji(dp.auth.getGlobalSecurityPolicy);yield $i(ja.setSecurityPolicyGlobalState({policy:e,loading:!1}))}catch(e){yield $i(ja.setSecurityPolicyGlobalState({error:_g(e),loading:!1}))}yield $i(ja.loadSecurityPolicyMfa()),yield $i(ja.loadSecurityPolicyVendorMfa()),yield $i(ja.loadSecurityPolicyLockout()),yield $i(ja.loadSecurityPolicyVendorLockout()),yield $i(ja.loadSecurityPolicyVendorPasswordHistory()),yield $i(ja.loadSecurityPolicyCaptcha()),yield $i(ja.loadPublicAuthStrategiesPolicy())}function*uS(e){var t,n;if(!(yield ji(Ng)))return e;const a=yield ji(fS);return null!=a&&null!=(t=a.mainAuthStrategies)&&null!=(n=t[0])&&n.strategy?G({},e,{authStrategy:a.mainAuthStrategies[0].strategy}):e}function*yS(){yield $i(ja.setSecurityPolicyPublicState({loading:!0,error:null}));try{const e=yield ji(dp.auth.getVendorConfig),t=yield uS(e);yield $i(ja.setSecurityPolicyPublicState({policy:t,loading:!1}))}catch(e){yield $i(ja.setSecurityPolicyPublicState({error:_g(e),loading:!1}))}}function*fS(){const e=yield zi((({auth:e})=>e.isAuthenticated));let t;return t=e?yield ji(dp.auth.getPublicAuthStrategiesConfigForAuthenticatedUser):yield ji(dp.auth.getVendorPublicAuthStrategiesConfig),t}function*pS(){yield $i(ja.setSecurityPolicyAuthStrategyPublicState({loading:!0,error:null}));try{var e,t;const n=yield ji(fS);yield function*(e){const t=yield ji(Ng);if(!e||!t)return;const{policy:n}=yield zi((({auth:e})=>{var t;return null==(t=e.securityPolicyState)?void 0:t.publicPolicy}));yield $i(ja.setSecurityPolicyPublicState({policy:G({},n,{authStrategy:e}),loading:!1}))}(null==n||null==(e=n.mainAuthStrategies)||null==(t=e[0])?void 0:t.strategy),yield $i(ja.setSecurityPolicyAuthStrategyPublicState({policy:n,loading:!1}))}catch(e){yield $i(ja.setSecurityPolicyAuthStrategyPublicState({error:_g(e),loading:!1}))}}function*gS(){yield $i(ja.setSecurityPolicyMfaState({loading:!0,error:null}));try{const e=yield ji(dp.auth.getMfaPolicy);yield $i(ja.setSecurityPolicyMfaState({policy:e,loading:!1}))}catch(e){yield $i(ja.setSecurityPolicyMfaState({error:_g(e),loading:!1}))}}function*SS(){yield $i(ja.setSecurityPolicyMfaState({loading:!0,error:null}));try{const e=yield ji(dp.auth.getVendorMfaPolicy);yield $i(ja.setSecurityPolicyVendorMfaState({policy:e,loading:!1}))}catch(e){yield $i(ja.setSecurityPolicyVendorMfaState({error:_g(e),loading:!1}))}}function*vS(e){let{payload:{callback:t}}=e,n=ti(e.payload,iS);yield $i(ja.setSecurityPolicyMfaState({saving:!0,error:null}));try{const e=yield ji(dp.auth.saveMfaPolicy,n);yield $i(ja.setSecurityPolicyMfaState({policy:e,saving:!1})),null==t||t(e)}catch(e){yield $i(ja.setSecurityPolicyMfaState({saving:!1,error:_g(e)})),null==t||t(null,e)}}function*hS(){yield $i(ja.setSecurityPolicyLockoutState({loading:!0,error:null}));try{const e=yield ji(dp.auth.getLockoutPolicy);yield $i(ja.setSecurityPolicyLockoutState({policy:e,loading:!1}))}catch(e){yield $i(ja.setSecurityPolicyLockoutState({error:_g(e),loading:!1}))}}function*mS(e){let{payload:{callback:t}}=e,n=ti(e.payload,oS);yield $i(ja.setSecurityPolicyLockoutState({saving:!0,error:null}));try{const e=yield ji(dp.auth.saveLockoutPolicy,n);yield $i(ja.setSecurityPolicyLockoutState({policy:e,saving:!1})),null==t||t(e)}catch(e){yield $i(ja.setSecurityPolicyLockoutState({saving:!1,error:_g(e)})),null==t||t(null,e)}}function*bS(){yield $i(ja.setSecurityPolicyVendorLockoutState({loading:!0,error:null}));try{const e=yield ji(dp.auth.getVendorLockoutPolicy);yield $i(ja.setSecurityPolicyVendorLockoutState({policy:e,loading:!1}))}catch(e){yield $i(ja.setSecurityPolicyVendorLockoutState({error:_g(e),loading:!1}))}}function*AS(){yield $i(ja.setSecurityPolicyLockoutState({loading:!0,error:null}));try{const e=yield ji(dp.auth.getCaptchaPolicy);yield $i(ja.setSecurityPolicyCaptchaState({policy:e,loading:!1}))}catch(e){yield $i(ja.setSecurityPolicyCaptchaState({error:_g(e),loading:!1}))}}function*TS(){yield $i(ja.setSecurityPolicyPasswordHistoryState({loading:!0,error:null}));try{const e=yield ji(dp.auth.getPasswordHistoryPolicy);yield $i(ja.setSecurityPolicyPasswordHistoryState({policy:e,loading:!1}))}catch(e){yield $i(ja.setSecurityPolicyPasswordHistoryState({error:_g(e),loading:!1}))}}function*ES(){yield $i(ja.setSecurityPolicyVendorPasswordHistoryState({loading:!0,error:null}));try{const e=yield ji(dp.auth.getVendorPasswordHistoryPolicy);yield $i(ja.setSecurityPolicyVendorPasswordHistoryState({policy:e,loading:!1}))}catch(e){yield $i(ja.setSecurityPolicyVendorPasswordHistoryState({error:_g(e),loading:!1}))}}function*kS(e){let{payload:{callback:t}}=e,n=ti(e.payload,rS);yield $i(ja.setSecurityPolicyPasswordHistoryState({saving:!0,error:null}));try{const e=yield ji(dp.auth.savePasswordHistoryPolicy,n);yield $i(ja.setSecurityPolicyPasswordHistoryState({policy:e,saving:!1})),null==t||t(e)}catch(e){yield $i(ja.setSecurityPolicyPasswordHistoryState({saving:!1,error:_g(e)})),null==t||t(null,e)}}function*IS(){yield $i(ja.setSecurityPolicyPasswordState({loading:!0,error:null}));try{const e=yield ji(dp.auth.getPasswordConfigPolicy);yield $i(ja.setSecurityPolicyPasswordState({policy:e,loading:!1}))}catch(e){yield $i(ja.setSecurityPolicyPasswordState({error:_g(e),loading:!1}))}}function*OS(){yield xo(ja.loadSecurityPolicy,dS),yield Go(ja.saveSecurityPolicyMfa,Vg(vS)),yield Go(ja.loadSecurityPolicyMfa,gS),yield Go(ja.loadSecurityPolicyVendorMfa,SS),yield Go(ja.saveSecurityPolicyLockout,Vg(mS)),yield Go(ja.loadSecurityPolicyLockout,hS),yield Go(ja.loadSecurityPolicyVendorLockout,bS),yield Go(ja.loadSecurityPolicyCaptcha,AS),yield Go(ja.saveSecurityPolicyPasswordHistory,Vg(kS)),yield Go(ja.loadSecurityPolicyPasswordHistory,TS),yield Go(ja.loadSecurityPolicyVendorPasswordHistory,ES),yield Go(ja.loadVendorPasswordConfig,IS),yield Go(ja.loadPublicSecurityPolicy,yS),yield Go(ja.loadPublicAuthStrategiesPolicy,pS)}function*PS(){yield $i(ja.setSecurityPolicyPublicState({loading:!0,error:null}));try{yield $i(ja.setSecurityPolicyPublicState({policy:$p,loading:!1}))}catch(e){yield $i(ja.setSecurityPolicyPublicState({error:_g(e),loading:!1}))}}function*_S(){yield $i(ja.setSecurityPolicyGlobalState({loading:!0,error:null})),yield Et(),yield $i(ja.setSecurityPolicyGlobalState({policy:Gp,loading:!1})),yield $i(ja.loadSecurityPolicyMfa()),yield $i(ja.loadSecurityPolicyVendorMfa()),yield $i(ja.loadSecurityPolicyLockout()),yield $i(ja.loadSecurityPolicyVendorLockout()),yield $i(ja.loadSecurityPolicyPasswordHistory()),yield $i(ja.loadSecurityPolicyVendorPasswordHistory()),yield $i(ja.loadSecurityPolicyCaptcha())}function*LS(){yield $i(ja.setSecurityPolicyMfaState({loading:!0,error:null})),yield Et(),yield $i(ja.setSecurityPolicyMfaState({policy:xp,loading:!1}))}function*wS(){yield $i(ja.setSecurityPolicyVendorMfaState({loading:!0,error:null})),yield Et(),yield $i(ja.setSecurityPolicyVendorMfaState({policy:xp,loading:!1}))}function*DS(e){var t;let{payload:{callback:n}}=e,a=ti(e.payload,sS);yield $i(ja.setSecurityPolicyMfaState({saving:!0,error:null}));const i=G({},Vp,{id:null!=(t=a.id)?t:Vp.id,enforceMFAType:a.enforceMFAType});yield Et(),yield $i(ja.setSecurityPolicyMfaState({policy:i,saving:!1})),null==n||n(i)}function*US(){yield $i(ja.setSecurityPolicyLockoutState({loading:!0,error:null})),yield Et(),yield $i(ja.setSecurityPolicyLockoutState({policy:Vp,loading:!1}))}function*RS(){yield $i(ja.setSecurityPolicyVendorLockoutState({loading:!0,error:null})),yield Et(),yield $i(ja.setSecurityPolicyVendorLockoutState({policy:Vp,loading:!1}))}function*CS(e){let{payload:{callback:t}}=e,n=ti(e.payload,lS);yield $i(ja.setSecurityPolicyLockoutState({saving:!0,error:null})),yield Et();const a=G({},Vp,n,{id:n.id?n.id:Vp.id});null==t||t(a),yield $i(ja.setSecurityPolicyLockoutState({policy:a,saving:!1}))}function*NS(){yield $i(ja.setSecurityPolicyLockoutState({loading:!0,error:null})),yield Et(),yield $i(ja.setSecurityPolicyLockoutState({policy:Vp,loading:!1}))}function*MS(){yield $i(ja.setSecurityPolicyPasswordHistoryState({loading:!0,error:null})),yield Et(),yield $i(ja.setSecurityPolicyPasswordHistoryState({policy:jp,loading:!1}))}function*FS(){yield $i(ja.setSecurityPolicyVendorPasswordHistoryState({loading:!0,error:null})),yield Et(),yield $i(ja.setSecurityPolicyVendorPasswordHistoryState({policy:jp,loading:!1}))}function*GS(e){let{payload:{callback:t}}=e,n=ti(e.payload,cS);yield $i(ja.setSecurityPolicyPasswordHistoryState({saving:!0,error:null})),yield Et();const a=G({},jp,n,{id:n.id?n.id:jp.id});null==t||t(a),yield $i(ja.setSecurityPolicyPasswordHistoryState({policy:a,saving:!1}))}function*$S(){yield xo(ja.loadSecurityPolicy,_S),yield Go(ja.loadPublicSecurityPolicy,PS),yield Go(ja.saveSecurityPolicyMfa,DS),yield Go(ja.loadSecurityPolicyMfa,LS),yield Go(ja.loadSecurityPolicyVendorMfa,wS),yield Go(ja.saveSecurityPolicyLockout,CS),yield Go(ja.loadSecurityPolicyLockout,US),yield Go(ja.loadSecurityPolicyVendorLockout,RS),yield Go(ja.loadSecurityPolicyCaptcha,NS),yield Go(ja.saveSecurityPolicyPasswordHistory,GS),yield Go(ja.loadSecurityPolicyPasswordHistory,MS),yield Go(ja.loadSecurityPolicyVendorPasswordHistory,FS)}const xS=["phoneNumber"],VS=["events","url"];function*jS(){yield $i(ja.setSignUpState({loading:!0}));try{const e=yield ji(dp.auth.getVendorConfig),t=yield uS(e),{allowSignups:n,allowNotVerifiedUsersLogin:a}=e;yield $i(ja.setSignUpState({loading:!1,allowSignUps:n,allowNotVerifiedUsersLogin:a,firstLoad:!1})),yield $i(ja.setSecurityPolicyPublicState({policy:t,loading:!1}))}catch(e){yield $i(ja.setSignUpState({loading:!1,error:_g(e),firstLoad:!1}))}}function*BS(e){let{payload:{events:t,url:n}}=e,a=ti(e.payload,VS);yield $i(ja.setSignUpState({loading:!0}));try{const{routes:e,onRedirectTo:r}=yield zi((e=>e.auth)),{shouldActivate:s,user:l,tenantId:c,userId:d,tenants:u=[],activeTenant:y}=yield ji(dp.auth.signUpUser,(o=a,ti(o,xS)));if(!a.invitationToken){var i;const{email:e,name:o,companyName:r,phoneNumber:s}=a,l={email:e,name:o,companyName:r,url:n,phoneNumber:s||void 0,authenticationType:hg.PASSWORD,id:d,tenantId:c,createdAt:new Date};null==t||null==(i=t.signUpComplete)||i.call(t,l),wg(Lg.SIGNUP_COMPLETED,l)}if(!s&&l&&kg(l)){const t=yield Pg(l);yield $i(ja.setState(t)),r(e.loginUrl)}else{const{tenantsState:e}=yield zi((e=>e.auth));yield $i(ja.setSignUpState({loading:!1,shouldActivate:s,stage:bn.SignUpSuccess})),yield $i(ja.setState({user:l,isAuthenticated:!(null==l||!l.accessToken),tenantsState:G({},e,{tenants:u,activeTenant:y})}))}}catch(e){Vo.setAccessToken(null),Vo.setUser(null),yield $i(ja.setSignUpState({loading:!1,error:_g(e)}))}var o;yield $i(ja.setSignUpState({loading:!1}))}function*WS(){const{allowSignUps:e,allowNotVerifiedUsersLogin:t}=yield zi((e=>e.auth.signUpState));yield $i(ja.resetSignUpState()),yield $i(ja.setSignUpState({allowSignUps:e,allowNotVerifiedUsersLogin:t}))}function*zS(){yield xo(ja.signUpUser,BS),yield xo(ja.resetSignUpStateSoft,WS)}const KS={setVendorState:(e,{payload:t})=>G({},e,t)},HS={loadVendorPublicInfo:yt("vendor/loadVendorPublicInfo")},qS={loading:!1},{reducer:JS,actions:YS}=pt({name:Ft,initialState:qS,reducers:G({},KS)}),XS=G({},YS,HS);function*QS(){yield $i(XS.setVendorState({loading:!0}));try{const{whiteLabelMode:e=!1}=yield dp.vendor.getVendorPublicInfo();yield $i(XS.setVendorState({whiteLabelMode:e,loading:!1}))}catch(e){yield $i(XS.setVendorState({loading:!1})),console.error("failed to getVendorPublicInfo - ",e)}}var ZS=n(9378),ev=n.n(ZS);function tv(e,t){return ev()(e,t)}function*nv({payload:e}){const t=null==e?void 0:e.callback,[n]=yield ji(Dp,[Vr]);try{const e=yield ji(n?dp.entitlements.loadEntitlementsV2:dp.entitlements.loadEntitlements);yield function*(e){tv(yield zi((e=>{var t;return null==(t=e.auth.user)?void 0:t.entitlements})),e)||(yield $i(ja.setEntitlements(e)))}(e),null==t||t(!0)}catch(e){null==t||t(!1)}}function*av(){yield xo(ja.loadEntitlements,nv)}const iv=new class{constructor(){this.loginWithSSO=e=>{if(this.isWebkitAvailable()){var t,n,a;null==(t=window.webkit)||null==(n=t.messageHandlers)||null==(a=n.FronteggNativeBridge)||a.postMessage(JSON.stringify({action:"loginWithSSO",payload:e}))}else{if(!this.isJsInterfaceAvailable())throw new Error("FronteggNativeBridge is not available");var i;null==(i=window.FronteggNativeBridge)||i.loginWithSSO(e)}},this.loginWithSocialLogin=e=>{if(this.isWebkitAvailable()){var t,n,a;null==(t=window.webkit)||null==(n=t.messageHandlers)||null==(a=n.FronteggNativeBridge)||a.postMessage(JSON.stringify({action:"loginWithSocialLogin",payload:e}))}else{if(!this.isJsInterfaceAvailable())throw new Error("FronteggNativeBridge is not available");var i;null==(i=window.FronteggNativeBridge)||i.loginWithSocialLogin(e)}},this.promptSocialLoginConsent=()=>{var e,t;return null!=(e=null==(t=window.FronteggNativeBridgeFunctions)?void 0:t.shouldPromptSocialLoginConsent)&&e}}isWebkitAvailable(){var e,t;return null!=(null==(e=window.webkit)||null==(t=e.messageHandlers)?void 0:t.FronteggNativeBridge)}isJsInterfaceAvailable(){return null!=window.FronteggNativeBridge}isSocialLoginAvailable(){return this.isAvailable("loginWithSocialLogin")}isLoginWithSSOAvailable(){return this.isAvailable("loginWithSSO")}isAvailable(e){var t,n;return!(!this.isWebkitAvailable()&&!this.isJsInterfaceAvailable())&&null!=(t=null==(n=window.FronteggNativeBridgeFunctions)?void 0:n[e])&&t}};function*ov(){const{publicAuthStrategyPolicy:e}=yield zi((e=>e.auth.securityPolicyState)),{policy:t}=e,n=(e=>{var t;return!(null==e||null==(t=e.secondaryAuthStrategies)||!t.some((({isActive:e,strategy:t})=>e&&t===js.Passkeys)))})(t),a="Passkeys"===localStorage.getItem("preferred-login-method"),i="true"===localStorage.getItem("dont-show-again-prompt-passkeys"),[o]=yield ji(Dp,["show-passkeys-new"]);if(!o||!n||a||i)return!1;{const{devices:e}=yield ji(dp.auth.getWebAuthnDevices);return yield $i(ja.setPasskeysState({devices:null!=e?e:[]})),0===(null!=e&&e.length?e.length:0)}}function*rv({user:e,tenants:t=[],activeTenant:n},a={}){const{tenantsState:i}=yield zi((e=>e.auth));yield $i(ja.setState(G({user:e,tenantsState:G({},i,{tenants:t,activeTenant:n,loading:!1})},a)))}const sv="http://schemas.openid.net/pape/policies/2007/06/multi-factor",lv=["otp","sms","hwk"],cv="SHOULD_STEP_UP",dv=(e,{maxAge:t}={})=>{if(!e)return!1;const{amr:n=[],acr:a="",auth_time:i}=e;if(t&&i&&!(Date.now()/1e3-i<=t))return!1;const o=a===sv,r=-1!==n.indexOf("mfa"),s=void 0!==lv.find((e=>n.indexOf(e)));return o&&r&&s};function uv(){const e=window.location.pathname+window.location.search;window.localStorage.setItem(Ut,e)}function*yv(e){const{routes:t,includeQueryParam:n,enforceRedirectToSameSite:a=!1,allowedRedirectOrigins:i=[]}=yield zi((e=>e.auth));if(e)return(e=>{const{pathname:t}=new URL(e),n=Ag(e);return n?t+n:t})(e);const{authenticatedUrl:o,loginUrl:r,logoutUrl:s,socialLoginCallbackUrl:l,activateUrl:c}=t;let d=window.localStorage.getItem(Ut);d&&![r,s,l,c].includes(d)||(d=o);const u=(({authenticatedUrl:e,enforceRedirectToSameSite:t,allowedRedirectOrigins:n,includeQueryParam:a})=>{let i=e;const o=new URL(window.location.href).searchParams.get("redirectUrl");return o?t&&bg(o)?((e,t)=>{const n=new URL(window.location.href),a=new URL(e),i=a.origin===n.origin;return t.includes(a.origin)||i})(o,n)?i=o:console.warn("The redirect url param is not valid, the origin is a different site"):i=o:a&&(i+=window.location.search),i})({authenticatedUrl:d,includeQueryParam:n,enforceRedirectToSameSite:a,allowedRedirectOrigins:i});return(y=u).startsWith(null==(f=window)?void 0:f.location.origin)?y.replace(null==(p=window)?void 0:p.location.origin,""):y;var y,f,p}function*fv(e,{customLoginAuthenticatedUrl:t,forceStepUpUrl:n,shouldStepUpDuringLogin:a}={}){const i=Vo.onRedirectTo;let o;if(n)o=n;else{var r;if(a){const e=window.localStorage.getItem(Ut);e&&!bg(e)&&(o=e)}o||(o=yield ji(yv,t)),null==(r=window)||r.localStorage.removeItem(Ut)}yield Ki(200),$i(e()),i(o,{refresh:o.startsWith("http")})}function*pv(){var e;const{routes:{customLoginAuthenticatedUrl:t,stepUpUrl:n}}=yield zi((e=>e.auth)),a=null==(e=window)?void 0:e.localStorage.getItem(cv),i=yield zi((({auth:e})=>e.user));var o;if(a&&(null==(o=window)||o.localStorage.removeItem(cv)),n&&a&&!dv(i))return void(yield ji(fv,ja.resetLoginState,{forceStepUpUrl:n}));let r=t;t||(yield ji(Fg),r=yield zi((e=>{var t;return null==(t=e.auth.routes)?void 0:t.customLoginAuthenticatedUrl}))),yield ji(fv,ja.resetLoginState,{customLoginAuthenticatedUrl:r,shouldStepUpDuringLogin:!!a})}function*gv(){yield ji(fv,ja.resetStepUpState)}const Sv=["callback"];function*vv(e,t,n){const{loginState:a}=yield zi((e=>e.auth));let i={};if(!n){const t=a.flow===Lt.Login?_t.success:a.step;i={loginState:{flow:a.flow,quickLoginToRegister:a.quickLoginToRegister,loading:!1,step:t,error:void 0,tenants:e}}}return G({},i,{isAuthenticated:t})}function*hv(e,t){const{loginState:n}=yield zi((e=>e.auth));if(n.flow!==Lt.Login)return;const[a]=yield ji(Dp,["security-center-show-login-flows"]);a&&n.isBreachedPassword&&!e?yield $i(ja.setLoginState({step:_t.breachedPassword,loading:!1})):(yield ji(ov))?yield $i(ja.setLoginState({step:_t.promptPasskeys,loading:!1})):yield pv(),null==t||t(!0)}function*mv(e){yield gv(),null==e||e(!0)}function*bv(e,t,n){let{callback:a}=e,i=ti(e,Sv);yield $i(t({loading:!0,error:void 0}));try{const{user:e,tenants:o=[],activeTenant:r}=yield ji(dp.auth.loginWithMfaV2,i),s=!!e.accessToken,l=yield ji(vv,o,s,n);if(yield ji(rv,{user:e,tenants:o,activeTenant:r},l),e.id&&localStorage.setItem("userId",e.id),yield $i(t({loading:!1,error:void 0})),n)return void(yield ji(mv,a));yield ji(hv,s,a)}catch(e){yield $i(t({loading:!1,error:_g(e)})),null==a||a(!1,e)}}function*Av({payload:e}){yield bv(e,ja.setLoginState,!1)}function*Tv(){yield ji(gv)}function*Ev(e){const{loginState:t}=yield zi((e=>e.auth)),{step:n}=yield zi((e=>e.auth.mfaState)),[a]=yield ji(Dp,["security-center-show-login-flows"]);if(t.flow===Lt.Login)if(a&&t.isBreachedPassword&&!e)yield $i(ja.setLoginState({step:_t.breachedPassword,loading:!1}));else{const e=yield ji(ov);n===dn.smsVerifyCode&&e?yield $i(ja.setLoginState({step:_t.promptPasskeys,loading:!1})):yield pv()}}function*kv({user:e,tenants:t,activeTenant:n},a=!1){yield $i(ja.setUser(e)),yield $i(ja.setTenantsState({tenants:t,activeTenant:n,loading:!1})),e.id&&localStorage.setItem("userId",e.id);const i=!!e.accessToken;yield $i(ja.setState({isAuthenticated:i})),a?yield ji(Tv):yield ji(Ev,i)}const Iv=["callback","deviceId"],Ov=["callback","deviceId"];function*Pv(e,t){let{callback:n,deviceId:a}=e,i=ti(e,Iv);yield $i(t({loading:!1,error:void 0}));try{const e=yield ji(dp.auth.preVerifyMFASMSForLogin,a,i);yield $i(ja.setMfaState({otcToken:e.otcToken,step:dn.smsVerifyCode,phoneNumber:e.phoneNumber})),yield $i(t({loading:!1,error:void 0})),null==n||n(!0)}catch(e){yield $i(t({loading:!1,error:_g(e)})),null==n||n(null)}}function*_v(e,t,n=!1){let{callback:a,deviceId:i}=e,o=ti(e,Ov);yield $i(t({loading:!0}));try{const e=yield ji(dp.auth.verifyMFASMSForLoginV2,i,o);yield kv(e,n),yield $i(t({loading:!1,error:void 0})),null==a||a(!0)}catch(e){yield $i(t({loading:!1,error:_g(e)})),null==a||a(null)}}function*Lv({payload:e}){yield Pv(e,ja.setLoginState)}function*wv({payload:e}){yield _v(e,ja.setLoginState,!1)}const Dv=["callback","deviceId"],Uv=["callback","deviceId"];function*Rv(e,t){let{callback:n,deviceId:a}=e,i=ti(e,Dv);yield $i(t({loading:!0}));try{var o;const e=yield ji(dp.auth.preVerifyMFAWebAuthnForLogin,a,i),r=G({},e.options,{challenge:Ot(e.options.challenge),allowCredentials:null==(o=e.options.allowCredentials)?void 0:o.map((e=>G({},e,{id:Ot(e.id)})))});yield $i(t({loading:!1,error:void 0})),null==n||n({options:r,webauthnToken:e.webauthnToken})}catch(e){yield $i(t({loading:!1,error:_g(e)})),null==n||n(null)}}function*Cv(e,t,n){let{callback:a,deviceId:i}=e,o=ti(e,Uv);yield $i(t({loading:!0}));try{const e=Pt(o.publicKey),r=yield ji(dp.auth.verifyMFAWebAuthnForLoginV2,i,G({},o,{options:e}));yield kv(r,n),yield $i(t({loading:!1,error:void 0})),null==a||a(!0)}catch(e){yield $i(t({loading:!1,error:_g(e)})),null==a||a(null)}}function*Nv({payload:e}){yield Rv(e,ja.setLoginState)}function*Mv({payload:e}){yield Cv(e,ja.setLoginState,!1)}const Fv=["callback"],Gv=["callback"];function*$v(e,t){let{callback:n}=e,a=ti(e,Fv);yield $i(t({loading:!0,error:void 0}));try{const e=yield ji(dp.auth.preVerifyMFAEmailCode,a);yield $i(ja.setMfaState({otcToken:e.otcToken,step:dn.emailVerifyCode})),yield $i(t({loading:!1,error:void 0})),null==n||n(!0)}catch(e){yield $i(t({error:_g(e)})),null==n||n(null)}}function*xv(e,t){let{callback:n}=e,a=ti(e,Gv);yield $i(t({loading:!0}));try{const e=yield ji(dp.auth.verifyMFAEmailCodeV2,a);yield kv(e),yield $i(t({loading:!1,error:void 0})),null==n||n(!0)}catch(e){yield $i(t({loading:!1,error:_g(e)})),null==n||n(null)}}function*Vv({payload:e}){yield $v(e,ja.setLoginState)}function*jv({payload:e}){yield xv(e,ja.setLoginState)}const Bv=["callback"],Wv=["callback"],zv=["callback"],Kv=["callback"],Hv=["callback","events"],qv=["callback"],Jv=["callback"],Yv=["callback"],Xv=["callback"],Qv=["user"],Zv=["callback"],eh=["callback"],th=["callback"],nh=["callback"],ah=["callback"];function*ih(e){const t=yield zi((e=>{var t;return null==(t=e.auth.user)?void 0:t.entitlements}));return tv(t,null==e?void 0:e.entitlements)?G({},e,{entitlements:t}):e}function*oh(){let e;try{var t;const n=yield ji(dp.metadata.getSamlMetadata);e=null==n||null==(t=n.configuration)?void 0:t.acsUrl}catch(e){console.error(e)}yield $i(ja.setState({ssoACS:e}))}function*rh(){try{const{isActive:e}=yield ji(dp.auth.getSSOPublicConfiguration);yield $i(ja.setState({isSSOAuth:e}))}catch(e){console.error(e)}}function*sh(e){var t;const{routes:n,loginState:a}=yield zi((e=>e.auth)),i=null!=(t=localStorage.getItem("register-quick-login"))?t:a.quickLoginToRegister;return i&&"true"!==localStorage.getItem(`${e.id}-${i}`)&&!window.location.pathname.endsWith(n.logoutUrl)}function*lh(){const{hostedLoginBox:e}=yield zi((e=>e.auth));e?yield ji(ch):yield ji(uh)}function*ch(){const{user:e}=yield zi((e=>e.auth));if(null==e||!e.refreshToken)return Vo.setAccessToken(null),Vo.setUser(null),void(yield $i(ja.setState({user:null,isAuthenticated:!1})));try{const t={grant_type:"refresh_token",refresh_token:null==e?void 0:e.refreshToken},n=yield ji(dp.auth.exchangeOAuthTokensV2,t),a=yield ji(ih,n.user);yield ji(rv,G({},n,{user:a}),{isAuthenticated:!0})}catch(e){Vo.setAccessToken(null),Vo.setUser(null),yield $i(ja.setState({user:null,isAuthenticated:!1}))}}function*dh(){const{user:e}=yield zi((e=>e.auth));if(null==e||!e.refreshToken)return Vo.setAccessToken(null),Vo.setUser(null),void(yield $i(ja.setState({user:null,isAuthenticated:!1})));try{const t={grant_type:"refresh_token",refresh_token:null==e?void 0:e.refreshToken},n=yield ji(dp.auth.exchangeOAuthTokensV2,t),a=yield ji(ih,n.user);yield ji(rv,G({},n,{user:a}),{isAuthenticated:!0})}catch(e){Vo.setAccessToken(null),Vo.setUser(null),yield $i(ja.setState({user:null,isAuthenticated:!1}))}}function*uh(){try{const t=Vo.onRedirectTo,{routes:n,loginState:a}=yield zi((e=>e.auth)),{user:i,tenants:o=[],activeTenant:r}=yield ji(dp.auth.refreshTokenV3);if(kg(i)){const e=yield Pg(i);yield $i(ja.setState(e)),t(n.loginUrl,{preserveQueryParams:!0})}else{var e;i.id&&localStorage.setItem("userId",i.id);const t=null!=(e=localStorage.getItem("register-quick-login"))?e:a.quickLoginToRegister,n=yield sh(i),s=yield ji(ih,i);yield ji(rv,{user:s,tenants:o,activeTenant:r},{loginState:G({},a,{quickLoginToRegister:t,flow:n?Lt.RegisterQuickLogin:Lt.Login}),isAuthenticated:!0}),yield fh(n)}}catch(e){Vo.setAccessToken(null),Vo.setUser(null),yield $i(ja.setState({user:void 0,isAuthenticated:!1}))}}function*yh(){try{const t=Vo.onRedirectTo,{routes:n,loginState:a}=yield zi((e=>e.auth)),{user:i,tenants:o=[],activeTenant:r}=yield ji(dp.auth.refreshTokenV3);if(kg(i)){const e=yield Pg(i);yield $i(ja.setState(e)),t(n.loginUrl,{preserveQueryParams:!0})}else{const s=yield ji(ih,i);if(yield ji(ov))yield $i(ja.setLoginState({step:_t.promptPasskeys,loading:!1})),yield ji(rv,{user:s,tenants:o,activeTenant:r},{isLoading:!1}),t(n.loginUrl,{preserveQueryParams:!0});else{var e;i.id&&localStorage.setItem("userId",i.id);const t=null!=(e=localStorage.getItem("register-quick-login"))?e:a.quickLoginToRegister,n=yield sh(i);yield ji(rv,{user:s,tenants:o,activeTenant:r},{loginState:G({},a,{quickLoginToRegister:t,flow:n?Lt.RegisterQuickLogin:Lt.Login}),isAuthenticated:!0}),yield fh(n)}}}catch(e){Vo.setAccessToken(null),Vo.setUser(null),yield $i(ja.setState({user:void 0,isAuthenticated:!1}))}}function*fh(e){var t;const n=new URL(null==(t=window)?void 0:t.location.href),a=Vo.onRedirectTo,{routes:i,loginState:o}=yield zi((e=>e.auth)),r=n.searchParams.get("invitationToken"),s=[i.socialLoginCallbackUrl,i.oidcRedirectUrl,i.samlCallbackUrl];r||s.push(i.loginUrl,i.signUpUrl),e?a(i.loginUrl):s.some((e=>e&&window.location.pathname.endsWith(e)))&&(o.isNewUser&&i.signUpSuccessUrl&&i.socialLoginCallbackUrl===window.location.pathname?a(i.signUpSuccessUrl,{refresh:i.signUpSuccessUrl.startsWith("http")}):yield pv())}function*ph({payload:{callback:e}}){try{const{ip:t}=yield ji(dp.metadata.getCurrentUserIpMetadata);yield $i(ja.setState({userIp:t})),null==e||e(!0)}catch(t){null==e||e(!1)}}function*gh({payload:e}){const t=[],n=[];t.push(ji(lh)),e&&(yield $i(ja.setState({isLoading:!0})),yield $i(ja.loadSocialLoginsConfigurationV2()),t.push(ji(jS)),t.push(ji(pS)),t.push(ji(rh)),t.push(ji(QS)),t.push(ji(oh)),n.push(ji(Fg))),yield xi(t),n.length>0&&(yield xi(n)),yield $i(ja.setState({isLoading:!1}))}function*Sh({accessToken:e,user:t}){if(!e)return void(yield $i(ja.setState({user:void 0,isAuthenticated:!1})));const n=Vo.onRedirectTo,{routes:a}=yield zi((e=>e.auth));if(kg(t)){const e=yield Pg(t);yield $i(ja.setState(e)),n(a.loginUrl,{preserveQueryParams:!0})}}function*vh({payload:e}){const t=[];yield $i(ja.loadSocialLoginsConfigurationV2()),t.push(ji(jS)),t.push(ji(rh)),t.push(ji(QS)),t.push(ji(oh)),t.push(ji(Sh,e)),t.push(ji(Fg)),yield xi(t)}const hh=e=>{var t;if("path"===e)return(null!=(t=window)?t:document).location.pathname;{var n;const e=((null!=(n=window)?n:document).location.hash||"#").substring(1);return-1!==e.indexOf("?")?e.substring(0,e.indexOf("?")):e}};function*mh(){const e=yield ji(dp.auth.silentOAuthRefreshTokenV2);if(null==e||!e.user)throw new Error("couldn't refresh user token with oauth service");yield ji(rv,e,{isAuthenticated:!0,isLoading:!1})}function*bh({payload:e}){var t;null==(t=localStorage)||t.removeItem(cv);const{disableSilentRefresh:n}=yield zi((e=>({disableSilentRefresh:e.auth.disableSilentRefresh})));if("login"!==(null==e?void 0:e.prompt))try{if(n)throw new Error("silent refresh is disabled");yield mh()}catch(t){yield Th(e)}else yield Th(e)}function*Ah({payload:{additionalParams:e,shouldRedirectToLogin:t,firstTime:n,loginDirectAction:a}}){var i,o;if(null==(i=localStorage)||i.removeItem(cv),n){const{urlStrategy:e}=yield zi((e=>({urlStrategy:e.root.urlStrategy}))),t=hh(e);if(yield $i(ja.setState({isLoading:!0})),(e=>"/oauth/callback"===e)(t))return}const{disableSilentRefresh:r}=yield zi((e=>({disableSilentRefresh:e.auth.disableSilentRefresh})));if(a&&((e=e||{}).login_direct_action=btoa(JSON.stringify(a))),"login"!==(null==(o=e)?void 0:o.prompt))try{if(r)throw new Error("silent refresh is disabled");yield mh()}catch(n){if(!t)return void(yield $i(ja.setState({isLoading:!1})));yield Th(e)}else yield Th(e)}function*Th(e){const{routes:t,context:n,onRedirectTo:a,urlStrategy:i}=yield zi((e=>({routes:e.auth.routes,onRedirectTo:e.auth.onRedirectTo,context:e.root.context,urlStrategy:e.root.urlStrategy})));if(hh(i)===t.hostedLoginRedirectUrl)return void console.debug("Calling loginWithRedirect while in hostedLoginCallback route");yield $i(ja.setState({isLoading:!0}));const o=Lp(),r=Lp(),s=yield ji(_p,r);localStorage.setItem(Rt,r);let l=`${window.location.origin}${"path"===i?"":"#"}${t.hostedLoginRedirectUrl}`;yield ji(Fg);const c=yield zi((e=>{var t;return null==(t=e.auth.customLoginState)?void 0:t.customLoginSearchParams}));c&&(l.endsWith("/")&&(l=l.slice(0,-1)),l+=c);const d=`${Lr(n,"/oauth/authorize")}/oauth/authorize`,u=G({response_type:"code",client_id:n.clientId||"INVALID-CLIENT-ID",scope:"openid email profile",redirect_uri:l,code_challenge:s,code_challenge_method:"S256",nonce:o},e);if(null==e||!e.organization){const e=yield ji(Mg);e&&(u.organization=e)}const y=Tg(Eg);y&&(u.tenantId=y),a(`${d}?${new URLSearchParams(u).toString()}`,{refresh:!0})}function*Eh({payload:e}){const t=localStorage.getItem(Rt)||"INVALID-CODE-VERIFIER",{routes:n,urlStrategy:a}=yield zi((e=>({routes:e.auth.routes,urlStrategy:e.root.urlStrategy})));let i=`${window.location.origin}${"path"===a?"":"#"}${n.hostedLoginRedirectUrl}`;yield ji(Fg);const o=yield zi((e=>{var t;return null==(t=e.auth.customLoginState)?void 0:t.customLoginSearchParams}));o&&(i.endsWith("/")&&(i=i.slice(0,-1)),i+=o);const r={code:e.code,redirect_uri:i,code_verifier:t,grant_type:"authorization_code"};try{const e=yield ji(dp.auth.exchangeOAuthTokensV2,r);yield ji(rv,e,{isAuthenticated:!0,isLoading:!1})}catch(e){yield $i(ja.setState({isLoading:!1})),console.error("Failed to exchangeOAuthTokens",e)}finally{const e=yield zi((({auth:e})=>e.user)),t=window.localStorage.getItem(cv);window.localStorage.removeItem(cv),t&&dv(e)?yield gv():yield pv()}}function*kh(e){let{payload:{callback:t}}=e,n=ti(e.payload,Bv);try{yield $i(ja.setLoginState({loading:!0}));const e=yield ji(dp.auth.changePhoneNumberWithVerification,n);yield $i(ja.setLoginState({phoneNumber:n.phoneNumber,loading:!1,changePhoneId:e.changePhoneId,step:_t.loginWithQuickSmsOtc,error:void 0})),null==t||t(!0)}catch(e){yield $i(ja.setLoginState({error:_g(e),loading:!1}))}}function*Ih(e){let{payload:{callback:t}}=e,n=ti(e.payload,Wv);try{yield $i(ja.setLoginState({loading:!0})),yield ji(dp.auth.verifyChangePhoneNumber,n),yield $i(ja.setLoginState({loading:!1})),null==t||t(!0)}catch(e){yield $i(ja.setLoginState({error:_g(e),loading:!1}))}}function*Oh(e){let{payload:{callback:t}}=e,n=ti(e.payload,zv);try{yield $i(ja.setLoginState({loading:!0}));const e=yield ji(dp.auth.passwordlessPreLogin,G({},n,{type:Ia.SmsCode}));yield $i(ja.setLoginState({step:_t.loginWithQuickSmsOtc,loading:!1,phoneNumber:null==e?void 0:e.phoneNumber,error:void 0})),null==t||t(!0)}catch(e){yield $i(ja.setLoginState({error:_g(e),loading:!1})),null==t||t(e)}}function*Ph(e){let{payload:{callback:t}}=e,n=ti(e.payload,Kv);try{let e;yield $i(ja.setLoginState({loading:!0})),function(e){return"email"in e}(n)&&(e=n.email);const a=yield ji(dp.auth.passwordlessPreLogin,n),i=Pa[n.type];yield $i(ja.setLoginState({step:i,loading:!1,phoneNumber:null==a?void 0:a.phoneNumber,email:e,error:void 0})),null==t||t()}catch(e){yield $i(ja.setLoginState({error:_g(e),loading:!1})),null==t||t()}}function*_h(e){let{payload:{callback:t,events:n}}=e,a=ti(e.payload,Hv);try{yield $i(ja.setLoginState({loading:!0}));const{user:e,tenants:o=[],activeTenant:r}=yield ji(dp.auth.passwordlessPostLoginV2,a),s=Vo.onRedirectTo,{routes:l}=yield zi((e=>e.auth));if(kg(e)){const t=yield Pg(e);yield $i(ja.setState(t)),s(l.loginUrl,{preserveQueryParams:!0})}else{const{loginState:a}=yield zi((e=>e.auth));if(e.emailVerified){var i;const t={email:e.email,origin:vg.PASSWORDLESS,id:e.id,tenantId:e.tenantId,createdAt:new Date,name:e.name};null==n||null==(i=n.userVerified)||i.call(n,t),wg(Lg.USER_VERIFIED,t)}e.id&&localStorage.setItem("userId",e.id),yield ji(rv,{user:e,tenants:o,activeTenant:r}),yield $i(ja.setLoginState({error:void 0})),yield $i(ja.setState({isLoading:!1})),a.flow===Lt.Login?(yield ji(ov))?(yield $i(ja.setLoginState({step:_t.promptPasskeys,loading:!1})),s(l.loginUrl,{preserveQueryParams:!0})):(yield $i(ja.setState({isAuthenticated:!0})),yield pv()):s(l.loginUrl,{preserveQueryParams:!0}),localStorage.removeItem("register-quick-login"),null==t||t(!0)}}catch(e){yield $i(ja.setLoginState({error:_g(e,"Failed to authenticate")}))}finally{yield $i(ja.setLoginState({loading:!1}))}}function*Lh({payload:e}){try{yield $i(ja.setLoginState({loading:!0}));const{name:t}=yield ji(dp.auth.verifyInviteToken,e);yield $i(ja.setLoginState({inviteTokenTenantName:t}))}catch(e){yield $i(ja.setLoginState({inviteTokenError:_g(e,"We couldn't verify your invitation")}))}finally{yield $i(ja.setLoginState({loading:!1}))}}function*wh({payload:{email:e,recaptchaToken:t,invitationToken:n,callback:a}}){yield $i(ja.setLoginState({loading:!0}));try{const i=yield zi((({auth:{onRedirectTo:e}})=>e)),o=Tg(Eg),{address:r,idpType:s}=yield ji(dp.auth.preLoginV2,{email:e,tenantId:o});if(r){let t=r;if(s===fp.Oidc&&!t.includes("redirect_uri")){const{routes:{oidcRedirectUrl:e}}=yield zi((({auth:{routes:e}})=>({routes:e})));t+=`&redirect_uri=${window.location.origin}${e}`}iv.isLoginWithSSOAvailable()?(iv.loginWithSSO(e),yield $i(ja.setLoginState({loading:!1})),null==a||a()):(yield $i(ja.setLoginState({step:_t.redirectToSSO,loading:!1,ssoRedirectUrl:t})),setTimeout((()=>{i(t,{refresh:!0})}),2e3))}else yield Dh({email:e,recaptchaToken:t,callback:a,invitationToken:n})}catch(i){yield Dh({email:e,recaptchaToken:t,callback:a,invitationToken:n})}}function*Dh(e){let{callback:t}=e,n=ti(e,qv);const a=yield zi((({auth:{securityPolicyState:{publicPolicy:{policy:e}}}})=>e));if(null==a||!a.authStrategy)return yield $i(ja.setLoginState({step:_t.loginWithPassword,loading:!1})),void(null==t||t());(null==a?void 0:a.authStrategy)===Ia.EmailAndPassword?(yield $i(ja.setLoginState({step:_t.loginWithPassword,loading:!1})),null==t||t()):[Ia.MagicLink,Ia.Code,Ia.SmsCode].includes(null==a?void 0:a.authStrategy)?yield $i(ja.passwordlessPreLogin(G({},n,{type:null==a?void 0:a.authStrategy,callback:t}))):(yield $i(ja.setLoginState({step:_t.loginWithPassword,loading:!1})),null==t||t())}function*Uh({payload:{callback:e}}){try{yield $i(ja.setLoginState({loading:!0}));const{options:t}=yield ji(dp.auth.webAuthnCreateNewDeviceSession);t.user.id=Ot(t.user.id),t.challenge=Ot(t.challenge),t.excludeCredentials=[],null==e||e(t)}catch(t){yield $i(ja.setLoginState({error:_g(t)})),null==e||e(null)}finally{yield $i(ja.setLoginState({loading:!1}))}}function*Rh(e){let{payload:{callback:t}}=e,n=ti(e.payload,Jv);try{yield $i(ja.setLoginState({loading:!0}));const e=Pt(n.publicKey),a="platform"===(null==e?void 0:e.authenticatorAttachment)?Bs.Platform:Bs.CrossPlatform;yield ji(dp.auth.verifyNewDeviceSession,{id:e.id,response:e.response,deviceType:a}),null==t||t(!0)}catch(e){yield $i(ja.setLoginState({error:_g(e)})),null==t||t(null)}finally{yield $i(ja.setLoginState({loading:!1}))}}function*Ch(e){let{payload:{callback:t}}=e,n=ti(e.payload,Yv);try{var a;yield $i(ja.setPasskeysState({loading:!0})),yield $i(ja.setLoginState({loading:!0}));const{options:e}=yield ji(dp.auth.webAuthnPreLogin,n);e.challenge=Ot(e.challenge),e.allowCredentials=null==(a=e.allowCredentials)?void 0:a.map((e=>G({},e,{id:Ot(e.id)}))),yield $i(ja.setLoginState({error:void 0})),null==t||t(e)}catch(e){yield $i(ja.setLoginState({error:_g(e)})),null==t||t(null)}finally{yield $i(ja.setPasskeysState({loading:!1})),yield $i(ja.setLoginState({loading:!1}))}}function*Nh(e){let{payload:{callback:t}}=e,n=ti(e.payload,Xv);try{var a;yield $i(ja.setPasskeysState({loading:!0})),yield $i(ja.setLoginState({loading:!0}));const e=Pt(n.publicKey),i=yield ji(dp.auth.webAuthnPostLoginV2,G({},e,{response:G({},e.response,{userHandle:null!=(a=e.response.userHandle)?a:void 0}),recaptchaToken:n.recaptchaToken,invitationToken:n.invitationToken})),{user:o}=i,r=ti(i,Qv);if(kg(o)){const e=Vo.onRedirectTo,{routes:t}=yield zi((e=>e.auth)),n=yield Pg(o);yield $i(ja.setState(n)),e(t.loginUrl,{preserveQueryParams:!0})}else o.id&&localStorage.setItem("userId",o.id),yield ji(rv,G({user:o},r),{isAuthenticated:!0}),yield $i(ja.setLoginState({error:void 0})),yield pv(),null==t||t(!0)}catch(e){yield $i(ja.setLoginState({error:_g(e)})),null==t||t(null)}finally{yield $i(ja.setPasskeysState({loading:!1})),yield $i(ja.setLoginState({loading:!1}))}}function*Mh({payload:e}){const{onRedirectTo:t,routes:n}=yield zi((({auth:{onRedirectTo:e,routes:t}})=>({onRedirectTo:e,routes:t})));yield $i(ja.setLoginState({loading:!0}));try{const t=yield ji(dp.auth.postLogin,e);yield $i(ja.setState({user:t.accessToken?t:void 0,isAuthenticated:!!t.accessToken})),yield pv()}catch(e){setTimeout((()=>{t(n.authenticatedUrl)}),1e3),yield $i(ja.setLoginState({step:_t.loginWithSSOFailed,loading:!1}))}}function*Fh({payload:{email:e,password:t,recaptchaToken:n,invitationToken:a,callback:i}}){yield $i(ja.setLoginState({loading:!0}));try{const{user:o,tenants:r=[],activeTenant:s}=yield ji(dp.auth.loginv2,{email:e,password:t,recaptchaToken:n,invitationToken:a}),l=Vo.onRedirectTo,{routes:c}=yield zi((e=>e.auth));if(kg(o)){const e=yield Pg(o);yield $i(ja.setState(e)),l(c.loginUrl,{preserveQueryParams:!0})}else{const{loginState:t}=yield zi((e=>e.auth)),n=!!o.accessToken;o.id&&localStorage.setItem("userId",o.id),yield ji(rv,{user:o,tenants:r,activeTenant:s},{loginState:{flow:t.flow,quickLoginToRegister:t.quickLoginToRegister,email:e,loading:!1,error:void 0,mfaToken:o.mfaToken,step:t.flow===Lt.Login?_t.success:t.step,tenants:r,tenantsLoading:!0,isBreachedPassword:o.isBreachedPassword},isAuthenticated:n});const[a]=yield ji(Dp,["security-center-show-login-flows"]);t.flow===Lt.Login&&(a&&o.isBreachedPassword&&!n?yield $i(ja.setLoginState({step:_t.breachedPassword,loading:!1})):n&&((yield ji(ov))?(yield $i(ja.setLoginState({step:_t.promptPasskeys,loading:!1})),l(c.loginUrl,{preserveQueryParams:!0})):yield pv()))}localStorage.removeItem("register-quick-login"),null==i||i(!0)}catch(t){Vo.setAccessToken(null),Vo.setUser(null),null==i||i(!1,t),yield $i(ja.setLoginState({email:e,error:_g(t),loading:!1}))}}function*Gh({payload:e}){yield $i(ja.setLoginState({loading:!0}));try{var t;yield ji(dp.auth.recoverMfaToken,e),yield $i(ja.setLoginState({loading:!1,error:void 0,step:_t.preLogin})),yield $i(ja.setState({user:void 0,isAuthenticated:!1})),null==(t=e.callback)||t.call(e,!0)}catch(t){var n;yield $i(ja.setLoginState({error:_g(t),loading:!1})),null==(n=e.callback)||n.call(e,!1,t)}}function*$h({payload:e}){const{hostedLoginBox:t}=yield zi((e=>e.auth));yield $i(ja.setState({isLoading:!0}));try{t?yield ji(dp.auth.OAuthLogout):yield ji(dp.auth.logout)}catch{}Vo.isSessionPerTenantEnabled()&&ts(),yield $i(ja.resetState()),yield $i(ja.requestAuthorize(!0)),null==e||e()}function*xh({payload:e}){var t;try{yield ji(dp.auth.logout)}catch{}Vo.isSessionPerTenantEnabled()&&ts(),setTimeout((()=>{var t;return null==e||null==(t=e.callback)?void 0:t.call(e,!0)}),null!=(t=null==e?void 0:e.callbackTimeout)?t:500)}function*Vh({user:e,tenants:t,activeTenant:n}){const a={step:dn.recoveryCode,loading:!1,error:void 0,saving:!1};null!=e&&e.recoveryCode&&(a.recoveryCode=e.recoveryCode),yield $i(ja.setMfaState(a)),yield $i(ja.setUser(e)),yield $i(ja.setTenantsState({tenants:t,activeTenant:n,loading:!1})),e.id&&localStorage.setItem("userId",e.id)}function*jh(e){let{payload:{callback:t}}=e,n=ti(e.payload,Zv);yield $i(ja.setLoginState({loading:!0}));try{const e=yield ji(dp.auth.preEnrollMFASMSForLogin,n);yield $i(ja.setMfaState({otcToken:e.otcToken,step:dn.smsVerifyCode,phoneNumber:e.phoneNumber})),yield $i(ja.setLoginState({loading:!1})),null==t||t(!0)}catch(e){yield $i(ja.setLoginState({loading:!1,error:_g(e)})),null==t||t(null)}}function*Bh(e){let{payload:{callback:t}}=e,n=ti(e.payload,eh);yield $i(ja.setLoginState({loading:!0}));try{const e=yield ji(dp.auth.enrollMFASMSForLoginV2,n);yield Vh(e),yield $i(ja.setLoginState({loading:!1})),null==t||t(!0)}catch(e){yield $i(ja.setLoginState({loading:!1,error:_g(e)})),null==t||t(null)}}function*Wh(e){let{payload:{callback:t}}=e,n=ti(e.payload,th);yield $i(ja.setLoginState({loading:!0}));try{var a;const e=yield ji(dp.auth.preEnrollMFAWebAuthnForLogin,n),i=G({},e.options,{challenge:Ot(e.options.challenge),user:G({},e.options.user,{id:Ot(e.options.user.id)}),excludeCredentials:null==(a=e.options.excludeCredentials)?void 0:a.map((e=>G({},e,{id:Ot(e.id)})))});yield $i(ja.setLoginState({loading:!1})),null==t||t({options:i,webauthnToken:e.webauthnToken})}catch(e){yield $i(ja.setLoginState({loading:!1,error:_g(e)})),null==t||t(null)}}function*zh(e){let{payload:{callback:t}}=e,n=ti(e.payload,nh);yield $i(ja.setLoginState({loading:!0}));try{const e=Pt(n.publicKey),a=yield ji(dp.auth.enrollMFAWebAuthnForLoginV2,G({},n,{options:e}));yield Vh(a),yield $i(ja.setLoginState({loading:!1})),null==t||t(!0)}catch(e){yield $i(ja.setLoginState({loading:!1,error:_g(e)})),null==t||t(null)}}function*Kh(e){let{payload:{callback:t}}=e,n=ti(e.payload,ah);yield $i(ja.setLoginState({loading:!0}));try{const e=yield ji(dp.auth.enrollMFAAuthenticatorAppForLoginV2,n);yield Vh(e),yield $i(ja.setLoginState({loading:!1})),null==t||t(!0)}catch(e){yield $i(ja.setLoginState({loading:!1,error:_g(e)})),null==t||t(null)}}function*Hh({payload:e}){yield $i(ja.setLoginState({loading:!0}));try{yield ji(dp.auth.forgotPassword,e),yield $i(ja.setLoginState({loading:!1,error:void 0,step:_t.breachedPasswordSuccess})),yield $i(ja.setState({isAuthenticated:!1}))}catch(e){yield $i(ja.setLoginState({loading:!1,error:_g(e)}))}}function*qh(){yield xo(ja.requestAuthorize,gh),yield xo(ja.requestAuthorizeSSR,vh),yield xo(ja.requestHostedLoginAuthorize,bh),yield xo(ja.requestHostedLoginAuthorizeV2,Ah),yield xo(ja.handleHostedLoginCallback,Eh),yield xo(ja.preLogin,wh),yield xo(ja.postLogin,Mh),yield xo(ja.login,Fh),yield xo(ja.logout,$h),yield xo(ja.silentLogout,xh),yield xo(ja.loginWithMfa,Av),yield xo(ja.recoverMfa,Gh),yield xo(ja.quickSmsPasswordlessPreLogin,Oh),yield xo(ja.changePhoneNumberWithVerification,kh),yield xo(ja.verifyChangePhoneNumber,Ih),yield xo(ja.passwordlessPreLogin,Ph),yield xo(ja.passwordlessPostLogin,_h),yield xo(ja.verifyInviteToken,Lh),yield xo(ja.webAuthnPrelogin,Ch),yield xo(ja.webAuthnPostLogin,Nh),yield xo(ja.webAuthnCreateNewDeviceSession,Uh),yield xo(ja.webAuthnVerifyNewDeviceSession,Rh),yield xo(ja.afterAuthNavigation,pv),yield xo(ja.getUserIP,ph),yield xo(ja.preEnrollMFASMSForLogin,jh),yield xo(ja.enrollMFASMSForLogin,Bh),yield xo(ja.preEnrollMFAWebAuthnForLogin,Wh),yield xo(ja.enrollMFAWebAuthnForLogin,zh),yield xo(ja.enrollMFAAuthenticatorAppForLogin,Kh),yield xo(ja.preVerifyMFASMSForLogin,Lv),yield xo(ja.verifyMFASMSForLogin,wv),yield xo(ja.preVerifyMFAWebAuthnForLogin,Nv),yield xo(ja.verifyMFAWebAuthnForLogin,Mv),yield xo(ja.preVerifyMFAEmailCode,Vv),yield xo(ja.verifyMFAEmailCode,jv),yield xo(ja.resetBreachedPassword,Hh)}function*Jh({payload:e}){e&&(yield $i(ja.setState({isLoading:!0})));const t=Mp;yield $i(ja.loadTenants()),yield $i(ja.setState({user:t,isAuthenticated:!0,isLoading:!1}))}function*Yh({payload:{callback:e}}){try{const{ip:t}=rg[0];yield $i(ja.setState({userIp:t})),null==e||e(!0,t)}catch(t){null==e||e(!1,t)}}function*Xh(){yield xo(ja.requestAuthorize,Jh),yield xo(ja.afterAuthNavigation,pv),yield xo(ja.getUserIP,Yh)}const Qh=["callback","samlVendor"],Zh=["callback","samlVendor"];function*em(){try{var e,t;yield $i(ja.setSSOState({loading:!0}));const n=yield ji(dp.auth.getSamlConfiguration),a=yield ji(dp.auth.getOidcConfiguration),i=yield ji(dp.metadata.getSamlMetadata);n.acsUrl=null==i||null==(e=i.configuration)?void 0:e.acsUrl,n.spEntityId=null==i||null==(t=i.configuration)?void 0:t.spEntityId,n.isSamlActive=null==i?void 0:i.isActive,yield $i(ja.setSSOState({samlConfiguration:n,oidcConfiguration:a,loading:!1,firstLoad:!1}))}catch(e){yield $i(ja.setSSOState({error:_g(e),loading:!1}))}}function*tm({payload:e}){const t=yield zi((e=>e.auth.ssoState.samlConfiguration)),n="saving";yield $i(ja.setSSOState({error:void 0,[n]:!0}));try{const a=yield wp(e[0]),i=yield ji(dp.auth.updateSamlVendorMetadata,{metadata:a});i.isSamlActive=null==t?void 0:t.isSamlActive,yield $i(ja.setSSOState({samlConfiguration:i,error:void 0,[n]:!1}))}catch(e){yield $i(ja.setSSOState({samlConfiguration:t,error:_g(e),[n]:!1}))}}function*nm({payload:e}){const{configFile:t,callback:n}=e,a=yield zi((e=>e.auth.ssoState.samlConfiguration)),i="saving";yield $i(ja.setSSOState({error:void 0,[i]:!0}));try{const e=yield wp(t),o=yield ji(dp.auth.updateSamlVendorMetadata,{metadata:e});o.isSamlActive=null==a?void 0:a.isSamlActive,yield $i(ja.setSSOState({samlConfiguration:o,error:void 0,[i]:!1})),null==n||n(!0)}catch(e){yield $i(ja.setSSOState({samlConfiguration:a,error:_g(e),[i]:!1})),null==n||n(null,e)}}function*am({payload:e}){const{callback:t,samlVendor:n}=e,a=ti(e,Qh),i=yield zi((e=>e.auth.ssoState.samlConfiguration)),o=G({},i,a);let r="saving";(null==o?void 0:o.enabled)!==i.enabled&&(r="loading");try{if(null==o||!o.domain)return void(yield $i(ja.setSSOState({samlConfiguration:G({},i,o)})));if(yield $i(ja.setSSOState({error:void 0,[r]:!0})),e.type===fp.Saml){var s,l;const e=yield ji(dp.metadata.getSamlMetadata);o.acsUrl=null==e||null==(s=e.configuration)?void 0:s.acsUrl,o.spEntityId=null==e||null==(l=e.configuration)?void 0:l.spEntityId}const a=Pp(o,["validated","generatedVerification","createdAt","updatedAt"]);(null==i?void 0:i.domain)!==(null==a?void 0:a.domain)&&(a.ssoEndpoint="",a.publicCertificate="",a.signRequest=!1),a.type=null==n?void 0:n.toLowerCase();const c=yield ji(dp.auth.updateSamlConfiguration,a);c.isSamlActive=null==i?void 0:i.isSamlActive,yield $i(ja.setSSOState({samlConfiguration:c,error:void 0,[r]:!1})),null==t||t(!0)}catch(e){yield $i(ja.setSSOState({samlConfiguration:i,error:_g(e),[r]:!1})),null==t||t(null,e)}}function*im({payload:{callback:e}={}}){const t=yield zi((e=>e.auth.ssoState.samlConfiguration));try{yield $i(ja.setSSOState({error:void 0,saving:!0})),yield ji(dp.auth.validateSamlDomain),yield $i(ja.setSSOState({samlConfiguration:G({},t,{validated:!0}),error:void 0,saving:!1})),null==e||e(!0)}catch(n){yield $i(ja.setSSOState({samlConfiguration:G({},t,{validated:!1}),error:_g(n),saving:!1})),null==e||e(null,n)}}function*om(){try{const e=yield ji(dp.auth.getSamlRoles),t=yield ji(dp.auth.getSamlRolesGroups);yield $i(ja.setSSOState({authorizationRoles:e.roleIds,rolesGroups:t,error:void 0}))}catch(e){yield $i(ja.setSSOState({error:_g(e)}))}}function*rm({payload:{callback:e,authorizationRoles:t,groups:n}}){try{yield $i(ja.setSSOState({error:void 0,saving:!0})),yield ji(dp.auth.updateSamlRoles,{roleIds:t}),n&&(yield function*(e){try{yield xi(e.map((e=>ji(dp.auth.updateSamlGroup,{id:e.id,roleIds:e.roleIds,group:e.group}))))}catch(e){yield $i(ja.setSSOState({error:_g(e)}))}}(n)),yield om(),yield $i(ja.setSSOState({error:void 0,saving:!1})),null==e||e(!0)}catch(t){yield $i(ja.setSSOState({error:_g(t),saving:!1})),null==e||e(null,t)}}function*sm({payload:{callback:e,id:t}}){try{yield $i(ja.setSSOState({error:void 0,saving:!0})),yield ji(dp.auth.deleteSamlGroup,{id:t}),yield om(),yield $i(ja.setSSOState({error:void 0,saving:!1})),null==e||e(!0)}catch(t){yield $i(ja.setSSOState({error:_g(t),saving:!1})),null==e||e(null,t)}}function*lm({payload:{group:e,roleIds:t,callback:n}}){try{yield $i(ja.setSSOState({error:void 0,saving:!0})),yield ji(dp.auth.createSamlGroup,{group:e,roleIds:t}),yield om(),yield $i(ja.setSSOState({error:void 0,saving:!1})),null==n||n(!0)}catch(e){yield $i(ja.setSSOState({error:_g(e),saving:!1})),null==n||n(null,e)}}function*cm({payload:e}){const t={code:e.code,redirectUri:e.redirectUri,RelayState:e.state};try{yield $i(ja.setSSOState({loading:!0})),yield ji(dp.auth.oidcPostLoginV2,t),yield ji(lh),yield $i(ja.setSSOState({loading:!1}))}catch(e){yield $i(ja.setSSOState({loading:!1,error:_g(e,"Failed to authenticate"),firstLoad:!1}))}}function*dm(){yield Go(ja.loadSSOConfigurations,em),yield Go(ja.saveSSOConfigurations,am),yield Go(ja.saveSSOConfigurationsFile,tm),yield Go(ja.saveSSOConfigurationsFileWithCallback,nm),yield Go(ja.validateSSODomain,im),yield Go(ja.loadSSOAuthorizationRoles,om),yield Go(ja.updateSSOAuthorizationRoles,rm),yield Go(ja.deleteSamlGroup,sm),yield Go(ja.createSamlGroup,lm),yield Go(ja.oidcPostlogin,cm)}function*um(){yield $i(ja.setSSOState({loading:!0})),yield Et(),yield $i(ja.setSSOState({samlConfiguration:Bp,loading:!1,firstLoad:!1}))}function*ym({payload:e}){const t="saving";yield $i(ja.setSSOState({error:void 0,[t]:!0}));const n=G({},yield zi((e=>e.auth.ssoState.samlConfiguration)),{enabled:!0},e[0]);yield $i(ja.setSSOState({samlConfiguration:n,error:void 0,[t]:!1}))}function*fm({payload:e}){var t,n;const{callback:a,samlVendor:i}=e,o=ti(e,Zh),r=Kp.samlConfiguration,s=G({},r,o);let l="saving";if((null==s?void 0:s.enabled)!==r.enabled&&(l="loading"),null==s||!s.domain)return void(yield $i(ja.setSSOState({samlConfiguration:G({},r,s)})));yield $i(ja.setSSOState({error:void 0,[l]:!0})),yield Et(),s.acsUrl=null==Wp||null==(t=Wp.configuration)?void 0:t.acsUrl,s.spEntityId=null==Wp||null==(n=Wp.configuration)?void 0:n.spEntityId;const c=Pp(s,["validated","generatedVerification","createdAt","updatedAt"]);(null==r?void 0:r.domain)!==(null==c?void 0:c.domain)&&(c.ssoEndpoint="",c.publicCertificate="",c.signRequest=!1),c.type=null==i?void 0:i.toLowerCase(),yield Et(),yield $i(ja.setSSOState({samlConfiguration:c,error:void 0,[l]:!1})),null==a||a(!0)}function*pm({payload:{callback:e}={}}){const t=Kp.samlConfiguration;yield $i(ja.setSSOState({error:void 0,saving:!0})),yield Et(),yield $i(ja.setSSOState({samlConfiguration:G({},t,{validated:!0}),error:void 0,saving:!1})),null==e||e(!0)}function*gm(){yield Et(),yield $i(ja.setSSOState({authorizationRoles:["1","2","3"],error:void 0}))}function*Sm({payload:{callback:e,authorizationRoles:t}}){yield $i(ja.setSSOState({error:void 0,saving:!0})),yield Et(),yield $i(ja.setSSOState({authorizationRoles:t,error:void 0,saving:!1})),null==e||e(!0)}function*vm(){yield Go(ja.loadSSOConfigurations,um),yield Go(ja.saveSSOConfigurations,fm),yield Go(ja.saveSSOConfigurationsFile,ym),yield Go(ja.validateSSODomain,pm),yield Go(ja.loadSSOAuthorizationRoles,gm),yield Go(ja.updateSSOAuthorizationRoles,Sm)}const hm=["callback"],mm=["callback","ssoConfigId"],bm=["callback","ssoConfigId"],Am=["callback","ssoConfigId"];function*Tm(){try{return yield ji(dp.auth.getOidcConfiguration)}catch(e){return null}}function*Em(){try{return yield ji(dp.metadata.getSamlMetadata)}catch(e){return null}}function*km(){try{yield $i(ja.setSSOLoader({key:yp.LOAD_SSO_CONFIGURATIONS,value:!0}));const[e,t]=yield xi([ji(Tm),ji(Em)]),n=yield ji(dp.auth.getSSOConfigurations);yield $i(ja.setSSOState({ssoConfigurations:n,oidcConfiguration:e,samlMetadata:t}))}catch(e){yield $i(ja.setSSOError({key:yp.LOAD_SSO_CONFIGURATIONS,value:_g(e)}))}finally{yield $i(ja.setSSOLoader({key:yp.LOAD_SSO_CONFIGURATIONS,value:!1}))}}function*Im({payload:e}){yield $i(ja.setSSOLoader({key:yp.SAVE_SSO_CONFIGURATION,value:!0}));const{callback:t}=e,n=ti(e,hm),a=yield zi((e=>e.auth.ssoState.ssoConfigurations));try{var i;const e=yield ji(dp.auth.createSSOConfiguration,G({},n,{enabled:null!=(i=n.enabled)&&i}));yield $i(ja.setSSOState({ssoConfigurations:[...a,e]})),null==t||t(e)}catch(e){yield $i(ja.setSSOError({key:yp.SAVE_SSO_CONFIGURATION,value:_g(e)})),null==t||t(null,e)}finally{yield $i(ja.setSSOLoader({key:yp.SAVE_SSO_CONFIGURATION,value:!1}))}}function*Om({payload:e}){yield $i(ja.setSSOLoader({key:yp.SAVE_SSO_CONFIGURATION_BY_METADATA,value:!0}));const{configFile:t,callback:n}=e,a=yield zi((e=>e.auth.ssoState.ssoConfigurations));try{const e=yield wp(t),i=yield ji(dp.auth.createSSOConfigurationByMetadata,{metadata:e});yield $i(ja.setSSOState({ssoConfigurations:[...a,i]})),null==n||n(i)}catch(e){yield $i(ja.setSSOError({key:yp.SAVE_SSO_CONFIGURATION_BY_METADATA,value:_g(e)})),null==n||n(null,e)}finally{yield $i(ja.setSSOLoader({key:yp.SAVE_SSO_CONFIGURATION_BY_METADATA,value:!1}))}}function*Pm({payload:e}){yield $i(ja.setSSOLoader({key:yp.UPDATE_SSO_CONFIGURATION,value:!0}));const{callback:t,ssoConfigId:n}=e,a=ti(e,mm),i=yield zi((e=>e.auth.ssoState.ssoConfigurations));try{const e=yield ji(dp.auth.updateSSOConfiguration,n,a),o=i.map((t=>t.id===n?e:t));yield $i(ja.setSSOState({ssoConfigurations:o})),null==t||t(e)}catch(e){yield $i(ja.setSSOError({key:yp.UPDATE_SSO_CONFIGURATION,value:_g(e)})),null==t||t(null,e)}finally{yield $i(ja.setSSOLoader({key:yp.UPDATE_SSO_CONFIGURATION,value:!1}))}}function*_m({payload:e}){yield $i(ja.setSSOLoader({key:yp.UPDATE_SSO_CONFIGURATION_BY_METADATA,value:!0}));const{callback:t,ssoConfigId:n,configFile:a}=e,i=yield zi((e=>e.auth.ssoState.ssoConfigurations));try{const e=yield wp(a),o=yield ji(dp.auth.updateSSOConfigurationByMetadata,n,{metadata:e}),r=i.map((e=>e.id===n?o:e));yield $i(ja.setSSOState({ssoConfigurations:r})),null==t||t(o)}catch(e){yield $i(ja.setSSOError({key:yp.UPDATE_SSO_CONFIGURATION,value:_g(e)})),null==t||t(null,e)}finally{yield $i(ja.setSSOLoader({key:yp.UPDATE_SSO_CONFIGURATION,value:!1}))}}function*Lm({payload:e}){yield $i(ja.setSSOLoader({key:yp.DELETE_SSO_CONFIGURATION,value:!0}));const{ssoConfigId:t,callback:n}=e,a=yield zi((e=>e.auth.ssoState.ssoConfigurations));try{yield ji(dp.auth.deleteSSOConfiguration,t),yield $i(ja.setSSOState({ssoConfigurations:a.filter((({id:e})=>e!==t))})),null==n||n(!0)}catch(e){yield $i(ja.setSSOError({key:yp.DELETE_SSO_CONFIGURATION,value:_g(e)})),null==n||n(null,e)}finally{yield $i(ja.setSSOLoader({key:yp.DELETE_SSO_CONFIGURATION,value:!1}))}}function*wm({payload:e}){const{callback:t,ssoConfigId:n}=e,a=ti(e,bm);yield $i(ja.setSSOLoader({key:yp.SAVE_SSO_DOMAIN,value:!0}));const i=yield zi((e=>e.auth.ssoState.ssoConfigurations));try{const e=yield ji(dp.auth.createSSODomain,n,a),o=i.map((t=>t.id===n?G({},t,{domains:[...t.domains,e]}):t));yield $i(ja.setSSOState({ssoConfigurations:o})),null==t||t(e)}catch(e){yield $i(ja.setSSOError({key:yp.SAVE_SSO_DOMAIN,value:_g(e)})),null==t||t(null,e)}finally{yield $i(ja.setSSOLoader({key:yp.SAVE_SSO_DOMAIN,value:!1}))}}function*Dm({payload:e}){const{ssoConfigId:t,domainId:n,callback:a}=e;yield $i(ja.setSSOLoader({key:yp.DELETE_SSO_DOMAIN,value:!0}));const i=yield zi((e=>e.auth.ssoState.ssoConfigurations));try{yield ji(dp.auth.deleteSSODomain,t,n);const e=i.map((e=>e.id===t?G({},e,{domains:e.domains.filter((({id:e})=>e!==n))}):e));yield $i(ja.setSSOState({ssoConfigurations:e})),null==a||a(!0)}catch(e){yield $i(ja.setSSOError({key:yp.DELETE_SSO_DOMAIN,value:_g(e)})),null==a||a(null,e)}finally{yield $i(ja.setSSOLoader({key:yp.DELETE_SSO_DOMAIN,value:!1}))}}function*Um({payload:e}){const{callback:t,domainId:n,ssoConfigId:a}=e;yield $i(ja.setSSOLoader({key:yp.VALIDATE_SSO_DOMAIN,value:!0}));const i=yield zi((e=>e.auth.ssoState.ssoConfigurations));try{yield ji(dp.auth.validateSSODomain,a,n);const e=i.map((e=>e.id===a?G({},e,{domains:e.domains.map((e=>e.id===n?G({},e,{validated:!0}):e))}):e));yield $i(ja.setSSOState({ssoConfigurations:e})),null==t||t(!0)}catch(e){yield $i(ja.setSSOError({key:yp.VALIDATE_SSO_DOMAIN,value:_g(e)})),null==t||t(null,e)}finally{yield $i(ja.setSSOLoader({key:yp.VALIDATE_SSO_DOMAIN,value:!1}))}}function*Rm({payload:{callback:e,ssoConfigId:t,roleIds:n}}){yield $i(ja.setSSOLoader({key:yp.UPDATE_SSO_DEFAULT_ROLES,value:!0}));const a=yield zi((e=>e.auth.ssoState.ssoConfigurations));try{yield ji(dp.auth.setSSODefaultRoles,t,{roleIds:n});const i=a.map((e=>e.id===t?G({},e,{roleIds:n}):e));yield $i(ja.setSSOState({ssoConfigurations:i})),null==e||e(!0)}catch(t){yield $i(ja.setSSOError({key:yp.UPDATE_SSO_DEFAULT_ROLES,value:_g(t)})),null==e||e(null,t)}finally{yield $i(ja.setSSOLoader({key:yp.UPDATE_SSO_DEFAULT_ROLES,value:!1}))}}function*Cm({payload:{groupsToAdd:e,groupsToDelete:t,ssoConfigId:n,callback:a}}){yield $i(ja.setSSOLoader({key:yp.SAVE_SSO_GROUPS,value:!0}));const i=yield zi((e=>e.auth.ssoState.ssoConfigurations));try{yield xi(t.map((e=>ji(dp.auth.deleteSSOGroup,n,e)))),yield xi(e.map((e=>ji(dp.auth.createSSOGroup,n,e))));const o=yield ji(dp.auth.getSSOGroups,n),r=i.map((e=>e.id===n?G({},e,{groups:o}):e));yield $i(ja.setSSOState({ssoConfigurations:r})),null==a||a(!0)}catch(e){yield $i(ja.setSSOError({key:yp.SAVE_SSO_GROUPS,value:_g(e)})),null==a||a(null,e)}finally{yield $i(ja.setSSOLoader({key:yp.SAVE_SSO_GROUPS,value:!1}))}}function*Nm({payload:{ssoConfigId:e,changedGroups:t,callback:n}}){try{yield xi(t.map((t=>ji(dp.auth.updateSSOGroup,e,t)))),null==n||n(!0)}catch(e){yield $i(ja.setSSOError({key:yp.SAVE_SSO_GROUPS,value:_g(e)})),null==n||n(null,e)}finally{yield $i(ja.setSSOLoader({key:yp.SAVE_SSO_GROUPS,value:!1}))}}function*Mm({payload:e}){yield $i(ja.setSSOLoader({key:yp.SAVE_SSO_CONFIGURATION_BY_METADATA,value:!0}));const{metadataUrl:t,configMetadata:n,ssoConfigId:a,callback:i}=e,o=yield zi((e=>e.auth.ssoState.ssoConfigurations));try{const e={url:t,configMetadata:n};let r,s;a?(r=yield ji(dp.auth.updateSSOConfigurationByMetadataUrl,a,e),s=o.map((e=>e.id===a?r:e))):(r=yield ji(dp.auth.createSSOConfigurationByMetadataUrl,e),s=[r,...o]),yield $i(ja.setSSOState({ssoConfigurations:s})),null==i||i(r)}catch(e){null==i||i(null,e)}finally{yield $i(ja.setSSOLoader({key:yp.SAVE_SSO_CONFIGURATION_BY_METADATA,value:!1}))}}function*Fm({payload:e}){yield $i(ja.setSSOLoader({key:yp.SAVE_SSO_CONFIGURATION,value:!0}));const{callback:t,ssoConfigId:n}=e,a=ti(e,Am),i=yield zi((e=>e.auth.ssoState.ssoConfigurations));try{let e,o;n?(e=yield ji(dp.auth.updateSSOConfiguration,n,a),o=i.map((t=>t.id===n?e:t))):(e=yield ji(dp.auth.createSSOConfiguration,a),o=[e,...i]),yield $i(ja.setSSOState({ssoConfigurations:o})),null==t||t(e)}catch(e){null==t||t(null,e)}finally{yield $i(ja.setSSOLoader({key:yp.SAVE_SSO_CONFIGURATION_BY_METADATA,value:!1}))}}function*Gm(){yield Go(ja.loadSSOConfigurationsV2,km),yield Go(ja.saveSSOConfigurationV2,Im),yield Go(ja.saveSSODomain,wm),yield Go(ja.deleteSSODomain,Dm),yield Go(ja.validateSSODomainV2,Um),yield Go(ja.updateSSOConfiguration,Pm),yield Go(ja.deleteSSOConfiguration,Lm),yield Go(ja.setSSOGroups,Cm),yield Go(ja.updateSSOGroups,Nm),yield Go(ja.setSSODefaultRoles,Rm),yield Go(ja.saveSSOConfigurationByMetadata,Om),yield Go(ja.updateSSOConfigurationByMetadata,_m),yield Go(ja.saveSSOConfigurationByUrl,Mm),yield Go(ja.saveSSOConfigurationByData,Fm)}const $m=["callback","profilePictureUrl"],xm=["callback","profilePictureUrl"];function*Vm(){yield $i(ja.setProfileState({loading:!0}));try{const e=yield function(e,t,n){for(var a=arguments.length,i=new Array(a>3?a-3:0),o=3;o<a;o++)i[o-3]=arguments[o];return ji.apply(void 0,[Fo,e,t,n].concat(i))}(3,2e3,dp.teams.getProfile),t=yield zi((e=>e.auth.user));ja.setUser(G({},t,e)),yield $i(ja.setProfileState({profile:e,loading:!1}))}catch(e){yield $i(ja.setProfileState({loading:!1,error:_g(e)}))}}function*jm(e){let{payload:{callback:t,profilePictureUrl:n}}=e,a=ti(e.payload,$m);yield $i(ja.setProfileState({saving:!0,error:null,loading:!0}));try{const e=yield zi((e=>e.auth.profileState.profile));let i=e.profilePictureUrl;if(n!==e.profilePictureUrl&&n&&(n||"").match(/^data:image\/([A-Za-z-+\/]+);base64,(.+)$/)){const e=function(e,t="file"){const n=e.match(/^data:image\/([A-Za-z-+\/]+);base64,(.+)$/);if(null==n)return null;const a=`image/${n[1]}`,i=function(e,t){const n=atob(e),a=[];for(let e=0;e<n.length;e+=512){const t=n.slice(e,e+512),i=new Array(t.length);for(let e=0;e<t.length;e++)i[e]=t.charCodeAt(e);a.push(new Uint8Array(i))}return new Blob(a,{type:t})}(n[2],a),o=new FormData;return o.append(t,new File([i],t,{type:a})),o}(n,"image");if(e){i=yield ji(dp.teams.updateProfileImage,e);const t=Date.now().toString(),n=new URL(i);n.searchParams.set("t",t),i=n.href}}const o=G({},e,a,{profilePictureUrl:i}),r=yield ji(dp.users.updateUserProfileV2,o),s=yield zi((e=>e.auth.user));yield $i(ja.setUser(G({},s,r))),yield $i(ja.setProfileState({profile:r,saving:!1,loading:!1})),null==t||t(o)}catch(e){yield $i(ja.setProfileState({saving:!1,error:_g(e),loading:!1})),null==t||t(null,e)}}function*Bm({payload:e}){yield $i(ja.setProfileState({loading:!0}));try{var t;yield ji(dp.teams.changePassword,e),yield $i(ja.setProfileState({loading:!1,error:void 0})),null==(t=e.callback)||t.call(e,!0)}catch(t){var n;yield $i(ja.setProfileState({loading:!1,error:_g(t)})),null==(n=e.callback)||n.call(e,null,t)}}function*Wm(){yield xo(ja.loadProfile,Vm),yield Go(ja.saveProfile,jm),yield Go(ja.changePassword,Bm)}function*zm(){yield $i(ja.setProfileState({loading:!0})),yield Et(),yield $i(ja.setUser(G({},Mp,Np))),yield $i(ja.setProfileState({loading:!1,profile:Np}))}function*Km(e){let{payload:{callback:t,profilePictureUrl:n}}=e,a=ti(e.payload,xm);yield $i(ja.setProfileState({saving:!0,error:null}));const i=Fp;let o=i.profile.profilePictureUrl;n!==i.profile.profilePictureUrl&&n&&(n||"").match(/^data:image\/([A-Za-z-+\/]+);base64,(.+)$/)&&(o=n);const r=G({},i.profile,a,{profilePictureUrl:o}),s=Mp;yield Et(),yield $i(ja.setUser(G({},s,r))),yield $i(ja.setProfileState({loading:!1,error:null,saving:!1,profile:r})),null==t||t(r)}function*Hm({payload:e}){var t;yield $i(ja.setProfileState({loading:!0})),yield Et(),yield $i(ja.setProfileState({loading:!1,error:void 0})),null==(t=e.callback)||t.call(e,!0)}function*qm(){yield xo(ja.loadProfile,zm),yield Go(ja.saveProfile,Km),yield Go(ja.changePassword,Hm)}const Jm=["callback"],Ym=["callback"],Xm=["user"],Qm=["callback"],Zm=["deviceId","callback"],eb=["deviceId","callback"],tb=["callback"],nb=["deviceId"],ab=["deviceId"],ib=["callback"],ob=["deviceId"],rb=["callback"];function*sb(e){const{step:t}=yield zi((e=>e.auth.mfaState));return{step:e.recoveryCode?dn.recoveryCode:t,loading:!1,saving:!1,error:void 0,recoveryCode:null==e?void 0:e.recoveryCode}}function*lb(){yield $i(ja.setMfaState({saving:!0}));try{const{qrCode:e}=yield ji(dp.auth.enrollMfa);yield $i(ja.setMfaState({saving:!1,error:void 0,qrCode:e}))}catch(e){yield $i(ja.setMfaState({saving:!1,error:_g(e)}))}}function*cb(e){let{payload:{callback:t}}=e,n=ti(e.payload,Jm);yield $i(ja.setMfaState({saving:!0}));try{const e=yield zi((e=>e.auth.user)),a=yield ji(dp.auth.verifyMfa,n),i=yield ji(dp.auth.getMFADevices),o=yield sb(a);yield $i(ja.setMfaState(G({},o,{mfaDevices:i}))),yield $i(ja.setUser(G({},e,{mfaEnrolled:!0}))),null==t||t(o.recoveryCode)}catch(e){yield $i(ja.setMfaState({saving:!1,error:_g(e)})),null==t||t(null,e)}}function*db(e){let{payload:{callback:t}}=e,n=ti(e.payload,Ym);yield $i(ja.setMfaState({loading:!0}));try{const e=yield ji(dp.auth.loginWithMfaV2,n),{user:a}=e,i=ti(e,Xm),o={step:dn.recoveryCode,loading:!1,saving:!1,error:void 0};null!=a&&a.recoveryCode&&(o.recoveryCode=a.recoveryCode),yield $i(ja.setMfaState(o)),yield rv(G({user:a},i)),null==t||t(o.recoveryCode)}catch(e){yield $i(ja.setMfaState({loading:!1,error:_g(e)})),null==t||t(null,e)}}function*ub({payload:e}){yield $i(ja.setMfaState({saving:!0}));try{var t;yield ji(dp.auth.disableMfa,e);const n=yield ji(dp.auth.getMFADevices);yield $i(ja.setMfaState({saving:!1,error:void 0,mfaDevices:n})),null==(t=e.callback)||t.call(e,!0)}catch(t){var n;yield $i(ja.setMfaState({saving:!1,error:_g(t)})),null==(n=e.callback)||n.call(e,!1,t)}}function*yb({payload:e}){yield $i(ja.setMfaState({saving:!0}));try{var t,n;const a=yield ji(dp.auth.preEnrollMFAWebAuthn),i=G({},a.options,{challenge:Ot(a.options.challenge),user:G({},a.options.user,{id:Ot(a.options.user.id)}),excludeCredentials:null==(t=a.options.excludeCredentials)?void 0:t.map((e=>G({},e,{id:Ot(e.id)})))});yield $i(ja.setMfaState({saving:!1})),null==(n=e.callback)||n.call(e,{options:i,webauthnToken:a.webauthnToken})}catch(t){var a;yield $i(ja.setMfaState({saving:!1,error:_g(t)})),null==(a=e.callback)||a.call(e,null,t)}}function*fb(e){let{payload:{callback:t}}=e,n=ti(e.payload,Qm);yield $i(ja.setMfaState({saving:!0}));try{const e=Pt(n.publicKey),a=yield ji(dp.auth.enrollMFAWebAuthn,G({},n,{options:e})),i=yield ji(dp.auth.getMFADevices),o=yield sb(a);yield $i(ja.setMfaState(G({},o,{mfaDevices:i}))),null==t||t(o.recoveryCode)}catch(e){yield $i(ja.setMfaState({saving:!1,error:_g(e)})),null==t||t(null,e)}}function*pb(e){let{payload:{deviceId:t,callback:n}}=e;ti(e.payload,Zm),yield $i(ja.setMfaState({saving:!0}));try{var a;const e=yield ji(dp.auth.preDisableMFAWebAuthn,t),i=G({},e.options,{challenge:Ot(e.options.challenge),allowCredentials:null==(a=e.options.allowCredentials)?void 0:a.map((e=>G({},e,{id:Ot(e.id)})))});yield $i(ja.setMfaState({saving:!1})),null==n||n({options:i,webauthnToken:e.webauthnToken})}catch(e){yield $i(ja.setMfaState({saving:!1,error:_g(e)})),null==n||n(null,e)}}function*gb(e){let{payload:{deviceId:t,callback:n}}=e,a=ti(e.payload,eb);yield $i(ja.setMfaState({saving:!0}));try{const e=Pt(a.publicKey);yield ji(dp.auth.disableMFAWebAuthn,t,G({},a,{options:e}));const i=yield ji(dp.auth.getMFADevices);yield $i(ja.setMfaState({saving:!1,error:void 0,mfaDevices:i})),null==n||n(!0)}catch(e){yield $i(ja.setMfaState({saving:!1,error:_g(e)})),null==n||n(!1,e)}}function*Sb({payload:e}){yield $i(ja.setMfaState({saving:!0}));try{var t;const n=yield ji(dp.auth.preEnrollMFASMS,e);yield $i(ja.setMfaState({saving:!1,error:void 0,otcToken:n.otcToken,phoneNumber:n.phoneNumber})),null==(t=e.callback)||t.call(e,!0)}catch(t){var n;yield $i(ja.setMfaState({saving:!1,error:_g(t)})),null==(n=e.callback)||n.call(e,!1,t)}}function*vb(e){let{payload:{callback:t}}=e,n=ti(e.payload,tb);yield $i(ja.setMfaState({saving:!0}));try{const e=yield ji(dp.auth.enrollMFASMS,n),a=yield ji(dp.auth.getMFADevices),i=yield sb(e);yield $i(ja.setMfaState(G({},i,{mfaDevices:a}))),null==t||t(i.recoveryCode)}catch(e){yield $i(ja.setMfaState({saving:!1,error:_g(e)})),null==t||t(null,e)}}function*hb(e){let{payload:{deviceId:t}}=e,n=ti(e.payload,nb);yield $i(ja.setMfaState({saving:!0}));try{var a;const e=yield ji(dp.auth.preDisableMFASMS,t);yield $i(ja.setMfaState({saving:!1,error:void 0,otcToken:e.otcToken,phoneNumber:e.phoneNumber})),null==(a=n.callback)||a.call(n,!0)}catch(e){var i;yield $i(ja.setMfaState({saving:!1,error:_g(e)})),null==(i=n.callback)||i.call(n,!1,e)}}function*mb(e){let{payload:{deviceId:t}}=e,n=ti(e.payload,ab);yield $i(ja.setMfaState({saving:!0}));try{var a;yield ji(dp.auth.disableMFASMS,t,n);const e=yield ji(dp.auth.getMFADevices);yield $i(ja.setMfaState({saving:!1,error:void 0,mfaDevices:e})),null==(a=n.callback)||a.call(n,!0)}catch(e){var i;yield $i(ja.setMfaState({saving:!1,error:_g(e)})),null==(i=n.callback)||i.call(n,!1,e)}}function*bb(){yield $i(ja.setMfaState({loading:!0}));try{yield zi((e=>e.auth.user));const e=yield ji(dp.auth.getMFADevices);yield $i(ja.setMfaState({loading:!1,error:void 0,mfaDevices:e}))}catch(e){yield $i(ja.setMfaState({loading:!1,error:_g(e)}))}}function*Ab(){yield $i(ja.setMfaState({loading:!0}));try{const e=(yield ji(dp.auth.getMFAStrategiesConfig)).strategies.filter((({isActive:e})=>e)).map((({strategy:e})=>e));yield $i(ja.setMfaState({loading:!1,error:void 0,mfaStrategies:e}))}catch(e){yield $i(ja.setMfaState({loading:!1,error:_g(e)}))}}function*Tb(){yield Go(ja.enrollMfa,lb),yield Go(ja.getMFADevices,bb),yield Go(ja.getMFAStrategies,Ab),yield Go(ja.verifyMfa,cb),yield Go(ja.disableMfa,ub),yield Go(ja.verifyMfaAfterForce,db),yield Go(ja.preDisableMfaSms,hb),yield Go(ja.disableMfaSms,mb),yield Go(ja.preEnrollMfaSms,Sb),yield Go(ja.enrollMfaSms,vb),yield Go(ja.preEnrollMfaWebAuthn,yb),yield Go(ja.enrollMfaWebAuthn,fb),yield Go(ja.preDisableMfaWebAuthn,pb),yield Go(ja.disableMfaWebAuthn,gb)}function*Eb(){yield $i(ja.setMfaState({saving:!0})),yield $i(ja.setMfaState({saving:!1,error:void 0,qrCode:"test"}))}function*kb({payload:{callback:e}}){const{mfaDevices:t={webauthn:[],phones:[],authenticators:[],emails:[]}}=yield zi((e=>e.auth.mfaState));yield $i(ja.setMfaState({saving:!0})),yield Et();const n={token:"token",recoveryCode:"recoveryCode"},a={step:dn.recoveryCode,loading:!1,error:void 0,saving:!1,mfaDevices:G({},t,{authenticators:[{id:"authenticator-id"}]})};null!=n&&n.recoveryCode&&(a.recoveryCode=n.recoveryCode),yield $i(ja.setMfaState(a)),yield $i(ja.setUser(G({},Mp,{mfaEnrolled:!0}))),null==e||e(a.recoveryCode)}function*Ib(e){let{payload:{callback:t}}=e,n=ti(e.payload,ib);yield $i(ja.setMfaState({loading:!0})),yield Et();const a=G({},n,{recoveryCode:"recoveryCode"}),i={step:dn.recoveryCode,loading:!1,error:void 0,saving:!1};null!=a&&a.recoveryCode&&(i.recoveryCode=a.recoveryCode),yield $i(ja.setMfaState(i)),yield Et(),yield $i(ja.setUser(G({},Mp,{mfaEnrolled:!0}))),null==t||t(i.recoveryCode)}function*Ob({payload:e}){var t;const{mfaDevices:n={webauthn:[],phones:[],authenticators:[],emails:[]}}=yield zi((e=>e.auth.mfaState));yield $i(ja.setMfaState({saving:!0})),yield Et(),yield $i(ja.setMfaState({saving:!1,error:void 0,mfaDevices:G({},n,{authenticators:[]})})),yield $i(ja.setUser(G({},Mp))),null==(t=e.callback)||t.call(e,!0)}function*Pb(e){let{}=e,t=ti(e.payload,ob);yield $i(ja.setMfaState({saving:!0}));try{var n;yield $i(ja.setMfaState({saving:!1,error:void 0,otcToken:"otc-token",phoneNumber:"+972504589346"})),null==(n=t.callback)||n.call(t,!0)}catch(e){var a;yield $i(ja.setMfaState({saving:!1,error:_g(e)})),null==(a=t.callback)||a.call(t,!1,e)}}function*_b({payload:e}){var t;const{mfaDevices:n={webauthn:[],phones:[],authenticators:[],emails:[]}}=yield zi((e=>e.auth.mfaState));yield $i(ja.setMfaState({saving:!0})),yield Et(),yield $i(ja.setMfaState({loading:!1,error:void 0,mfaDevices:G({},n,{phones:[]})})),yield $i(ja.setUser(G({},Mp))),null==(t=e.callback)||t.call(e,!0)}function*Lb({payload:e}){var t;yield $i(ja.setMfaState({saving:!0})),yield Et(),yield $i(ja.setMfaState({saving:!1,error:void 0,otcToken:"otc-token",phoneNumber:"+972504589346"})),null==(t=e.callback)||t.call(e,!0)}function*wb(e){let{payload:{callback:t}}=e;ti(e.payload,rb);const{mfaDevices:n={webauthn:[],phones:[],authenticators:[],emails:[]}}=yield zi((e=>e.auth.mfaState));yield $i(ja.setMfaState({saving:!0})),yield Et();const a={token:"token",recoveryCode:"recoveryCode"},i={step:dn.recoveryCode,loading:!1,error:void 0,saving:!1,mfaDevices:G({},n,{phones:[{id:"phone-id",phoneNumber:"+972504589346"}]})};null!=a&&a.recoveryCode&&(i.recoveryCode=a.recoveryCode),yield $i(ja.setMfaState(i)),yield $i(ja.setUser(G({},Mp,{mfaEnrolled:!0}))),null==t||t(i.recoveryCode)}function*Db(){yield Go(ja.enrollMfa,Eb),yield Go(ja.verifyMfa,kb),yield Go(ja.disableMfa,Ob),yield Go(ja.verifyMfaAfterForce,Ib),yield Go(ja.preDisableMfaSms,Pb),yield Go(ja.disableMfaSms,_b),yield Go(ja.preEnrollMfaSms,Lb),yield Go(ja.enrollMfaSms,wb)}const Ub=["callback"];function*Rb({payload:e}){yield $i(ja.setForgotPasswordState({loading:!0}));try{var t;yield ji(dp.auth.forgotPassword,e),yield $i(ja.setForgotPasswordState({loading:!1,error:void 0,step:Jt.success})),null==(t=e.callback)||t.call(e,!0)}catch(t){var n;yield $i(ja.setForgotPasswordState({loading:!1,error:_g(t,"Unknown error occurred")})),null==(n=e.callback)||n.call(e,!1,t)}}function*Cb(e){let{payload:{callback:t}}=e,n=ti(e.payload,Ub);yield $i(ja.setForgotPasswordState({loading:!0}));try{yield ji(dp.auth.resetPassword,n),yield $i(ja.setForgotPasswordState({loading:!1,error:void 0,step:Jt.success})),null==t||t(!0)}catch(e){yield $i(ja.setForgotPasswordState({loading:!1,error:_g(e)})),null==t||t(!1,e)}}function*Nb({payload:e}){yield $i(ja.setForgotPasswordState({loading:!0}));try{const t=yield ji(dp.auth.loadPasswordConfig,e);yield $i(ja.setForgotPasswordState({loading:!1,passwordConfig:t}))}catch(e){yield $i(ja.setForgotPasswordState({loading:!1,error:_g(e)}))}}function*Mb(){yield xo(ja.forgotPassword,Rb),yield xo(ja.resetPassword,Cb),yield xo(ja.loadPasswordConfig,Nb)}let Fb;!function(e){e.USERS="USERS",e.STATS="STATS",e.UPDATE_USER="UPDATE_USER",e.DELETE_USER="DELETE_USER",e.RESEND_ACTIVATE_LINK="RESEND_ACTIVATE_LINK",e.RESEND_INVITATION_LINK="RESEND_INVITATION_LINK",e.ROLES_AND_PERMISSIONS="ROLES_AND_PERMISSIONS",e.CREATE_TOKEN_LINK="CREATE_TOKEN_LINK",e.GET_TOKEN_LINK="GET_TOKEN_LINK",e.UPDATE_TOKEN_LINK="UPDATE_TOKEN_LINK",e.DELETE_TOKEN_LINK="DELETE_TOKEN_LINK",e.CONFIG_TOKEN_LINK="CONFIG_TOKEN_LINK",e.CONFIG_TEMPORARY_USERS="CONFIG_TEMPORARY_USERS",e.UPDATE_USER_EXPIRATION_TIME="UPDATE_USER_EXPIRATION_TIME"}(Fb||(Fb={}));const Gb=["callback","events"],$b=["user"],xb=["callback"],Vb=["callback"];function*jb({payload:{userId:e,token:t}}){yield $i(ja.setActivateState({loading:!0,step:Vt.activating}));try{const{isAuthenticated:n}=yield zi((e=>e.auth));n&&(yield $i(ja.silentLogout()));const a=yield ji(dp.auth.getActivateAccountStrategy,{userId:e,token:t});yield $i(ja.setActivateStrategyState({strategy:a,loading:!1,error:void 0})),a.shouldSetPassword&&(yield $i(ja.setActivateState({loading:!1,step:Vt.activatingForm})))}catch(e){yield $i(ja.setActivateState({loading:!1,error:_g(e)}))}}function*Bb(e){let{payload:{callback:t,events:n}}=e,a=ti(e.payload,Gb);yield $i(ja.setActivateState({loading:!0}));try{const e=Vo.onRedirectTo,{routes:o}=yield zi((e=>e.auth)),r=yield ji(dp.auth.activateAccountV2,a),{user:s}=r,l=ti(r,$b);if(s.redirectLocation)return void(window.location.href=s.redirectLocation);if(kg(s)){yield $i(ja.setActivateState({step:Vt.success}));const t=yield Pg(s);yield $i(ja.setState(t)),yield Ki(1e3),e(o.loginUrl,{preserveQueryParams:!0})}else{var i;yield $i(ja.setActivateState({step:Vt.success}));const e={email:s.email,origin:vg.ACTIVATION_LINK,id:s.id,tenantId:s.tenantId,name:s.name,createdAt:new Date};null==n||null==(i=n.userVerified)||i.call(n,e),wg(Lg.USER_VERIFIED,e),yield ji(rv,G({user:s},l),{isAuthenticated:!0}),yield Ki(1e3),yield pv(),yield $i(ja.resetActivateState())}null==t||t(!0)}catch(e){yield $i(ja.setActivateState({loading:!1,error:_g(e)}))}}function*Wb({payload:e}){const{callback:t}=e,n=ti(e,xb);yield $i(ja.setActivateStrategyState({loading:!0}));try{const e=yield ji(dp.auth.getActivateAccountStrategy,n);yield $i(ja.setActivateStrategyState({strategy:e,loading:!1,error:void 0})),null==t||t(e)}catch(e){yield $i(ja.setActivateStrategyState({loading:!1,error:_g(e)}))}}function*zb({payload:e}){const{callback:t}=e,n=ti(e,Vb);yield $i(ja.setTeamLoader({key:Fb.RESEND_ACTIVATE_LINK,value:n.email})),yield $i(ja.setActivateState({loading:!0}));try{yield ji(dp.auth.resendActivationEmail,n),yield $i(ja.setActivateState({loading:!1,error:void 0,resentEmail:!0})),null==t||t(!0)}catch(e){yield $i(ja.setActivateState({loading:!1,error:_g(e)})),yield $i(ja.setTeamError({key:Fb.RESEND_ACTIVATE_LINK,value:_g(e)})),null==t||t(null,e)}yield $i(ja.setTeamLoader({key:Fb.RESEND_ACTIVATE_LINK,value:!1}))}function*Kb(){yield xo(ja.activateAccount,Bb),yield xo(ja.preActivateAccount,jb),yield xo(ja.getActivateAccountStrategy,Wb),yield xo(ja.resendActivationEmail,zb)}function*Hb({payload:e}){if(e.token&&e.userId)try{yield $i(ja.setAcceptInvitationState({error:void 0,step:zt.pending})),yield ji(dp.auth.acceptInvitation,e),yield $i(ja.setState({isAuthenticated:!1,user:null,acceptInvitationState:{error:void 0,step:zt.success}}))}catch(e){yield $i(ja.setAcceptInvitationState({step:zt.failed,error:_g(e)}))}else yield $i(ja.setAcceptInvitationState({error:void 0,step:zt.invalid}))}function*qb(){yield xo(ja.acceptInvitation,Hb)}var Jb,Yb=new Uint8Array(16);function Xb(){if(!Jb&&!(Jb="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Jb(Yb)}const Qb=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,Zb=function(e){return"string"==typeof e&&Qb.test(e)};for(var eA=[],tA=0;tA<256;++tA)eA.push((tA+256).toString(16).substr(1));const nA=function(e,t,n){var a=(e=e||{}).random||(e.rng||Xb)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t){n=n||0;for(var i=0;i<16;++i)t[n+i]=a[i];return t}return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(eA[e[t+0]]+eA[e[t+1]]+eA[e[t+2]]+eA[e[t+3]]+"-"+eA[e[t+4]]+eA[e[t+5]]+"-"+eA[e[t+6]]+eA[e[t+7]]+"-"+eA[e[t+8]]+eA[e[t+9]]+"-"+eA[e[t+10]]+eA[e[t+11]]+eA[e[t+12]]+eA[e[t+13]]+eA[e[t+14]]+eA[e[t+15]]).toLowerCase();if(!Zb(n))throw TypeError("Stringified UUID is invalid");return n}(a)};let aA,iA;!function(e){e.CREATE_GROUP="CREATE_GROUP",e.GET_GROUP="GET_GROUP",e.GET_GROUPS="GET_GROUPS",e.DELETE_GROUP="DELETE_GROUP",e.UPDATE_GROUP="UPDATE_GROUP",e.ADD_USERS_TO_GROUP="ADD_USERS_TO_GROUP",e.DELETE_USERS_FROM_GROUP="DELETE_USERS_FROM_GROUP",e.ADD_ROLES_TO_GROUP="ADD_ROLES_TO_GROUP",e.DELETE_ROLES_FROM_GROUP="DELETE_ROLES_FROM_GROUP",e.GET_GROUP_CONFIGURATION="GET_GROUP_CONFIGURATION",e.UPDATE_GROUP_CONFIGURATION="UPDATE_GROUP_CONFIGURATION",e.GET_TEAM_USERS="GET_TEAM_USERS"}(aA||(aA={})),function(e){e.roles="roles",e.users="users",e.rolesAndUsers="rolesAndUsers"}(iA||(iA={}));const oA=["callback"],rA=["roles"],sA=["callback"],lA=["callback","profileImage"],cA=["callback"],dA=["callback","userId"],uA=["callback"],yA=["callback"],fA=["callback"],pA=["callback"],gA=["callback"],SA=["callback"],vA=["callback"],hA=["callback"],mA=["callback"],bA=["callback","profileImage"],AA=["callback"],TA=["callback"],EA=["callback"],kA=["callback"],IA=["callback"],OA=["callback"],PA=["callback"],_A=["callback"],LA=()=>zi((e=>e.auth.teamState));function*wA(){try{const{groups:e}=yield ji(dp.groups.getGroups,{_groupsRelations:iA.roles});return e}catch(e){return[]}}function*DA({payload:e}){var t,n,a,i,o;const{silentLoading:r,callback:s}=e,l=yield LA(),c=null!=(t=e.pageSize)?t:l.pageSize,d=null!=(n=e.pageOffset)?n:l.pageOffset,u=null!=(a=e.filter)?a:l.filterV2,y=null!=(i=e.sort)?i:l.sortV2,f=null!=(o=null==e?void 0:e.shouldShowSubTenantUsersIfReseller)?o:null==l?void 0:l.shouldShowSubTenantUsersIfReseller;yield $i(ja.setTeamLoader({key:Fb.USERS,value:!r})),yield $i(ja.setTeamState({pageSize:c,pageOffset:d,filterV2:u,sortV2:y}));try{const[{items:t,_metadata:{totalPages:n,totalItems:a}},{items:i},{items:o},r]=yield xi([ji(dp.users.getUsersV2,G({},(null==u?void 0:u.length)&&{_filter:u},y&&{_sortBy:y},e.order&&{_order:e.order},{_offset:d,_limit:c,_includeSubTenants:f})),ji(dp.teams.loadAvailableRoles),ji(dp.teams.loadAvailablePermissions),ji(wA)]),l=t.map((e=>{var t;const n=null==e||null==(t=e.groups)?void 0:t.map((e=>r.filter((t=>t.id===e.id)))).flat();return G({},e,{groups:n})}));yield $i(ja.setTeamState({users:l.map((e=>G({},e,{roleIds:e.roles.map((e=>e.id))}))),totalPages:n,totalItems:a,roles:i,permissions:o})),null==s||s(t)}catch(e){yield $i(ja.setTeamError({key:Fb.USERS,value:_g(e)})),yield $i(ja.setTeamState({totalPages:0,users:[]})),null==s||s(null,e)}yield $i(ja.setTeamLoader({key:Fb.USERS,value:!1}))}function*UA({payload:e}){var t,n,a,i;const{silentLoading:o,callback:r}=e,s=yield LA(),l=null!=(t=e.pageSize)?t:s.pageSize,c=null!=(n=e.pageOffset)?n:s.pageOffset,d=null!=(a=e.filter)?a:s.filter,u=null!=(i=e.sort)?i:s.sort;yield $i(ja.setTeamLoader({key:Fb.USERS,value:!o})),yield $i(ja.setTeamState({pageSize:l,pageOffset:c,filter:d,sort:u}));try{const[{items:e,totalPages:t,totalItems:n},{items:a},{items:i}]=yield xi([ji(dp.teams.loadUsers,{pageSize:l,pageOffset:c,filter:d,sort:u}),ji(dp.teams.loadAvailableRoles),ji(dp.teams.loadAvailablePermissions)]);yield $i(ja.setTeamState({users:e,totalPages:t,totalItems:n,roles:a,permissions:i})),null==r||r(e)}catch(e){yield $i(ja.setTeamError({key:Fb.USERS,value:e.message})),yield $i(ja.setTeamState({totalPages:0,users:[]})),null==r||r(null,e)}yield $i(ja.setTeamLoader({key:Fb.USERS,value:!1}))}function*RA({payload:e}){var t,n,a,i,o;const{silentLoading:r,callback:s}=e,l=yield LA(),c={_limit:(null!=(t=e._limit)?t:l.allUsersQueryParams._limit)||20,_offset:(null!=(n=e._offset)?n:l.allUsersQueryParams._offset)||0,_filter:(null!=(a=e._filter)?a:l.allUsersQueryParams._filter)||"",_sortBy:(null!=(i=e._sortBy)?i:l.allUsersQueryParams._sortBy)||"name",_order:(null!=(o=e._order)?o:l.allUsersQueryParams._order)||"DESC"};yield $i(ja.setTeamLoader({key:Fb.USERS,value:!r})),yield $i(ja.setTeamState({allUsersQueryParams:c}));try{const[{items:e,_metadata:{totalPages:t,totalItems:n}},{items:a},{items:i}]=yield xi([ji(dp.subTenants.loadAllUsers,G({},c)),ji(dp.teams.loadAvailableRoles),ji(dp.teams.loadAvailablePermissions)]);yield $i(ja.setTeamState({allUsers:e,totalPages:t,totalItems:n,roles:a,permissions:i})),null==s||s(e)}catch(e){yield $i(ja.setTeamError({key:Fb.USERS,value:_g(e)})),yield $i(ja.setTeamState({totalPages:0,users:[]})),null==s||s(null,e)}yield $i(ja.setTeamLoader({key:Fb.USERS,value:!1}))}function*CA({payload:e}){yield $i(ja.setTeamLoader({key:Fb.ROLES_AND_PERMISSIONS,value:!0}));try{var t;const[{items:n},{items:a}]=yield xi([ji(dp.teams.loadAvailableRoles),ji(dp.teams.loadAvailablePermissions)]);yield $i(ja.setTeamState({roles:n,permissions:a})),null==e||null==(t=e.callback)||t.call(e,{roles:n,permissions:a})}catch(t){var n;null==e||null==(n=e.callback)||n.call(e,null,t),yield $i(ja.setTeamError({key:Fb.ROLES_AND_PERMISSIONS,value:_g(t)}))}yield $i(ja.setTeamLoader({key:Fb.ROLES_AND_PERMISSIONS,value:!0}))}function*NA({payload:e}){const{callback:t}=e,n=ti(e,oA),a=yield LA();yield $i(ja.setTeamState({addUserDialogState:G({},a.addUserDialogState,{loading:!0})}));try{var i;const e=yield ji(dp.teams.addUser,n),{roles:o}=e,r=G({},ti(e,rA),{roleIds:null!=(i=null==o?void 0:o.map((e=>e.id)))?i:[]});null==t||t(r),yield $i(ja.setTeamState({users:[r,...a.users],addUserDialogState:{open:!1,loading:!1}}))}catch(e){yield $i(ja.setTeamState({addUserDialogState:G({},a.addUserDialogState,{loading:!1,error:_g(e)})})),null==t||t(null,e)}}function*MA({payload:e}){const{callback:t}=e,n=yield LA();yield $i(ja.setTeamState({addUserDialogState:G({},n.addUserDialogState,{loading:!0})}));const a=[],i=[],o=e.emails.map((t=>G({email:t,roleIds:e.roleIds},e.expirationInSeconds&&{expirationInSeconds:e.expirationInSeconds})));yield $i(ja.setTeamState({addUserDialogState:{open:!0,loading:!0}}));for(let e=0;e<o.length;e++){const t=o.at(e);try{yield ji(dp.teams.addUser,t),a.push(t.email)}catch(e){i.push(t.email)}}const r={pageOffset:0,pageSize:10,filter:"",silentLoading:e.emails.length>0};yield $i(ja.loadUsersV2(r)),yield $i(ja.setTeamState({addUserDialogState:{loading:!1}})),null==t||t({unallowedEmails:i,allowedEmails:a})}function*FA({payload:e}){const{callback:t}=e,n=ti(e,sA),a=yield LA();yield $i(ja.setTeamState({addUserDialogState:G({},a.addUserDialogState,{loading:!0})}));try{yield ji(dp.subTenants.addUserToTenantAndSubTenants,n);const{items:e,_metadata:{totalPages:a,totalItems:i}}=yield ji(dp.subTenants.loadAllUsers,{_limit:20,_offset:0,_filter:"",_sortBy:"name",_order:"DESC"});yield $i(ja.setTeamState({allUsers:e,totalPages:a,totalItems:i,addUserDialogState:{open:!1,loading:!1}})),null==t||t(null)}catch(e){yield $i(ja.setTeamState({addUserDialogState:G({},a.addUserDialogState,{loading:!1,error:_g(e)})})),null==t||t(null,e)}}function*GA({payload:e}){const{callback:t}=e,n=ti(e,lA),{id:a}=n,i=yield LA(),o=i.users.find((e=>e.id===n.id));yield $i(ja.setTeamLoader({key:Fb.UPDATE_USER,value:a||""})),yield $i(ja.setTeamState({addUserDialogState:G({},i.addUserDialogState,{loading:!0})})),yield $i(ja.setTeamState({addUserDialogState:G({},i.addUserDialogState,{loading:!0}),users:i.users.map((e=>e.id===n.id?G({},e,n):e))}));try{var r;o.roleIds.length>0&&0===(null==(r=n.roleIds)?void 0:r.length)&&(n.roleIds=[""]);const{item:e}=yield ji(dp.teams.updateUser,n);null==t||t(e),yield $i(ja.setTeamState({users:i.users.map((t=>t.id===e.id?G({},t,e,{groups:t.groups,createdAt:t.createdAt,customData:t.customData,lastLogin:t.lastLogin}):t))})),yield $i(ja.setTeamLoader({key:Fb.UPDATE_USER,value:!1}))}catch(e){yield $i(ja.setTeamState({addUserDialogState:G({},i.addUserDialogState,{loading:!1,error:_g(e)}),users:i.users.map((e=>e.id===n.id?G({},e,o):e))})),yield $i(ja.setTeamLoader({key:Fb.UPDATE_USER,value:!1})),null==t||t(null,e)}}function*$A({payload:e}){const{callback:t}=e,n=ti(e,cA),a=yield LA();yield $i(ja.setTeamState({deleteUserDialogState:G({},a.deleteUserDialogState,{loading:!0})}));try{yield ji(dp.teams.deleteUser,n),null==t||t(!0),yield $i(ja.setTeamState({users:a.users.filter((e=>e.id!==n.userId)),deleteUserDialogState:{open:!1,loading:!1}}))}catch(e){yield $i(ja.setTeamState({deleteUserDialogState:G({},a.deleteUserDialogState,{loading:!1,error:_g(e)})})),null==t||t(null,e)}}function*xA({payload:e}){const{callback:t,userId:n}=e,a=ti(e,dA),i=yield LA();yield $i(ja.setTeamState({addUserDialogState:G({},i.addUserDialogState,{loading:!0})}));try{yield ji(dp.subTenants.setUserRolesForSubTenants,n,a);const e=i.allUsers.find((e=>e.id===n));let o=[];e&&(o=e.tenants.map((e=>{var t;return G({},e,{roles:(null==(t=a.subTenantsRoles.find((t=>t.tenantId===e.tenantId)))?void 0:t.roleIds.map((e=>i.roles.find((({id:t})=>e===t)))).filter((e=>e)))||e.roles})}))),yield $i(ja.setTeamState({allUsers:[...i.allUsers.filter((e=>e.id!==n)),...e?[G({},e,{tenants:o})]:[]],addUserDialogState:{open:!1,loading:!1}})),null==t||t(!0)}catch(e){yield $i(ja.setTeamState({addUserDialogState:G({},i.addUserDialogState,{loading:!1,error:_g(e)})})),null==t||t(null,e)}}function*VA({payload:e}){const{callback:t}=e,n=ti(e,uA),a=yield LA();yield $i(ja.setTeamState({deleteUserDialogState:G({},a.deleteUserDialogState,{loading:!0})}));try{yield ji(dp.subTenants.removeUserFromTenantAndSubTenants,n),null==t||t(!0),yield $i(ja.setTeamState({allUsers:a.allUsers.filter((e=>e.id!==n.userId&&e.tenants.length===n.subTenants.length)),deleteUserDialogState:{open:!1,loading:!1}}))}catch(e){yield $i(ja.setTeamState({deleteUserDialogState:G({},a.deleteUserDialogState,{loading:!1,error:_g(e)})})),null==t||t(null,e)}}function*jA({payload:e}){const{callback:t}=e,n=ti(e,yA);yield $i(ja.setTeamLoader({key:Fb.RESEND_ACTIVATE_LINK,value:n.userId}));try{yield ji(dp.teams.resendActivationLink,n),null==t||t(!0)}catch(e){yield $i(ja.setTeamError({key:Fb.RESEND_ACTIVATE_LINK,value:_g(e)})),null==t||t(null,e)}yield $i(ja.setTeamLoader({key:Fb.RESEND_ACTIVATE_LINK,value:!1}))}function*BA({payload:e}){const{callback:t}=e,n=ti(e,fA);yield $i(ja.setTeamLoader({key:Fb.RESEND_INVITATION_LINK,value:n.email}));try{yield ji(dp.teams.resendInvitationLink,n),null==t||t(!0)}catch(e){yield $i(ja.setTeamError({key:Fb.RESEND_INVITATION_LINK,value:_g(e)})),null==t||t(null,e)}yield $i(ja.setTeamLoader({key:Fb.RESEND_INVITATION_LINK,value:!1}))}function*WA({payload:e}){const{callback:t}=e,n=ti(e,pA);yield $i(ja.setTeamLoader({key:Fb.RESEND_INVITATION_LINK,value:n.email}));try{yield ji(dp.auth.resendInvitationEmail,n),null==t||t(!0)}catch(e){yield $i(ja.setTeamError({key:Fb.RESEND_INVITATION_LINK,value:_g(e)})),null==t||t(null,e)}yield $i(ja.setTeamLoader({key:Fb.RESEND_INVITATION_LINK,value:!1}))}function*zA({payload:e}){const{callback:t}=e,n=ti(e,gA);yield $i(ja.setTeamLoader({key:Fb.RESEND_INVITATION_LINK,value:n.email}));try{yield ji(dp.teams.resendInvitationLinkToAllTenants,n),null==t||t(!0)}catch(e){yield $i(ja.setTeamError({key:Fb.RESEND_INVITATION_LINK,value:_g(e)})),null==t||t(null,e)}yield $i(ja.setTeamLoader({key:Fb.RESEND_INVITATION_LINK,value:!1}))}function*KA(){yield $i(ja.setTeamError({key:Fb.CONFIG_TOKEN_LINK,value:!1}));try{const e=yield ji(dp.teams.getInviteLinkConfiguration);yield $i(ja.setTeamState({inviteTokenState:G({},e)}))}catch(e){yield $i(ja.setTeamError({key:Fb.CONFIG_TOKEN_LINK,value:_g(e)}))}}function*HA(){yield $i(ja.setTeamError({key:Fb.CONFIG_TEMPORARY_USERS,value:!1}));try{const e=yield ji(dp.teams.getTemporaryUserConfiguration);yield $i(ja.setTeamState({temporaryUsersConfig:e}))}catch(e){yield $i(ja.setTeamError({key:Fb.CONFIG_TEMPORARY_USERS,value:_g(e)}))}}function*qA({payload:e}){const{callback:t}=e,n=ti(e,SA),a=yield LA();yield $i(ja.setTeamLoader({key:Fb.UPDATE_USER_EXPIRATION_TIME,value:!0}));try{const e=yield ji(dp.teams.updateUserExpirationTime,n);yield $i(ja.setTeamState({users:a.users.map((t=>t.id===n.userId?G({},t,{temporaryExpirationDate:new Date(e.temporaryExpirationDate)}):t))})),null==t||t(!0)}catch(e){yield $i(ja.setTeamError({key:Fb.UPDATE_USER_EXPIRATION_TIME,value:_g(e)})),null==t||t(null,e)}finally{yield $i(ja.setTeamLoader({key:Fb.UPDATE_USER_EXPIRATION_TIME,value:!1}))}}function*JA({payload:e}){const{callback:t}=e,n=ti(e,vA),a=yield LA();yield $i(ja.setTeamLoader({key:Fb.UPDATE_USER_EXPIRATION_TIME,value:!0}));try{yield ji(dp.teams.setPermanentUser,n.userId),yield $i(ja.setTeamState({users:a.users.map((e=>e.id===n.userId?G({},e,{temporaryExpirationDate:void 0}):e))})),null==t||t(!0)}catch(e){yield $i(ja.setTeamError({key:Fb.UPDATE_USER_EXPIRATION_TIME,value:_g(e)})),null==t||t(null,e)}finally{yield $i(ja.setTeamLoader({key:Fb.UPDATE_USER_EXPIRATION_TIME,value:!1}))}}function*YA(){yield $i(ja.setTeamError({key:Fb.GET_TOKEN_LINK,value:!1}));try{yield ji(KA);const e=yield ji(dp.teams.getInviteUserLink),{inviteTokenState:t}=yield LA();yield $i(ja.setTeamState({inviteTokenState:G({},t,e)}))}catch(e){yield $i(ja.setTeamError({key:Fb.GET_TOKEN_LINK,value:_g(e)}))}}function*XA({payload:{callback:e}}){yield $i(ja.setTeamError({key:Fb.CREATE_TOKEN_LINK,value:!1}));const{inviteTokenState:t}=yield LA();try{const n=yield ji(dp.teams.createInviteUserLink,{expiresInMinutes:43200});yield $i(ja.setTeamState({inviteTokenState:G({},t,n)})),null==e||e(n.token)}catch(t){null==e||e(null,t),yield $i(ja.setTeamError({key:Fb.CREATE_TOKEN_LINK,value:_g(t)}))}}function*QA({payload:{callback:e,expiresInMinutes:t,shouldSendEmail:n}}){const{inviteTokenState:a}=yield LA();yield $i(ja.setTeamError({key:Fb.UPDATE_TOKEN_LINK,value:!1}));try{const i=yield ji(dp.teams.updateInviteUserLink,{expiresInMinutes:t,shouldSendEmail:n});yield $i(ja.setTeamState({inviteTokenState:G({},a,i)})),null==e||e(!0)}catch(t){null==e||e(null,t),yield $i(ja.setTeamError({key:Fb.UPDATE_TOKEN_LINK,value:_g(t)}))}}function*ZA({payload:e}){const{callback:t}=null!=e?e:{};yield $i(ja.setTeamError({key:Fb.DELETE_TOKEN_LINK,value:!1}));try{yield ji(dp.teams.deleteInviteUserLink),yield $i(ja.setTeamState({inviteTokenState:void 0})),null==t||t(!0)}catch(e){yield $i(ja.setTeamError({key:Fb.DELETE_TOKEN_LINK,value:_g(e)})),null==t||t(!1,e)}}function*eT({payload:e}){yield $i(ja.setTeamState({addUserDialogState:G({open:!0,loading:!1,error:!1},e)}))}function*tT({payload:e}){const t=yield LA(),{addUserDialogState:{onClose:n}}=t;null==n||n(e),yield $i(ja.setTeamState({addUserDialogState:{loading:!1,error:!1,open:!1}}))}function*nT({payload:e}){yield $i(ja.setTeamState({deleteUserDialogState:G({open:!0,loading:!1,error:!1},e)}))}function*aT({payload:e}){const t=yield LA(),{deleteUserDialogState:{onClose:n}}=t;null==n||n(e),yield $i(ja.setTeamState({deleteUserDialogState:{loading:!1,error:!1,open:!1}}))}function*iT(){yield $o(ja.loadUsers,UA),yield $o(ja.loadUsersV2,DA),yield $o(ja.loadAllSubTenantsUsers,RA),yield $o(ja.loadRoles,CA),yield Go(ja.addUser,NA),yield Go(ja.addUsersBulk,MA),yield Go(ja.addUserToSubTenants,FA),yield Go(ja.updateUser,GA),yield Go(ja.setUserRolesForSubTenants,xA),yield Go(ja.deleteUser,$A),yield Go(ja.deleteUserFromSubTenants,VA),yield Go(ja.resendActivationLink,jA),yield Go(ja.resendInvitationLink,BA),yield Go(ja.resendInvitationEmail,WA),yield Go(ja.resendInvitationLinkToAllSubTenants,zA),yield Go(ja.getTemporaryUsersConfig,HA),yield Go(ja.updateUserExpirationTime,qA),yield Go(ja.setUserAsPermanent,JA),yield Go(ja.getInvitationLink,YA),yield Go(ja.createInvitationLink,XA),yield Go(ja.updateInvitationLink,QA),yield Go(ja.deleteInvitationLink,ZA),yield Go(ja.openAddUserDialog,eT),yield Go(ja.closeAddUserDialog,tT),yield Go(ja.openDeleteUserDialog,nT),yield Go(ja.closeDeleteUserDialog,aT)}function*oT({payload:e}){var t,n,a,i;const{silentLoading:o,callback:r}=e,s=yield LA(),l=null!=(t=e.pageSize)?t:s.pageSize,c=null!=(n=e.pageOffset)?n:s.pageOffset,d=null!=(a=e.filter)?a:s.filterV2,u=null!=(i=e.sort)?i:s.sortV2;yield $i(ja.setTeamLoader({key:Fb.USERS,value:!o})),yield $i(ja.setTeamState({pageSize:l,pageOffset:c,filterV2:d,sortV2:u})),yield Et(),yield $i(ja.setTeamState({users:Zp,totalPages:2,totalItems:10,roles:zp,permissions:Hp})),yield $i(ja.setTeamLoader({key:Fb.USERS,value:!1})),null==r||r(Zp)}function*rT({payload:e}){var t,n,a,i,o;const{silentLoading:r,callback:s}=e,l=yield LA(),c=null!=(t=e._limit)?t:l.allUsersQueryParams._limit,d=null!=(n=e._offset)?n:l.allUsersQueryParams._offset,u=null!=(a=e._filter)?a:l.allUsersQueryParams._filter,y=null!=(i=e._sortBy)?i:l.allUsersQueryParams._sortBy,f=null!=(o=e._order)?o:l.allUsersQueryParams._order;yield $i(ja.setTeamLoader({key:Fb.USERS,value:!r})),yield $i(ja.setTeamState({allUsersQueryParams:{_limit:c,_offset:d,_filter:u,_sortBy:y,_order:f}})),yield Et(),yield $i(ja.setTeamState({allUsers:tg,totalPages:2,totalItems:10,roles:zp,permissions:Hp})),yield $i(ja.setTeamLoader({key:Fb.USERS,value:!1})),null==s||s(tg)}function*sT({payload:e}){var t;yield $i(ja.setTeamLoader({key:Fb.ROLES_AND_PERMISSIONS,value:!0})),yield Et(),yield $i(ja.setTeamState({roles:zp,permissions:Hp})),yield $i(ja.setTeamLoader({key:Fb.ROLES_AND_PERMISSIONS,value:!0})),null==e||null==(t=e.callback)||t.call(e,{roles:zp,permissions:Hp})}function*lT({payload:e}){const{callback:t}=e,n=ti(e,hA),a=yield LA();yield $i(ja.setTeamState({addUserDialogState:G({},a.addUserDialogState,{loading:!0})})),yield Et();const i=new Date,o=G({},Yp,{groups:[]},n,{id:`${nA()}`,temporaryExpirationDate:n.expirationInSeconds?new Date(i.setSeconds(i.getSeconds()+n.expirationInSeconds)):void 0});null==t||t(o),yield $i(ja.setTeamState({users:[o,...a.users],addUserDialogState:{open:!1,loading:!1}}))}function*cT({payload:e}){const{callback:t}=e,n=ti(e,mA),a=yield LA();yield $i(ja.setTeamState({addUserDialogState:G({},a.addUserDialogState,{loading:!0})})),yield Et();const i=G({},Yp,n,{id:`${nA()}`});yield $i(ja.setTeamState({users:[i,...a.users],addUserDialogState:{open:!1,loading:!1}})),null==t||t(null)}function*dT({payload:e}){var t;const{callback:n}=e,a=ti(e,bA),{id:i}=a,o=yield LA(),r=o.users.find((e=>e.id===a.id));yield $i(ja.setTeamLoader({key:Fb.UPDATE_USER,value:i||""})),yield $i(ja.setTeamState({addUserDialogState:G({},o.addUserDialogState,{loading:!0})})),yield $i(ja.setTeamState({addUserDialogState:G({},o.addUserDialogState,{loading:!0}),users:o.users.map((e=>e.id===a.id?G({},e,a):e))})),r.roleIds.length>0&&0===(null==(t=a.roleIds)?void 0:t.length)&&(a.roleIds=[""]),yield Et();const s=G({},r,a);null==n||n(s),yield $i(ja.setTeamState({users:o.users.map((e=>e.id===s.id?G({},e,s,{createdAt:e.createdAt,customData:e.customData,lastLogin:e.lastLogin}):e))})),yield $i(ja.setTeamLoader({key:Fb.UPDATE_USER,value:!1}))}function*uT({payload:e}){const{callback:t}=e,n=ti(e,AA),a=yield LA();yield $i(ja.setTeamState({deleteUserDialogState:G({},a.deleteUserDialogState,{loading:!0})})),yield Et(),null==t||t(!0),yield $i(ja.setTeamState({users:a.users.filter((e=>e.id!==n.userId)),deleteUserDialogState:{open:!1,loading:!1}}))}function*yT({payload:e}){const{callback:t}=e,n=ti(e,TA),a=yield LA();yield $i(ja.setTeamState({deleteUserDialogState:G({},a.deleteUserDialogState,{loading:!0})})),yield Et(),null==t||t(!0),yield $i(ja.setTeamState({allUsers:a.allUsers.filter((e=>e.id!==n.userId)),deleteUserDialogState:{open:!1,loading:!1}}))}function*fT({payload:e}){const{callback:t}=e,n=ti(e,EA);yield $i(ja.setTeamLoader({key:Fb.RESEND_ACTIVATE_LINK,value:n.userId})),yield Et(),null==t||t(!0),yield $i(ja.setTeamLoader({key:Fb.RESEND_ACTIVATE_LINK,value:!1}))}function*pT({payload:e}){const{callback:t}=e,n=ti(e,kA);yield $i(ja.setTeamLoader({key:Fb.RESEND_INVITATION_LINK,value:n.email})),yield Et(),null==t||t(!0),yield $i(ja.setTeamLoader({key:Fb.RESEND_INVITATION_LINK,value:!1}))}function*gT({payload:e}){const{callback:t}=e,n=ti(e,IA);yield $i(ja.setTeamLoader({key:Fb.RESEND_INVITATION_LINK,value:n.email})),yield Et(),null==t||t(!0),yield $i(ja.setTeamLoader({key:Fb.RESEND_INVITATION_LINK,value:!1}))}function*ST({payload:e}){const{callback:t}=e,n=ti(e,OA);yield $i(ja.setTeamLoader({key:Fb.RESEND_INVITATION_LINK,value:n.email})),yield Et(),null==t||t(!0),yield $i(ja.setTeamLoader({key:Fb.RESEND_INVITATION_LINK,value:!1}))}function*vT({payload:e}){const{callback:t}=e,n=ti(e,PA),a=yield LA();yield $i(ja.setTeamLoader({key:Fb.UPDATE_USER_EXPIRATION_TIME,value:!0}));const i=new Date;yield $i(ja.setTeamState({users:a.users.map((e=>e.id===n.userId?G({},e,{temporaryExpirationDate:n.expirationInSeconds?new Date(i.setSeconds(i.getSeconds()+n.expirationInSeconds)):void 0}):e))})),yield Et(),null==t||t(!0),yield $i(ja.setTeamLoader({key:Fb.UPDATE_USER_EXPIRATION_TIME,value:!1}))}function*hT({payload:e}){const{callback:t}=e,n=ti(e,_A),a=yield LA();yield $i(ja.setTeamLoader({key:Fb.UPDATE_USER_EXPIRATION_TIME,value:!0})),yield $i(ja.setTeamState({users:a.users.map((e=>e.id===n.userId?G({},e,{temporaryExpirationDate:void 0}):e))})),yield Et(),null==t||t(!0),yield $i(ja.setTeamLoader({key:Fb.UPDATE_USER_EXPIRATION_TIME,value:!1}))}function*mT(){yield $o(ja.loadUsersV2,oT),yield $o(ja.loadAllSubTenantsUsers,rT),yield $o(ja.loadRoles,sT),yield Go(ja.addUser,lT),yield Go(ja.addUserToSubTenants,cT),yield Go(ja.updateUser,dT),yield Go(ja.deleteUser,uT),yield Go(ja.updateUserExpirationTime,vT),yield Go(ja.setUserAsPermanent,hT),yield Go(ja.deleteUserFromSubTenants,yT),yield Go(ja.resendActivationLink,fT),yield Go(ja.resendInvitationLink,pT),yield Go(ja.resendInvitationEmail,gT),yield Go(ja.resendInvitationLinkToAllSubTenants,ST),yield Go(ja.openAddUserDialog,eT),yield Go(ja.closeAddUserDialog,tT),yield Go(ja.openDeleteUserDialog,nT),yield Go(ja.closeDeleteUserDialog,aT)}const bT=["authorizationUrl"],AT=["events","url"];function*TT(){try{yield $i(ja.setSocialLoginsState({loading:!0}));const e=yield ji(dp.auth.getSocialLoginProviders);yield $i(ja.setSocialLoginsState({socialLoginsConfig:e,loading:!1,firstLoad:!1}))}catch(e){yield $i(ja.setSocialLoginsState({error:_g(e),loading:!1,firstLoad:!1}))}}function*ET(){const e=yield zi((({auth:e})=>e.isAuthenticated));let t;return t=e?yield ji(dp.auth.getSocialLoginProvidersV2ForAuthenticatedUser):yield ji(dp.auth.getSocialLoginProvidersV2),t}function*kT(e){try{var t,n;const a=yield zi((e=>e.root.context));yield $i(ja.setSocialLoginsState({loading:!0}));const i=yield ji(ET),{providers:o}=yield ji(dp.auth.getCustomSocialLoginProvidersV1),r={socialLoginsConfigV2:i.map((e=>{let{authorizationUrl:t}=e,n=ti(e,bT);const i=Lr(a,null!=t?t:"");return G({},n,{authorizationUrl:t?`${i}${t}`:null})})),customSocialLoginsConfig:o,loading:!1,firstLoad:!1};yield $i(ja.setSocialLoginsState(r)),null==e||null==(t=e.payload)||null==(n=t.callback)||n.call(t,r)}catch(t){var a,i;null==e||null==(a=e.payload)||null==(i=a.callback)||i.call(a,null,t),yield $i(ja.setSocialLoginsState({error:_g(t),loading:!1,firstLoad:!1}))}}function*IT(e){let{payload:{events:t,url:n}}=e,a=ti(e.payload,AT);try{yield $i(ja.setSocialLoginsState({loading:!0}));const{email:e,isNewUser:r,userId:s,tenantId:l,name:c}=yield ji(dp.auth.loginViaSocialLogin,a);if(r){var i,o;const r={email:e,url:n,createdAt:new Date,id:s,tenantId:l},d=G({},r,{socialProvider:a.provider,authenticationType:hg.SOCIAL_LOGIN});null==t||null==(i=t.signUpComplete)||i.call(t,d),wg(Lg.SIGNUP_COMPLETED,d);const u=G({},r,{origin:vg.SOCIAL_LOGIN,name:c});null==t||null==(o=t.userVerified)||o.call(t,u),wg(Lg.USER_VERIFIED,u)}s&&localStorage.setItem("userId",s),yield $i(ja.setLoginState({email:e,isNewUser:r})),yield function*(){const{hostedLoginBox:e}=yield zi((e=>e.auth));e?yield ji(dh):yield ji(yh)}(),localStorage.removeItem("register-quick-login"),yield $i(ja.setSocialLoginsState({loading:!1}))}catch(e){yield $i(ja.setSocialLoginsState({loading:!1,error:_g(e,"Failed to authenticate"),firstLoad:!1}))}}function*OT({payload:e}){yield $i(ja.setSocialLoginsState({error:e.error,loading:!1,firstLoad:!1}))}function*PT(){yield xo(ja.loadSocialLoginsConfiguration,TT),yield Go(ja.loadSocialLoginsConfigurationV2,kT),yield xo(ja.loginViaSocialLogin,IT),yield $o(ja.setSocialLoginError,OT)}let _T,LT;function*wT({payload:e}){const{description:t,expires:n,callback:a}=e,{apiTokensDataUser:i}=yield zi((e=>e.auth.apiTokensState)),{policy:o}=yield zi((e=>e.auth.securityPolicyState.publicPolicy)),r=(null==o?void 0:o.machineToMachineAuthStrategy)===Oa.AccessToken;try{let e;yield $i(ja.setApiTokensLoader({key:_T.ADD_API_TOKEN,value:!0}));let o=null;n&&(o=1440*n),e=r?yield ji(dp.auth.createUserAccessToken,{description:t,expiresInMinutes:o}):yield ji(dp.auth.updateUserApiTokensData,{description:t,expiresInMinutes:o}),yield $i(ja.setApiTokensState({showAddTokenDialog:!1})),yield Ki(200),yield $i(ja.setApiTokensState({apiTokensDataUser:[G({},e,{type:r?Oa.AccessToken:Oa.ClientCredentials}),...i],successDialog:{open:!0,secret:e.secret,clientId:r?void 0:e.clientId}})),yield $i(ja.setApiTokensLoader({key:_T.ADD_API_TOKEN,value:!1})),null==a||a(null)}catch(e){yield $i(ja.setApiTokensError({key:_T.ADD_API_TOKEN,value:_g(e)})),yield $i(ja.setApiTokensLoader({key:_T.ADD_API_TOKEN,value:!1})),null==a||a(null,e)}}function*DT({payload:e}){const{description:t,roleIds:n,expires:a,callback:i}=e,{apiTokensDataTenant:o}=yield zi((e=>e.auth.apiTokensState)),{policy:r}=yield zi((e=>e.auth.securityPolicyState.publicPolicy)),s=(null==r?void 0:r.machineToMachineAuthStrategy)===Oa.AccessToken;try{let e;yield $i(ja.setApiTokensLoader({key:_T.ADD_API_TOKEN,value:!0}));let r=null;a&&(r=1440*a),e=s?yield ji(dp.auth.createTenantAccessToken,{description:t,expiresInMinutes:r,roleIds:n}):yield ji(dp.auth.updateTenantApiTokensData,{description:t,roleIds:n,expiresInMinutes:r}),yield $i(ja.setApiTokensState({showAddTokenDialog:!1})),yield Ki(200),yield $i(ja.setApiTokensState({apiTokensDataTenant:[G({},e,{type:s?Oa.AccessToken:Oa.ClientCredentials}),...o],successDialog:{open:!0,secret:e.secret,clientId:s?void 0:e.clientId}})),yield $i(ja.setApiTokensLoader({key:_T.ADD_API_TOKEN,value:!1})),null==i||i(null)}catch(e){yield $i(ja.setApiTokensError({key:_T.ADD_API_TOKEN,value:_g(e)})),yield $i(ja.setApiTokensLoader({key:_T.ADD_API_TOKEN,value:!1})),null==i||i(null,e)}}function*UT({payload:e}){const{apiTokensDataUser:t}=yield zi((e=>e.auth.apiTokensState)),n=t.some((t=>t.id===e));try{yield $i(ja.setApiTokensLoader({key:_T.DELETE_API_TOKEN,value:!0})),n?(yield ji(dp.auth.deleteUserAccessToken,{id:e}),yield $i(ja.setApiTokensState({apiTokensDataUser:t.filter((t=>t.id!==e)),deleteTokenDialog:{open:!1,id:e}}))):(yield ji(dp.auth.deleteUserApiToken,{tokenId:e}),yield $i(ja.setApiTokensState({apiTokensDataUser:t.filter((t=>t.clientId!==e)),deleteTokenDialog:{open:!1,clientId:e}}))),yield $i(ja.setApiTokensLoader({key:_T.DELETE_API_TOKEN,value:!1}))}catch(e){yield $i(ja.setApiTokensError({key:_T.DELETE_API_TOKEN,value:_g(e)})),yield $i(ja.setApiTokensLoader({key:_T.DELETE_API_TOKEN,value:!1}))}}function*RT({payload:e}){const{apiTokensDataTenant:t}=yield zi((e=>e.auth.apiTokensState)),n=t.some((t=>t.id===e));let a=t;try{yield $i(ja.setApiTokensLoader({key:_T.DELETE_API_TOKEN,value:!0})),n?(yield ji(dp.auth.deleteTenantAccessToken,{id:e}),a=t.filter((t=>t.id!==e))):(yield ji(dp.auth.deleteTenantApiToken,{tokenId:e}),a=t.filter((t=>t.clientId!==e))),yield $i(ja.setApiTokensState({apiTokensDataTenant:a,deleteTokenDialog:{open:!1,id:e}})),yield $i(ja.setApiTokensLoader({key:_T.DELETE_API_TOKEN,value:!1}))}catch(e){yield $i(ja.setApiTokensError({key:_T.DELETE_API_TOKEN,value:_g(e)})),yield $i(ja.setApiTokensLoader({key:_T.DELETE_API_TOKEN,value:!1}))}}function*CT({payload:e}){null!=e&&e.silentLoading||(yield $i(ja.setApiTokensLoader({key:_T.LOAD_API_TOKENS,value:!0})));try{var t;const[n=[],a=[]]=yield xi([ji(dp.auth.getUserApiTokensData),ji(dp.auth.getTenantApiTokensData)]);yield $i(ja.setApiTokensState({apiTokensDataUser:n,apiTokensDataTenant:a})),yield $i(ja.setApiTokensLoader({key:_T.LOAD_API_TOKENS,value:!1})),null==e||null==(t=e.callback)||t.call(e,!0)}catch(t){var n;yield $i(ja.setApiTokensError({key:_T.LOAD_API_TOKENS,value:_g(t)})),yield $i(ja.setApiTokensLoader({key:_T.LOAD_API_TOKENS,value:!1})),null==e||null==(n=e.callback)||n.call(e,null,t)}}function*NT({payload:e}){null!=e&&e.silentLoading||(yield $i(ja.setApiTokensLoader({key:_T.LOAD_API_TOKENS,value:!0})));try{var t,n,a,i;const o=yield null!=(t=ji(dp.auth.getUserApiTokensData))?t:[],r=(null!=(a=(yield null!=(n=ji(dp.auth.getUserAccessTokensData))?n:[]).accessTokens)?a:[]).map((e=>G({},e,{type:Oa.AccessToken}))).concat(o.map((e=>G({},e,{type:Oa.ClientCredentials})))).sort(((e,t)=>new Date(t.createdAt)-new Date(e.createdAt)));yield $i(ja.setApiTokensState({apiTokensDataUser:null!=r?r:[]})),yield $i(ja.setApiTokensLoader({key:_T.LOAD_API_TOKENS,value:!1})),null==e||null==(i=e.callback)||i.call(e,!0)}catch(t){var o;yield $i(ja.setApiTokensError({key:_T.LOAD_API_TOKENS,value:_g(t)})),yield $i(ja.setApiTokensLoader({key:_T.LOAD_API_TOKENS,value:!1})),null==e||null==(o=e.callback)||o.call(e,null,t)}}function*MT({payload:e}){null!=e&&e.silentLoading||(yield $i(ja.setApiTokensLoader({key:_T.LOAD_API_TOKENS,value:!0})));try{var t,n,a,i;const o=yield null!=(t=ji(dp.auth.getTenantApiTokensData))?t:[],r=yield null!=(n=ji(dp.auth.getTenantAccessTokensData))?n:[],s=(null!=(a=null==r?void 0:r.accessTokens)?a:[]).map((e=>G({},e,{type:Oa.AccessToken}))).concat(o.map((e=>G({},e,{type:Oa.ClientCredentials})))).sort(((e,t)=>new Date(t.createdAt)-new Date(e.createdAt)));yield $i(ja.setApiTokensState({apiTokensDataTenant:null!=s?s:[]})),yield $i(ja.setApiTokensLoader({key:_T.LOAD_API_TOKENS,value:!1})),null==e||null==(i=e.callback)||i.call(e,!0)}catch(t){var o;yield $i(ja.setApiTokensError({key:_T.LOAD_API_TOKENS,value:_g(t)})),yield $i(ja.setApiTokensLoader({key:_T.LOAD_API_TOKENS,value:!1})),null==e||null==(o=e.callback)||o.call(e,null,t)}}function*FT(){yield xo(ja.loadApiTokens,CT),yield xo(ja.loadUserApiTokens,NT),yield xo(ja.loadTenantApiTokens,MT),yield Go(ja.addUserApiToken,wT),yield Go(ja.addTenantApiToken,DT),yield $o(ja.deleteTenantApiToken,RT),yield $o(ja.deleteUserApiToken,UT)}function*GT({payload:e}){const{description:t,roleIds:n,callback:a}=e;yield $i(ja.setApiTokensLoader({key:_T.ADD_API_TOKEN,value:!0}));const{apiTokensDataTenant:i}=yield zi((e=>e.auth.apiTokensState)),o=G({},Rp,{description:t,roleIds:n,clientId:`CLIENT_ID_${nA()}`});yield $i(ja.setApiTokensState({showAddTokenDialog:!1})),yield Ki(200),yield $i(ja.setApiTokensState({apiTokensDataTenant:[...i,o],successDialog:{open:!0,secret:o.secret,clientId:o.clientId}})),yield Ki(200),yield $i(ja.setApiTokensLoader({key:_T.ADD_API_TOKEN,value:!1})),null==a||a(null)}function*$T({payload:e}){yield $i(ja.setApiTokensLoader({key:_T.DELETE_API_TOKEN,value:!0})),yield Ki(200);const t=[Rp];yield $i(ja.setApiTokensState({apiTokensDataTenant:t.filter((t=>t.clientId!==e)),deleteTokenDialog:{open:!1,clientId:e}})),yield $i(ja.setApiTokensLoader({key:_T.DELETE_API_TOKEN,value:!1}))}function*xT({payload:e}){var t;null!=e&&e.silentLoading||(yield $i(ja.setApiTokensLoader({key:_T.LOAD_API_TOKENS,value:!0})));const n=[Up],a=[Rp];yield $i(ja.setApiTokensState({apiTokensDataUser:n,apiTokensDataTenant:a})),yield Ki(200),yield $i(ja.setApiTokensLoader({key:_T.LOAD_API_TOKENS,value:!1})),null==e||null==(t=e.callback)||t.call(e,!0)}function*VT({payload:e}){var t;null!=e&&e.silentLoading||(yield $i(ja.setApiTokensLoader({key:_T.LOAD_API_TOKENS,value:!0})));const n=[Up];yield $i(ja.setApiTokensState({apiTokensDataUser:n})),yield Ki(200),yield $i(ja.setApiTokensLoader({key:_T.LOAD_API_TOKENS,value:!1})),null==e||null==(t=e.callback)||t.call(e,!0)}function*jT({payload:e}){var t;null!=e&&e.silentLoading||(yield $i(ja.setApiTokensLoader({key:_T.LOAD_API_TOKENS,value:!0})));const n=[Rp];yield $i(ja.setApiTokensState({apiTokensDataTenant:n})),yield Ki(200),yield $i(ja.setApiTokensLoader({key:_T.LOAD_API_TOKENS,value:!1})),null==e||null==(t=e.callback)||t.call(e,!0)}function*BT(){yield xo(ja.loadApiTokens,xT),yield xo(ja.loadUserApiTokens,VT),yield xo(ja.loadTenantApiTokens,jT),yield Go(ja.addTenantApiToken,GT),yield $o(ja.deleteTenantApiToken,$T)}function*WT({payload:e}){try{var t;yield $i(ja.setAccountSettingsState({loading:!0}));const{accountSettingsState:n}=yield zi((e=>e.auth)),{address:a,timezone:i,dateFormat:o,timeFormat:r,currency:s,logo:l}=n,c=yield ji(dp.accountSettings.updateSettings,G({address:a,timezone:i,dateFormat:o,timeFormat:r,currency:s,logo:l},e));yield $i(ja.setAccountSettingsState(G({},c,{loading:!1}))),null==(t=e.callback)||t.call(e,c)}catch(t){var n;yield $i(ja.setAccountSettingsState({loading:!1,error:_g(t)})),null==(n=e.callback)||n.call(e,null,t)}}function*zT({payload:e}){yield $i(ja.setAccountSettingsState({loading:!(null!=e&&e.silentLoading),error:null}));try{const e=yield ji(dp.accountSettings.getSettings);yield $i(ja.setAccountSettingsState(G({},e,{loading:!1})))}catch(e){yield $i(ja.setAccountSettingsState({loading:!1,error:_g(e)}))}}function*KT(){yield xo(ja.saveAccountSettings,WT),yield xo(ja.loadAccountSettings,zT)}function*HT({payload:e}){var t;yield $i(ja.setAccountSettingsState({loading:!0})),yield Et();const{accountSettingsState:n}=yield zi((e=>e.auth)),{address:a,timezone:i,dateFormat:o,timeFormat:r,currency:s,logo:l}=n,c=G({address:a,timezone:i,dateFormat:o,timeFormat:r,currency:s,logo:l},e);yield $i(ja.setAccountSettingsState(G({},c,{loading:!1}))),null==(t=e.callback)||t.call(e,c)}function*qT({payload:e}){yield $i(ja.setAccountSettingsState({loading:!(null!=e&&e.silentLoading),error:null})),yield Et(),yield $i(ja.setAccountSettingsState({address:"Tel-aviv",timezone:"Asia/Jerusalem",dateFormat:"DD/MM/YYYY",timeFormat:"HH:mm",currency:"USD",loading:!1}))}function*JT(){yield xo(ja.saveAccountSettings,HT),yield xo(ja.loadAccountSettings,qT)}function*YT({payload:{tenantId:e,callback:t}}){yield $i(ja.setState({isLoading:!0}));try{yield ji(dp.tenants.switchTenant,{tenantId:e}),yield ji(lh),(null==t?void 0:t(!0))||(yield $i(ja.setState({isLoading:!1})))}catch(e){yield $i(ja.setState({isLoading:!1})),null==t||t(!1,e)}}function*XT({payload:e}){yield $i(ja.setTenantsState({loading:!0}));try{var t;const n=yield ji(as());yield $i(ja.setTenantsState({tenants:n.tenants,activeTenant:n.activeTenant,loading:!1})),null==e||null==(t=e.callback)||t.call(e,[])}catch(t){var n;null==e||null==(n=e.callback)||n.call(e,[],t),yield $i(ja.setTenantsState({loading:!1}))}}function*QT({payload:e}){yield $i(ja.setTenantsState({loading:!0}));try{var t;const n=yield ji(dp.tenants.getSubTenants);yield $i(ja.setTenantsState({subTenants:n,loading:!1})),null==e||null==(t=e.callback)||t.call(e,!0)}catch(t){var n;yield $i(ja.setTenantsState({loading:!1})),null==e||null==(n=e.callback)||n.call(e,null,t)}}function*ZT({payload:e}){yield $i(ja.setTenantsState({loading:!0}));try{var t;const n=yield ji(dp.tenants.getSubTenantsAsTree);yield $i(ja.setTenantsState({tenantTree:n,loading:!1})),null==e||null==(t=e.callback)||t.call(e,!0)}catch(t){var n;yield $i(ja.setTenantsState({loading:!1})),null==e||null==(n=e.callback)||n.call(e,null,t)}}function*eE(){yield Go(ja.loadTenants,XT),yield Go(ja.loadSubTenants,QT),yield Go(ja.switchTenant,YT),yield Go(ja.loadSubTenantsTree,ZT)}function*tE(){yield $i(ja.setTenantsState({loading:!0})),yield Et(),yield $i(ja.setTenantsState({tenants:ng,activeTenant:ng[0],loading:!1}))}function*nE(){yield Go(ja.loadTenants,tE)}!function(e){e.LOAD_API_TOKENS="LOAD_API_TOKENS",e.ADD_API_TOKEN="ADD_API_TOKEN",e.DELETE_API_TOKEN="DELETE_API_TOKEN"}(_T||(_T={})),function(e){e.EDIT_ROLE_DIALOG="editRoleDialog",e.DELETE_ROLE_DIALOG="deleteRoleDialog",e.LOAD_ROLES="loadRoles",e.ADD_ROLE="addRole",e.MANAGE_PERMISSIONS="managePermissions"}(LT||(LT={}));const aE=["callback"],iE=["callback"],oE=["callback"],rE=["callback"],sE=["callback"];function*lE({payload:e}){var t;const n=LT.LOAD_ROLES;yield $i(ja.setRolesStateLoader({key:n,value:!(null!=(t=null==e?void 0:e.silentLoading)&&t)}));try{const e=yield xi([ji(dp.roles.getRoles),ji(dp.roles.getPermissions),ji(dp.roles.getPermissionCategories)]),[t,a,i]=e,{selectedRole:o}=yield zi((e=>e.auth.rolesState)),r=null==t?void 0:t.find((({id:e})=>(null==o?void 0:o.id)===e));yield $i(ja.setRolesState({roles:t,permissions:a,permissionCategories:i,selectedRole:r}))}catch(e){yield $i(ja.setRolesStateError({key:n,value:_g(e)}))}finally{yield $i(ja.setRolesStateLoader({key:n,value:!1}))}}function*cE(e){let{payload:{callback:t}}=e,n=ti(e.payload,aE);const a=LT.ADD_ROLE;yield $i(ja.setRolesStateLoader({key:a,value:!0}));try{const e=yield ji(dp.roles.addRole,n),i=yield ji(dp.roles.getRoles);yield $i(ja.loadRolesAndPermissions({silentLoading:!0})),yield $i(ja.setRolesState({roles:i})),null==t||t(e)}catch(e){yield $i(ja.setRolesStateError({key:a,value:_g(e)})),null==t||t(null,e)}finally{yield $i(ja.setRolesStateLoader({key:a,value:!1}))}}function*dE(e){let{payload:{callback:t}}=e,n=ti(e.payload,iE);const a=LT.ADD_ROLE;yield $i(ja.setRolesStateLoader({key:a,value:!0}));try{const e=yield ji(dp.roles.addRoleV2,n);yield $i(ja.loadRolesAndPermissions({silentLoading:!0})),null==t||t(e)}catch(e){yield $i(ja.setRolesStateError({key:a,value:_g(e)})),null==t||t(null,e)}finally{yield $i(ja.setRolesStateLoader({key:a,value:!1}))}}function*uE(e){let{payload:{callback:t}}=e,n=ti(e.payload,oE);const a=LT.DELETE_ROLE_DIALOG;yield $i(ja.setRolesStateLoader({key:a,value:!0}));try{yield ji(dp.roles.deleteRole,n),yield $i(ja.loadRolesAndPermissions({silentLoading:!0})),null==t||t(!0)}catch(e){yield $i(ja.setRolesStateError({key:a,value:_g(e)})),null==t||t(!1,e)}finally{yield $i(ja.setRolesStateLoader({key:a,value:!1}))}}function*yE(e){let{payload:{callback:t}}=e,n=ti(e.payload,rE);const a=LT.EDIT_ROLE_DIALOG;yield $i(ja.setRolesStateLoader({key:a,value:!0}));try{const e=yield ji(dp.roles.updateRole,n);yield $i(ja.loadRolesAndPermissions({silentLoading:!0})),null==t||t(e)}catch(e){yield $i(ja.setRolesStateError({key:a,value:_g(e)})),null==t||t(null,e)}finally{yield $i(ja.setRolesStateLoader({key:a,value:!1}))}}function*fE(e){let{payload:{callback:t}}=e,n=ti(e.payload,sE);const a=LT.MANAGE_PERMISSIONS;yield $i(ja.setRolesStateLoader({key:a,value:!0}));try{const e=yield ji(dp.roles.attachPermissionsToRole,n);yield $i(ja.loadRolesAndPermissions({silentLoading:!0})),null==t||t(e)}catch(e){yield $i(ja.setRolesStateError({key:a,value:_g(e)})),null==t||t(null,e)}finally{yield $i(ja.setRolesStateLoader({key:a,value:!1}))}}function*pE(){yield xo(ja.loadRolesAndPermissions,lE),yield Go(ja.addRole,cE),yield Go(ja.addRoleV2,dE),yield Go(ja.deleteRole,uE),yield Go(ja.updateRole,yE),yield Go(ja.attachPermissionsToRole,fE)}function*gE({payload:e}){var t;const n=LT.LOAD_ROLES;yield $i(ja.setRolesStateLoader({key:n,value:!(null!=(t=null==e?void 0:e.silentLoading)&&t)}));try{yield $i(ja.setRolesState({roles:Cp,permissionCategories:Sg,permissions:gg,selectedRole:Cp[2]}))}catch(e){yield $i(ja.setRolesStateError({key:n,value:_g(e)}))}finally{yield $i(ja.setRolesStateLoader({key:n,value:!1}))}}function*SE(){yield xo(ja.loadRolesAndPermissions,gE)}const vE=["callback"],hE=["callback"],mE=["callback"];function*bE(e){let{payload:{callback:t}}=e,n=ti(e.payload,vE);yield $i(ja.setResetPhoneNumberState({loading:!0}));try{const e=yield ji(dp.auth.resetPhoneNumber,n);yield $i(ja.setResetPhoneNumberState({loading:!1,error:void 0,resetPhoneNumberToken:e.resetPhoneNumberToken,step:Zt.VerifyResetPhoneNumber})),yield $i(ja.setLoginState({email:n.email}))}catch(e){yield $i(ja.setResetPhoneNumberState({loading:!1,error:_g(e)})),null==t||t(null,e)}}function*AE(e){let{payload:{callback:t}}=e,n=ti(e.payload,hE);yield $i(ja.setResetPhoneNumberState({loading:!0}));try{const e=yield ji(dp.auth.verifyResetPhoneNumber,n);yield $i(ja.setResetPhoneNumberState({loading:!1,error:void 0,changePhoneNumberToken:e.changePhoneNumberToken,step:Zt.ChangePhoneNumber})),null==t||t(!0)}catch(e){yield $i(ja.setResetPhoneNumberState({loading:!1,error:_g(e)})),null==t||t(null,e)}}function*TE(e){let{payload:{callback:t}}=e,n=ti(e.payload,mE);yield $i(ja.setResetPhoneNumberState({loading:!0}));try{const{onRedirectTo:e,routes:a}=yield zi((({auth:{onRedirectTo:e,routes:t}})=>({onRedirectTo:e,routes:t})));yield ji(dp.auth.changePhoneNumber,{phoneNumber:n.phoneNumber,changePhoneNumberToken:n.changePhoneNumberToken}),yield $i(ja.setLoginState({step:_t.loginWithSmsOtc})),yield $i(ja.passwordlessPreLogin({type:Ia.SmsCode,email:n.email,recaptchaToken:n.recaptchaToken})),e(a.loginUrl),yield $i(ja.setResetPhoneNumberState({loading:!1})),null==t||t(!0)}catch(e){yield $i(ja.setResetPhoneNumberState({loading:!1,error:_g(e)})),null==t||t(null,e)}}function*EE(){yield xo(ja.resetPhoneNumber,bE),yield xo(ja.verifyResetPhoneNumber,AE),yield xo(ja.changePhoneNumber,TE)}function*kE(){yield $i(ja.setSessionsState({loading:!0,error:null}));try{const e=yield ji(dp.auth.getCurrentUserSessions);yield $i(ja.setSessionsState({sessions:e,loading:!1}))}catch(e){yield $i(ja.setSessionsState({error:e,loading:!1}))}}function*IE(){yield $i(ja.setSessionsState({loading:!0,error:null}));try{const e=yield ji(dp.auth.getCurrentUserSession);yield $i(ja.setSessionsState({currentSession:e,loading:!1}))}catch(e){yield $i(ja.setSessionsState({error:e,loading:!1}))}}function*OE({payload:{id:e}}){yield $i(ja.setSessionsState({loading:!0,error:null}));try{yield ji(dp.auth.deleteSessionForUser,e),yield $i(ja.loadUserSessions())}catch(e){yield $i(ja.setSessionsState({error:e,loading:!1}))}}function*PE({payload:{callback:e,userId:t}}){yield $i(ja.setSessionsState({loading:!0,error:null}));try{yield ji(dp.auth.revokeSessionsForUser,t),null==e||e(!0)}catch(t){yield $i(ja.setSessionsState({error:t,loading:!1})),null==e||e(!1)}}function*_E(){yield $i(ja.setSessionsState({loading:!0,error:null}));try{yield ji(dp.auth.deleteAllSessionsForUser),yield $i(ja.loadUserSessions())}catch(e){yield $i(ja.setSessionsState({error:e,loading:!1}))}}function*LE(){yield $o(ja.loadUserSessions,kE),yield $o(ja.deleteUserSession,OE),yield $o(ja.deleteAllUserSessions,_E),yield $o(ja.loadCurrentUserSession,IE),yield Go(ja.revokeUserSessions,PE)}function*wE(){yield $i(ja.setSessionsState({loading:!0,error:null})),yield $i(ja.setSessionsState({sessions:ag,loading:!1}))}function*DE({payload:{id:e}}){yield $i(ja.setSessionsState({loading:!0,error:null}));const t=(yield zi((e=>{var t;return null!=(t=e.auth.sessionsState.sessions)?t:[]}))).filter((t=>t.id!==e));yield $i(ja.setSessionsState({sessions:t,loading:!1}))}function*UE(){yield $i(ja.setSessionsState({loading:!0,error:null}));const e=ag.filter((e=>e.current));yield $i(ja.setSessionsState({sessions:e,loading:!1}))}function*RE(){yield $o(ja.loadUserSessions,wE),yield $o(ja.deleteUserSession,DE),yield $o(ja.deleteAllUserSessions,UE)}const CE=["callback"],NE=["callback"];function*ME(){yield $i(ja.setSessionsPolicyState({loading:!0,error:null}));try{const e=yield ji(dp.auth.getSessionConfigurations);yield $i(ja.setSessionsPolicyState({configurations:e,loading:!1}))}catch(e){yield $i(ja.setSessionsState({error:e,loading:!1}))}}function*FE({payload:e}){yield $i(ja.setSessionsPolicyState({loading:!0,error:null}));try{const{callback:t}=e,n=ti(e,CE);yield ji(dp.auth.createOrUpdateSessionConfigrations,n),yield $i(ja.loadSessionsPolicy()),null==t||t(!0)}catch(e){yield $i(ja.setSessionsPolicyState({error:e,loading:!1}))}}function*GE(){yield xo(ja.loadSessionsPolicy,ME),yield $o(ja.createOrUpdateSessionsPolicy,Vg(FE))}function*$E(){yield $i(ja.setSessionsPolicyState({loading:!0,error:null}));const e=yield zi((e=>{var t,n;return null!=(t=null==e||null==(n=e.auth)?void 0:n.sessionsPolicyState)?t:ig}));yield $i(ja.setSessionsPolicyState(G({},e,{loading:!1})))}function*xE({payload:e}){yield $i(ja.setSessionsPolicyState({loading:!0,error:null}));const{callback:t}=e,n=ti(e,NE);null==t||t(!0),yield $i(ja.setSessionsPolicyState({configurations:n,loading:!1}))}function*VE(){yield xo(ja.loadSessionsPolicy,$E),yield $o(ja.createOrUpdateSessionsPolicy,xE)}const jE=["callback"],BE=["callback"],WE=["callback"],zE=["callback"],KE=["callback"],HE=["callback"],qE=["callback"],JE=["callback"],YE=()=>zi((e=>e.auth.restrictionsState.ipRestrictions)),XE=()=>zi((e=>e.auth.restrictionsState.emailDomainRestrictions));function*QE(){yield $i(ja.setEmailDomainRestrictionsState({loading:!0,error:null}));try{const e=yield ji(dp.auth.getDomainRestrictionsConfig),t=(yield ji(dp.auth.getDomainRestrictions)).items.filter((t=>t.type===e.listType));yield $i(ja.setEmailDomainRestrictionsState({data:{restrictions:t,config:e},loading:!1}))}catch(e){yield $i(ja.setEmailDomainRestrictionsState({error:_g(e),loading:!1}))}}function*ZE(e){let{payload:{callback:t}}=e,n=ti(e.payload,jE);yield $i(ja.setEmailDomainRestrictionsState({saving:!0,error:null}));const a=yield XE();try{var i;yield ji(dp.auth.createDomainRestriction,n);const e=(yield ji(dp.auth.getDomainRestrictions)).items.filter((e=>{var t;return e.type===(null==(t=a.data)?void 0:t.config.listType)}));yield $i(ja.setEmailDomainRestrictionsState({data:{config:(null==(i=a.data)?void 0:i.config)||{active:!1,blockPublicDomains:!1,listType:n.type},restrictions:e},saving:!1})),null==t||t(!0)}catch(e){yield $i(ja.setEmailDomainRestrictionsState({saving:!1,error:_g(e)})),null==t||t(null,e)}}function*ek(e){let{payload:{callback:t}}=e,n=ti(e.payload,BE);yield $i(ja.setEmailDomainRestrictionsState({saving:!0,error:null}));try{const e=yield ji(dp.auth.updateDomainRestrictionConfig,n),a=(yield ji(dp.auth.getDomainRestrictions)).items.filter((t=>t.type===e.listType));yield $i(ja.setEmailDomainRestrictionsState({data:{config:e,restrictions:a},saving:!1})),null==t||t(!0)}catch(e){yield $i(ja.setEmailDomainRestrictionsState({saving:!1,error:_g(e)})),null==t||t(null,e)}}function*tk({payload:{id:e}}){yield $i(ja.setEmailDomainRestrictionsState({saving:!0,error:null}));const t=yield XE();try{var n;yield ji(dp.auth.deleteDomainRestriction,e);const a=(yield ji(dp.auth.getDomainRestrictions)).items.filter((e=>{var n;return e.type===(null==(n=t.data)?void 0:n.config.listType)}));yield $i(ja.setEmailDomainRestrictionsState({data:{config:(null==(n=t.data)?void 0:n.config)||{active:!1,blockPublicDomains:!1,listType:zn.ALLOW},restrictions:a},saving:!1}))}catch(e){yield $i(ja.setEmailDomainRestrictionsState({saving:!1,error:_g(e)}))}}const nk=e=>{var t,n,a;return{_filter:null!=(t=null==e?void 0:e._filter)?t:zn.ALLOW,_limit:null!=(n=null==e?void 0:e._limit)?n:10,_offset:null!=(a=null==e?void 0:e._offset)?a:0}};function*ak(){yield $i(ja.setIpRestrictionsState({loading:!0,error:null}));try{const e=yield YE(),t=yield ji(dp.auth.getIPRestrictionsConfig),n=nk({_filter:t.strategy,_limit:e.pagination._limit,_offset:e.pagination._offset}),{items:a,_metadata:{totalPages:i}}=yield ji(dp.auth.getIPRestrictions,n);yield $i(ja.setIpRestrictionsState({data:{restrictions:a,config:t},totalPages:i,pagination:n,loading:!1}))}catch(e){yield $i(ja.setIpRestrictionsState({error:_g(e),loading:!1}))}}function*ik(){try{const{valid:e}=yield ji(dp.auth.testCurrentIpInAllowList);yield $i(ja.setIpRestrictionsState({userIpValid:e}))}catch(e){yield $i(ja.setIpRestrictionsState({error:_g(e)}))}}function*ok({payload:{callback:e}}){yield $i(ja.setIpRestrictionsState({saving:!0,error:null}));try{const t=yield zi((e=>e.auth.userIp));yield xi([ji(dp.auth.createIPRestriction,{ip:t,isActive:!0,description:"My IP",strategy:zn.ALLOW}),ji(dp.auth.updateIPRestrictionConfig,{isActive:!0})]);const n=yield YE(),a=nk(n.pagination),{items:i,_metadata:{totalPages:o}}=yield ji(dp.auth.getIPRestrictions,a);yield $i(ja.setIpRestrictionsState({data:{config:{isActive:!0,strategy:zn.ALLOW},restrictions:i},userIpValid:!0,pagination:a,totalPages:o,saving:!1})),null==e||e(!0)}catch(t){yield $i(ja.setIpRestrictionsState({saving:!1,error:t})),null==e||e(!1,t)}}function*rk(e){let{payload:{callback:t}}=e,n=ti(e.payload,WE);yield $i(ja.setIpRestrictionsState({saving:!0,error:null}));const a=yield YE();try{var i,o;yield ji(dp.auth.createIPRestriction,n);const e=yield YE(),r=nk(e.pagination),{items:s,_metadata:{totalPages:l}}=yield ji(dp.auth.getIPRestrictions,r);yield ik(),yield $i(ja.setIpRestrictionsState({data:{config:null!=(i=null==(o=a.data)?void 0:o.config)?i:{isActive:!1,strategy:zn.ALLOW},restrictions:s},pagination:r,totalPages:l,saving:!1})),null==t||t(!0)}catch(e){yield $i(ja.setIpRestrictionsState({saving:!1,error:_g(e)})),null==t||t(null,e)}}function*sk(e){let{payload:{callback:t}}=e,n=ti(e.payload,zE);yield $i(ja.setIpRestrictionsState({saving:!0,error:null}));try{yield ji(dp.auth.updateIPRestrictionConfig,n);const e=yield YE(),a=yield ji(dp.auth.getIPRestrictionsConfig),i=nk(G({},e.pagination,{_filter:a.strategy})),{items:o,_metadata:{totalPages:r}}=yield ji(dp.auth.getIPRestrictions,i);yield ik(),yield $i(ja.setIpRestrictionsState({data:{config:a,restrictions:o},pagination:i,totalPages:r,saving:!1})),null==t||t(!0)}catch(e){yield $i(ja.setIpRestrictionsState({saving:!1,error:_g(e)})),null==t||t(null,e)}}function*lk({payload:{id:e,callback:t}}){yield $i(ja.setIpRestrictionsState({saving:!0,error:null}));const n=yield YE();try{var a;yield ji(dp.auth.deleteIPRestriction,e);const i=yield YE(),o=nk(i.pagination),{items:r,_metadata:{totalPages:s}}=yield ji(dp.auth.getIPRestrictions,o);yield ik(),yield $i(ja.setIpRestrictionsState({data:{config:(null==(a=n.data)?void 0:a.config)||{isActive:!1,strategy:zn.ALLOW},restrictions:r},pagination:o,totalPages:s,saving:!1})),null==t||t(!0)}catch(e){yield $i(ja.setIpRestrictionsState({saving:!1,error:_g(e)})),null==t||t(null,e)}}function*ck(){yield xo(ja.loadIpRestrictions,Vg(ak)),yield xo(ja.loadEmailDomainRestrictions,Vg(QE)),yield Go(ja.saveIpRestriction,Vg(rk)),yield Go(ja.saveIpRestrictionsConfig,Vg(sk)),yield Go(ja.deleteIpRestriction,Vg(lk)),yield Go(ja.checkIfUserIpValid,Vg(ik)),yield Go(ja.addCurrentUserIpAndActivate,Vg(ok)),yield Go(ja.saveEmailDomainRestriction,Vg(ZE)),yield Go(ja.saveEmailDomainRestrictionsConfig,Vg(ek)),yield Go(ja.deleteEmailDomainRestriction,Vg(tk))}function*dk(){yield $i(ja.setIpRestrictionsState({loading:!0,error:null})),yield $i(ja.setIpRestrictionsState({data:{restrictions:rg.filter((e=>e.strategy===og.strategy)),config:og},totalPages:1,pagination:{_filter:zn.ALLOW,_limit:50,_offset:0},loading:!1}))}function*uk(){yield $i(ja.setIpRestrictionsState({loading:!0,error:null}));try{const e=yield YE(),t=rg[0].ip,n=!!e.data.restrictions.find((e=>e.isActive&&e.ip===t));yield $i(ja.setIpRestrictionsState({userIpValid:n,loading:!1}))}catch(e){yield $i(ja.setIpRestrictionsState({error:_g(e),loading:!1}))}}function*yk(e){var t,n,a;let{payload:{callback:i}}=e,o=ti(e.payload,KE);yield $i(ja.setIpRestrictionsState({saving:!0,error:null}));const r=yield YE(),s=r.data.restrictions.filter((e=>e.ip!==o.ip));yield $i(ja.setIpRestrictionsState({data:{config:null!=(t=null==(n=r.data)?void 0:n.config)?t:{isActive:!1,strategy:zn.ALLOW},restrictions:[...s,G({},o,{createdAt:new Date,updatedAt:new Date,id:nA(),isActive:null==(a=o.isActive)||a,strategy:r.data.config.strategy})]},totalPages:1,pagination:{_filter:zn.ALLOW,_limit:50,_offset:0},saving:!1})),null==i||i(!0)}function*fk(e){var t,n,a;let{payload:{callback:i}}=e,o=ti(e.payload,HE);const r=yield YE();yield $i(ja.setIpRestrictionsState({saving:!0,error:null})),yield $i(ja.setIpRestrictionsState({data:{config:G({},null==(t=r.data)?void 0:t.config,o),restrictions:null!=(n=null==(a=r.data)?void 0:a.restrictions)?n:[]},pagination:{_filter:zn.ALLOW,_limit:50,_offset:0},totalPages:1,saving:!1})),yield $i(ja.setIpRestrictionsState({saving:!1,error:null})),null==i||i(!0)}function*pk({payload:{id:e,callback:t}}){var n;yield $i(ja.setIpRestrictionsState({saving:!0,error:null}));const a=yield YE();yield $i(ja.setIpRestrictionsState({data:{config:(null==(n=a.data)?void 0:n.config)||{isActive:!1,strategy:zn.ALLOW},restrictions:a.data.restrictions.filter((t=>t.id!==e))},pagination:{_filter:zn.ALLOW,_limit:50,_offset:0},totalPages:1,saving:!1,error:null})),null==t||t(!0)}function*gk(){yield $i(ja.setEmailDomainRestrictionsState({loading:!0,error:null})),yield $i(ja.setEmailDomainRestrictionsState({loading:!1,data:{restrictions:[{domain:"mock.com",id:"1",type:zn.ALLOW}],config:{active:!0,listType:zn.ALLOW,blockPublicDomains:!1}}}))}function*Sk(e){var t,n;let{payload:{callback:a}}=e,i=ti(e.payload,qE);const o=yield XE();yield $i(ja.setEmailDomainRestrictionsState({saving:!0,error:null})),yield Et(),null==a||a(!0),yield $i(ja.setEmailDomainRestrictionsState({data:{config:(null==(t=o.data)?void 0:t.config)||{active:!1,blockPublicDomains:!1,listType:i.type},restrictions:[...(null==(n=o.data)?void 0:n.restrictions)||[],G({},i,{id:Date.now().toString()})]},saving:!1}))}function*vk(e){var t;let{payload:{callback:n}}=e,a=ti(e.payload,JE);const i=yield XE();yield $i(ja.setEmailDomainRestrictionsState({saving:!0,error:null})),yield Et(),null==n||n(!0),yield $i(ja.setEmailDomainRestrictionsState({data:{config:{active:a.active,blockPublicDomains:a.blockPublicDomains||!1,listType:a.type||zn.ALLOW},restrictions:[...(null==(t=i.data)?void 0:t.restrictions)||[]]},saving:!1}))}function*hk({payload:{id:e}}){var t,n;const a=yield XE();yield $i(ja.setEmailDomainRestrictionsState({saving:!0,error:null})),yield Et(),yield $i(ja.setEmailDomainRestrictionsState({data:{config:(null==(t=a.data)?void 0:t.config)||{active:!1,blockPublicDomains:!1,listType:zn.ALLOW},restrictions:((null==(n=a.data)?void 0:n.restrictions)||[]).filter((t=>t.id===e))},saving:!1}))}function*mk(){yield xo(ja.loadIpRestrictions,dk),yield xo(ja.loadEmailDomainRestrictions,gk),yield Go(ja.saveIpRestriction,yk),yield Go(ja.saveIpRestrictionsConfig,fk),yield Go(ja.deleteIpRestriction,pk),yield Go(ja.checkIfUserIpValid,uk),yield Go(ja.saveEmailDomainRestriction,Sk),yield Go(ja.saveEmailDomainRestrictionsConfig,vk),yield Go(ja.deleteEmailDomainRestriction,hk)}const bk=["callback"],Ak=["id"];function*Tk(e){const{count:t}=yield ji(dp.directory.countConfigurationUsers,e.id);return G({},e,{count:t})}function*Ek(){yield $i(ja.setProvisioningState({loading:!0,error:null}));try{const e=yield ji(dp.directory.getConfigs),t=yield xi(e.map((e=>Tk(e))));yield $i(ja.setProvisioningState({connections:t,loading:!1}))}catch(e){yield $i(ja.setProvisioningState({error:_g(e),loading:!1}))}}function*kk(e){let{payload:{callback:t}}=e,n=ti(e.payload,bk);yield $i(ja.setProvisioningState({loading:!0,error:null}));try{const e=yield ji(dp.directory.createConfiguration,n),a=yield ji(dp.directory.getConfigs),i=yield xi(a.map((e=>Tk(e))));yield $i(ja.setProvisioningState({connections:i,loading:!1})),null==t||t(e)}catch(e){yield $i(ja.setProvisioningState({error:_g(e),loading:!1}))}}function*Ik(e){let{payload:{id:t}}=e,n=ti(e.payload,Ak);yield $i(ja.setProvisioningState({loading:!0,error:null}));try{yield ji(dp.directory.updateConfiguration,t,n);const e=yield ji(dp.directory.getConfigs),a=yield xi(e.map((e=>Tk(e))));yield $i(ja.setProvisioningState({connections:a,loading:!1}))}catch(e){yield $i(ja.setProvisioningState({error:_g(e),loading:!1}))}}function*Ok({payload:{id:e,callback:t}}){yield $i(ja.setProvisioningState({loading:!0,error:null}));try{yield ji(dp.directory.deleteConfiguration,e);const n=yield ji(dp.directory.getConfigs),a=yield xi(n.map((e=>Tk(e))));yield $i(ja.setProvisioningState({connections:a,loading:!1})),null==t||t(!0)}catch(e){yield $i(ja.setProvisioningState({error:_g(e),loading:!1})),null==t||t(!1,e)}}function*Pk(){yield xo(ja.loadProvisionConnections,Ek),yield Go(ja.createProvisionConnection,kk),yield Go(ja.deleteProvisionConnection,Ok),yield Go(ja.updateProvisionConnection,Ik)}const _k=["callback","events"];function*Lk(e){let{payload:{callback:t}}=e,n=ti(e.payload,_k);yield $i(ja.setImpersonateState({loading:!0}));try{yield ji(dp.impersonate.impersonate,n),yield $i(ja.setImpersonateState({step:Ma.success})),yield Ki(1e3),yield pv(),yield $i(ja.resetImpersonateState()),null==t||t(!0)}catch(e){yield $i(ja.setImpersonateState({loading:!1,error:_g(e)}))}}function*wk(){yield xo(ja.impersonate,Lk)}function*Dk({payload:e}){const{callback:t,deviceId:n}=e;yield $i(ja.setPasskeysState({loading:!0}));try{yield ji(dp.auth.deleteWebAuthnDevice,n);const{devices:e}=yield zi((e=>e.auth.passkeysState)),a=e.filter((e=>e.id!==n));yield $i(ja.setPasskeysState({devices:a,loading:!1})),null==t||t(!0)}catch(e){yield $i(ja.setPasskeysState({loading:!1,error:_g(e,null)})),null==t||t(null,e)}}function*Uk(){yield $i(ja.setPasskeysState({loading:!0}));try{const{devices:e}=yield ji(dp.auth.getWebAuthnDevices);yield $i(ja.setPasskeysState({devices:e,loading:!1}))}catch(e){yield $i(ja.setPasskeysState({loading:!1,error:_g(e,null)}))}}function*Rk(){yield Go(ja.loadWebAuthnDevices,Uk),yield Go(ja.deleteWebAuthnDevice,Dk)}const Ck=["roleIds","userIds"],Nk=()=>zi((e=>e.auth.groupsState));function*Mk({payload:e}){const t=aA.GET_TEAM_USERS;yield $i(ja.setUsersGroupsLoader({key:t,value:!0}));try{const{items:n}=yield ji(dp.users.getUsersV2,{_filter:e.filter,_offset:e.pageOffset,_limit:e.pageSize,_includeSubTenants:!1});yield $i(ja.setGroupsState({teamUsers:n}))}catch(e){yield $i(ja.setUsersGroupsError({key:t,value:_g(e)}))}finally{yield $i(ja.setUsersGroupsLoader({key:t,value:!1}))}}function*Fk({payload:e}){const t=aA.GET_GROUP;yield $i(ja.setUsersGroupsLoader({key:t,value:!0}));try{const n=yield ji(dp.groups.getGroupById,{groupId:e.groupId},{_groupsRelations:iA.rolesAndUsers});yield $i(ja.setGroupsState({selectedGroup:n}))}catch(e){yield $i(ja.setUsersGroupsError({key:t,value:_g(e)}))}finally{yield $i(ja.setUsersGroupsLoader({key:t,value:!1}))}}function*Gk(){const e=aA.GET_GROUPS,t=yield Nk();yield $i(ja.setUsersGroupsLoader({key:e,value:!0}));try{const{groups:n}=yield ji(dp.groups.getGroups,{_groupsRelations:iA.rolesAndUsers});yield $i(ja.setGroupsState(G({groups:n},t.selectedGroup&&{selectedGroup:n.find((e=>{var n;return e.id===(null==(n=t.selectedGroup)?void 0:n.id)}))})))}catch(t){yield $i(ja.setUsersGroupsError({key:e,value:_g(t)}))}finally{yield $i(ja.setUsersGroupsLoader({key:e,value:!1}))}}function*$k({payload:e}){const t=aA.CREATE_GROUP,{roleIds:n,userIds:a}=e,i=ti(e,Ck);yield $i(ja.setUsersGroupsLoader({key:t,value:!0}));try{var o;const r=yield ji(dp.groups.createGroup,G({name:i.name},!!i.description&&{description:i.description},{color:i.color}));null!=a&&a.length&&(yield $i(ja.addUsersToGroup({groupId:r.id,userIds:a}))),null!=n&&n.length&&(yield $i(ja.addRolesToGroup({groupId:r.id,roleIds:n}))),yield $i(ja.loadGroups()),null==e||null==(o=e.callback)||o.call(e,!0)}catch(n){var r;yield $i(ja.setUsersGroupsError({key:t,value:_g(n)})),null==e||null==(r=e.callback)||r.call(e,!1)}finally{yield $i(ja.setUsersGroupsLoader({key:t,value:!1}))}}function*xk({payload:e}){const t=aA.UPDATE_GROUP;yield $i(ja.setUsersGroupsLoader({key:t,value:!0}));try{var n;yield ji(dp.groups.updateGroup,e),yield $i(ja.loadGroups()),null==e||null==(n=e.callback)||n.call(e,!0)}catch(n){var a;yield $i(ja.setUsersGroupsError({key:t,value:_g(n)})),null==e||null==(a=e.callback)||a.call(e,!1)}finally{yield $i(ja.setUsersGroupsLoader({key:t,value:!1}))}}function*Vk({payload:e}){const t=aA.DELETE_GROUP;yield $i(ja.setUsersGroupsLoader({key:t,value:!0}));try{var n;yield ji(dp.groups.deleteGroup,e.groupId),yield $i(ja.loadGroups()),null==e||null==(n=e.callback)||n.call(e,!0)}catch(n){var a;yield $i(ja.setUsersGroupsError({key:t,value:_g(n)})),null==e||null==(a=e.callback)||a.call(e,!1,n)}finally{yield $i(ja.setUsersGroupsLoader({key:t,value:!1}))}}function*jk({payload:e}){const t=aA.ADD_ROLES_TO_GROUP;yield $i(ja.setUsersGroupsLoader({key:t,value:!0}));try{var n;yield ji(dp.groups.addRolesToGroup,e.groupId,{roleIds:e.roleIds}),yield $i(ja.loadGroups()),null==e||null==(n=e.callback)||n.call(e,!0)}catch(n){var a;yield $i(ja.setUsersGroupsError({key:t,value:_g(n)})),null==e||null==(a=e.callback)||a.call(e,!1)}finally{yield $i(ja.setUsersGroupsLoader({key:t,value:!1}))}}function*Bk({payload:e}){const t=aA.DELETE_ROLES_FROM_GROUP;yield $i(ja.setUsersGroupsLoader({key:t,value:!0}));try{var n;yield ji(dp.groups.deleteRolesFromGroup,e.groupId,{roleIds:e.roleIds}),yield $i(ja.loadGroups()),null==e||null==(n=e.callback)||n.call(e,!0)}catch(n){var a;yield $i(ja.setUsersGroupsError({key:t,value:_g(n)})),null==e||null==(a=e.callback)||a.call(e,!1)}finally{yield $i(ja.setUsersGroupsLoader({key:t,value:!1}))}}function*Wk({payload:e}){const t=aA.ADD_USERS_TO_GROUP;yield $i(ja.setUsersGroupsLoader({key:t,value:!0}));try{var n;yield ji(dp.groups.addUsersToGroup,e.groupId,{userIds:e.userIds}),yield $i(ja.loadGroups()),null==e||null==(n=e.callback)||n.call(e,!0)}catch(n){var a;null==e||null==(a=e.callback)||a.call(e,!1),yield $i(ja.setUsersGroupsError({key:t,value:_g(n)}))}finally{yield $i(ja.setUsersGroupsLoader({key:t,value:!1}))}}function*zk({payload:e}){const t=aA.DELETE_USERS_FROM_GROUP;yield $i(ja.setUsersGroupsLoader({key:t,value:!0}));try{var n;yield ji(dp.groups.deleteUsersFromGroup,e.groupId,{userIds:e.userIds}),yield $i(ja.loadGroups()),null==e||null==(n=e.callback)||n.call(e,!0)}catch(n){var a;yield $i(ja.setUsersGroupsError({key:t,value:_g(n)})),null==e||null==(a=e.callback)||a.call(e,!1)}finally{yield $i(ja.setUsersGroupsLoader({key:t,value:!1}))}}function*Kk(){const e=aA.GET_GROUP_CONFIGURATION;yield $i(ja.setUsersGroupsLoader({key:e,value:!0}));try{const t=yield ji(dp.groups.getGroupConfiguration);yield $i(ja.setGroupsState({groupsConfiguration:t}))}catch(t){yield $i(ja.setUsersGroupsError({key:e,value:_g(t)}))}finally{yield $i(ja.setUsersGroupsLoader({key:e,value:!1}))}}function*Hk({payload:e}){const t=aA.UPDATE_GROUP_CONFIGURATION;yield $i(ja.setUsersGroupsLoader({key:t,value:!0}));try{yield ji(dp.groups.updateGroupConfiguration,e),yield $i(ja.getGroupConfiguration())}catch(e){yield $i(ja.setUsersGroupsError({key:t,value:_g(e)}))}finally{yield $i(ja.setUsersGroupsLoader({key:t,value:!1}))}}function*qk(){yield $o(ja.loadGroups,Gk),yield $o(ja.getGroupById,Fk),yield $o(ja.createGroup,$k),yield $o(ja.updateGroup,xk),yield $o(ja.deleteGroup,Vk),yield $o(ja.addRolesToGroup,jk),yield $o(ja.deleteRolesFromGroup,Bk),yield $o(ja.addUsersToGroup,Wk),yield $o(ja.deleteUsersFromGroup,zk),yield $o(ja.getGroupConfiguration,Kk),yield $o(ja.updateGroupConfiguration,Hk),yield $o(ja.getTeamUsers,Mk)}function*Jk(){const e=aA.GET_GROUPS;yield $i(ja.setUsersGroupsLoader({key:e,value:!0}));const t=cg;yield $i(ja.setGroupsState({groups:t})),yield $i(ja.setUsersGroupsLoader({key:e,value:!1}))}function*Yk({payload:e}){var t;const n=aA.CREATE_GROUP,{groups:a}=yield Nk();yield $i(ja.setUsersGroupsLoader({key:n,value:!0})),yield $i(ja.setGroupsState({groups:[G({},e,{id:`${e.name}ID`,managedBy:ip.FRONTEGG}),...null!=a?a:[]]})),yield Ki(500),null==e||null==(t=e.callback)||t.call(e,!0),yield $i(ja.setUsersGroupsLoader({key:n,value:!1}))}function*Xk({payload:e}){var t,n,a,i,o;const r=aA.UPDATE_GROUP,s=yield Nk();yield $i(ja.setUsersGroupsLoader({key:r,value:!0})),yield $i(ja.setGroupsState({groups:null==s||null==(t=s.groups)?void 0:t.map((t=>{var n;return t.id===e.groupId?G({},e,{id:e.groupId,name:null!=(n=null==e?void 0:e.name)?n:"",managedBy:ip.FRONTEGG}):t})),selectedGroup:G({},null==s?void 0:s.selectedGroup,{name:null!=(n=null==e?void 0:e.name)?n:"",color:null!=(a=null==e?void 0:e.color)?a:"",description:null!=(i=null==e?void 0:e.description)?i:""})})),yield Ki(500),null==e||null==(o=e.callback)||o.call(e,!0),yield $i(ja.setUsersGroupsLoader({key:r,value:!1}))}function*Qk({payload:e}){var t,n;const a=aA.DELETE_GROUP,i=yield Nk();yield $i(ja.setUsersGroupsLoader({key:a,value:!0})),yield $i(ja.setGroupsState({groups:null==i||null==(t=i.groups)?void 0:t.filter((t=>t.id!==e.groupId))})),yield Ki(500),null==e||null==(n=e.callback)||n.call(e,!0),yield $i(ja.setUsersGroupsLoader({key:a,value:!1}))}function*Zk({payload:e}){var t,n;const a=aA.ADD_ROLES_TO_GROUP,i=yield Nk();yield $i(ja.setUsersGroupsLoader({key:a,value:!0})),yield $i(ja.setGroupsState({groups:null==i||null==(t=i.groups)?void 0:t.map((t=>{var n;return t.id===e.groupId?G({},t,{roles:[...null!=(n=null==t?void 0:t.roles)?n:[],...e.roleIds.map((e=>({id:e,name:e})))]}):t}))})),yield Ki(500),null==e||null==(n=e.callback)||n.call(e,!0),yield $i(ja.setUsersGroupsLoader({key:a,value:!1}))}function*eI({payload:e}){var t,n;const a=aA.DELETE_ROLES_FROM_GROUP,i=yield Nk();yield $i(ja.setUsersGroupsLoader({key:a,value:!0})),yield $i(ja.setGroupsState({groups:null==i||null==(t=i.groups)?void 0:t.map((t=>{var n;return t.id===e.groupId?G({},t,{roles:null==t||null==(n=t.roles)?void 0:n.filter((t=>!e.roleIds.includes(t.id)))}):t}))})),yield Ki(500),null==e||null==(n=e.callback)||n.call(e,!0),yield $i(ja.setUsersGroupsLoader({key:a,value:!1}))}function*tI({payload:e}){var t,n;const a=aA.ADD_USERS_TO_GROUP,i=yield Nk();yield $i(ja.setUsersGroupsLoader({key:a,value:!0})),yield $i(ja.setGroupsState({groups:null==i||null==(t=i.groups)?void 0:t.map((t=>{var n;return t.id===e.groupId?G({},t,{users:[...null!=(n=null==t?void 0:t.users)?n:[],...e.userIds.map((e=>({id:e,name:e})))]}):t}))})),yield Ki(500),null==e||null==(n=e.callback)||n.call(e,!0),yield $i(ja.setUsersGroupsLoader({key:a,value:!1}))}function*nI({payload:e}){var t,n;const a=aA.DELETE_USERS_FROM_GROUP,i=yield Nk();yield $i(ja.setUsersGroupsLoader({key:a,value:!0})),yield $i(ja.setGroupsState({groups:null==i||null==(t=i.groups)?void 0:t.map((t=>{var n;return t.id===e.groupId?G({},t,{users:null==t||null==(n=t.users)?void 0:n.filter((t=>!e.userIds.includes(t.id)))}):t}))})),yield Ki(500),null==e||null==(n=e.callback)||n.call(e,!0),yield $i(ja.setUsersGroupsLoader({key:a,value:!1}))}function*aI(){const e=aA.GET_GROUP_CONFIGURATION,{groupsConfiguration:t}=yield Nk();yield $i(ja.setUsersGroupsLoader({key:e,value:!0})),t&&(yield $i(ja.setGroupsState({groupsConfiguration:G({},t)}))),yield $i(ja.setUsersGroupsLoader({key:e,value:!1}))}function*iI({payload:e}){const t=aA.UPDATE_GROUP_CONFIGURATION,{groupsConfiguration:n}=yield Nk();yield $i(ja.setUsersGroupsLoader({key:t,value:!0})),n&&(yield $i(ja.setGroupsState({groupsConfiguration:G({},n,e)}))),yield $i(ja.setUsersGroupsLoader({key:t,value:!1}))}function*oI(){yield $o(ja.loadGroups,Jk),yield $o(ja.createGroup,Yk),yield $o(ja.updateGroup,Xk),yield $o(ja.deleteGroup,Qk),yield $o(ja.addRolesToGroup,Zk),yield $o(ja.deleteRolesFromGroup,eI),yield $o(ja.addUsersToGroup,tI),yield $o(ja.deleteUsersFromGroup,nI),yield $o(ja.getGroupConfiguration,aI),yield $o(ja.updateGroupConfiguration,iI)}let rI;!function(e){e.GET_ACCOUNTS="GET_ACCOUNTS",e.SEARCH_ACCOUNTS="SEARCH_ACCOUNTS",e.SET_ROOT_ACCOUNT_DATA="SET_ROOT_ACCOUNT_DATA",e.SET_SELECTED_SUB_ACCOUNT_DATA="SET_SELECTED_SUB_ACCOUNT_DATA",e.LOAD_NUMBER_OF_USERS_FOR_ACCOUNT="LOAD_NUMBER_OF_USERS_FOR_ACCOUNT",e.UPDATE_SUB_ACCOUNT_ACCESS_FOR_USER="UPDATE_SUB_ACCOUNT_ACCESS_FOR_USER",e.CREATE_SUB_ACCOUNT="CREATE_SUB_ACCOUNT",e.UPDATE_SUB_ACCOUNT="UPDATE_SUB_ACCOUNT",e.DELETE_SUB_ACCOUNT="DELETE_SUB_ACCOUNT",e.GET_ACCOUNT_USERS="GET_ACCOUNT_USERS",e.ADD_USERS_TO_ACCOUNT="ADD_USERS_TO_ACCOUNT",e.DELETE_USERS_FROM_ACCOUNT="DELETE_USERS_FROM_ACCOUNT",e.SET_USER_ROLES_FOR_SUB_ACCOUNT="SET_USER_ROLES_FOR_SUB_ACCOUNT",e.UPDATE_SUB_ACCOUNT_SETTINGS="UPDATE_SUB_ACCOUNT_SETTINGS",e.GET_USER_JWT="GET_USER_JWT",e.GET_TEAM_USERS="GET_TEAM_USERS"}(rI||(rI={}));const sI=(e,t,n)=>{var a,i;return e.tenantId===t?G({},e,{name:n}):G({},e,{children:null!=(a=null==e||null==(i=e.children)?void 0:i.map((e=>sI(e,t,n))))?a:[]})};function lI(e,t){var n;return G({},e,{children:null!=(n=e.children)&&n.length?e.children.filter((e=>e.tenantId!==t)).map((e=>lI(e,t))):[]})}function cI(e,t,n){var a,i;if(e.tenantId===t){var o;const t=[...null!=(o=null==e?void 0:e.children)?o:[],...n].filter(((e,t,n)=>t===n.findIndex((t=>t.tenantId===e.tenantId))));return G({},e,{children:t})}return G({},e,{children:null!=(a=null==e||null==(i=e.children)?void 0:i.map((e=>cI(e,t,n))))?a:[]})}const dI=({items:e},t)=>e.map((e=>{var n,a;return{name:e.name,tenantId:e.tenantId,numberOfUsers:null!=(n=null==(a=t.find((t=>t.tenantId===e.tenantId)))?void 0:a.totalUsers)?n:0,createdAt:e.createdAt,metadata:e.metadata}})),uI=()=>zi((e=>e.auth.allAccountsState));function*yI({payload:e}){const t=rI.GET_ACCOUNTS;yield $i(ja.setAllAccountsLoader({key:t,value:!0}));const{accountsQueryParams:n}=yield uI(),{jwt:a,_limit:i,_offset:o}=e,r={_offset:null!=o?o:n._offset,_limit:null!=i?i:n._limit,_subTenantId:null==e?void 0:e._subTenantId};try{if(a){var s;const{selectedAccount:t}=yield uI(),{items:n,_links:i}=yield ji(dp.tenants.searchSubTenants,r,{jwt:a}),o=yield ji(dp.tenants.getTenantsUsersCount,{tenantIds:n.map((e=>e.tenantId))},{jwt:a}),l=dI({items:n},o),c=cI(t.accounts?t.accounts:t,null!=(s=null==e?void 0:e._subTenantId)?s:"",l.map((e=>({name:e.name,tenantId:e.tenantId,numberOfUsers:e.numberOfUsers,createdAt:e.createdAt,metadata:e.metadata,children:[],loadMoreLink:null==i?void 0:i.next}))));yield $i(ja.setSelectedAccountState({accounts:c}))}else{var l;const{accounts:t}=yield uI(),{items:n,_links:a}=yield ji(dp.tenants.searchSubTenants,r),i=yield ji(dp.tenants.getTenantsUsersCount,{tenantIds:n.map((e=>e.tenantId))}),o=dI({items:n},i),s=cI(t,null!=(l=null==e?void 0:e._subTenantId)?l:"",o.map((e=>({name:e.name,tenantId:e.tenantId,numberOfUsers:e.numberOfUsers,createdAt:e.createdAt,metadata:e.metadata,children:[],loadMoreLink:null==a?void 0:a.next}))));yield $i(ja.setAllAccountsState({accounts:s}))}}catch(e){yield $i(ja.setAllAccountsError({key:t,value:_g(e)}))}finally{yield $i(ja.setAllAccountsLoader({key:t,value:!1}))}}function*fI({payload:e}){const t=rI.SEARCH_ACCOUNTS;yield $i(ja.setAllAccountsLoader({key:t,value:!0}));const{rootAccount:n}=yield uI(),{jwt:a}=e;try{if(null!=e&&e._subTenantId){var i;const{items:t}=yield ji(dp.tenants.searchSubTenants,{_offset:0,_limit:50,_filter:null!=(i=null==e?void 0:e._filter)?i:"",_subTenantId:e._subTenantId},{jwt:a});yield $i(ja.setAllAccountsState({searchAccountsData:[...t,{name:n.name,tenantId:n.tenantId}]}))}}catch(e){yield $i(ja.setAllAccountsError({key:t,value:_g(e)}))}finally{yield $i(ja.setAllAccountsLoader({key:t,value:!1}))}}function*pI({payload:e}){const t=rI.GET_USER_JWT;yield $i(ja.setAllAccountsLoader({key:t,value:!0}));const{tenantId:n,callback:a}=e;try{const e=yield ji(dp.users.GetUserJwt,{tenantId:n});yield $i(ja.setSelectedAccountState({userJwt:e,accessPermission:!0})),null==a||a(!0)}catch(e){yield $i(ja.setAllAccountsError({key:t,value:_g(e)})),yield $i(ja.setSelectedAccountState({accessPermission:!1})),null==a||a(!1)}finally{yield $i(ja.setAllAccountsLoader({key:t,value:!1}))}}function*gI({payload:e}){const t=rI.CREATE_SUB_ACCOUNT;yield $i(ja.setAllAccountsLoader({key:t,value:!0}));const{name:n,parentTenantId:a,tenantId:i,jwt:o,callback:r}=e;try{if(o){const{accounts:e}=yield uI(),{selectedAccount:t}=yield uI(),r=yield ji(dp.subTenants.createSubTenant,{name:n,parentTenantId:a,tenantId:i},{jwt:o}),s=cI(e,null!=a?a:"",[{name:r.name,tenantId:r.tenantId,numberOfUsers:0,createdAt:new Date}]),l=cI(G({name:"",tenantId:""},null==t?void 0:t.accounts),null!=a?a:"",[{name:r.name,tenantId:r.tenantId,numberOfUsers:0,createdAt:new Date}]);yield $i(ja.setAllAccountsState({accounts:s})),yield $i(ja.setSelectedAccountState({accounts:l}))}else{const{accounts:e}=yield uI(),t=yield ji(dp.subTenants.createSubTenant,{name:n,tenantId:i,parentTenantId:a}),o=cI(e,null!=a?a:"",[{name:t.name,tenantId:t.tenantId,numberOfUsers:0,createdAt:new Date}]);yield $i(ja.setAllAccountsState({accounts:o}))}null==r||r(!0)}catch(e){yield $i(ja.setAllAccountsError({key:t,value:_g(e)})),null==r||r(!1)}finally{yield $i(ja.setAllAccountsLoader({key:t,value:!1}))}}function*SI({payload:e}){const t=rI.DELETE_SUB_ACCOUNT;yield $i(ja.setAllAccountsLoader({key:t,value:!0}));const{jwt:n,tenantId:a,callback:i}=e;try{if(n){const{selectedAccount:e,accounts:t}=yield uI();yield ji(dp.subTenants.deleteSubTenant,a,{jwt:n});const i=lI(t,a),o=lI(null==e?void 0:e.accounts,a);yield $i(ja.setAllAccountsState({accounts:i})),yield $i(ja.setSelectedAccountState({accounts:o}))}else{const{accounts:e}=yield uI();yield ji(dp.subTenants.deleteSubTenant,a);const t=lI(e,a);yield $i(ja.setAllAccountsState({accounts:t}))}null==i||i(!0)}catch(e){yield $i(ja.setAllAccountsError({key:t,value:_g(e)})),null==i||i(!1)}finally{yield $i(ja.setAllAccountsLoader({key:t,value:!1}))}}function*vI({payload:e}){const t=rI.UPDATE_SUB_ACCOUNT_SETTINGS;yield $i(ja.setAllAccountsLoader({key:t,value:!0}));const{jwt:n,name:a,callback:i,tenantId:o}=e;try{if(n){const{selectedAccount:e,accounts:t}=yield uI();yield ji(dp.subTenants.updateSubTenant,{tenantId:o},{name:a},{jwt:n});const i=sI(e.accounts,o,a);yield $i(ja.setSelectedAccountState({name:a,accounts:i}));const r=sI(t,o,a);yield $i(ja.setAllAccountsState({accounts:r}))}else{const{accounts:e}=yield uI();yield ji(dp.subTenants.updateSubTenant,{tenantId:o},{name:a});const t=sI(e,o,a);yield $i(ja.setAllAccountsState({accounts:t}))}null==i||i(!0)}catch(e){yield $i(ja.setAllAccountsError({key:t,value:_g(e)})),null==i||i(!1)}finally{yield $i(ja.setAllAccountsLoader({key:t,value:!1}))}}function*hI({payload:e}){const t=rI.DELETE_USERS_FROM_ACCOUNT;yield $i(ja.setAllAccountsLoader({key:t,value:!0}));const{userId:n,subTenants:a,jwt:i,callback:o}=e;try{yield ji(dp.subTenants.removeUserFromTenantAndSubTenants,{userId:n,subTenants:a},{jwt:i}),yield $i(ja.getAccountUsers({jwt:i,_tenantId:a[0].tenantId})),null==o||o(!0)}catch(e){yield $i(ja.setAllAccountsError({key:t,value:_g(e)})),null==o||o(!1)}finally{yield $i(ja.setAllAccountsLoader({key:t,value:!1}))}}function*mI({payload:e}){const t=rI.SET_USER_ROLES_FOR_SUB_ACCOUNT;yield $i(ja.setAllAccountsLoader({key:t,value:!0}));const{userId:n,subTenantsRoles:a,jwt:i,callback:o}=e,{selectedAccount:r}=yield uI();try{yield ji(dp.subTenants.setUserRolesForSubTenants,n,{subTenantsRoles:a},{jwt:i}),yield $i(ja.getAccountUsers({jwt:i,_tenantId:r.tenantId})),null==o||o(!0)}catch(e){yield $i(ja.setAllAccountsError({key:t,value:_g(e)})),null==o||o(!1)}finally{yield $i(ja.setAllAccountsLoader({key:t,value:!1}))}}function*bI({payload:e}){const t=rI.ADD_USERS_TO_ACCOUNT;yield $i(ja.setAllAccountsLoader({key:t,value:!0}));const{users:n,tenantId:a,jwt:i,callback:o,allowSubAccountAccess:r=!1,roleIds:s}=e;try{yield ji(dp.subTenants.addUsersToSubTenant,{users:n,tenantId:a,allowSubAccountAccess:r,roleIds:s},{jwt:i}),yield $i(ja.getAccountUsers({jwt:i,_tenantId:a})),null==o||o(!0)}catch(e){yield $i(ja.setAllAccountsError({key:t,value:_g(e)})),null==o||o(!1)}finally{yield $i(ja.setAllAccountsLoader({key:t,value:!1}))}}function*AI({payload:e}){const t=rI.UPDATE_SUB_ACCOUNT_ACCESS_FOR_USER;yield $i(ja.setAllAccountsLoader({key:t,value:!0}));const{selectedAccount:n}=yield uI(),{userId:a,allowAccess:i,jwt:o,callback:r}=e;try{var s;yield ji(dp.subTenants.updateSubAccountAccess,a,{allowAccess:i},{jwt:o}),yield $i(ja.setSelectedAccountState({users:null==n||null==(s=n.users)?void 0:s.map((e=>e.id===a?G({},e,{subAccountAccessAllowed:i}):e))})),null==r||r(!0)}catch(e){yield $i(ja.setAllAccountsError({key:t,value:_g(e)})),null==r||r(!1)}finally{yield $i(ja.setAllAccountsLoader({key:t,value:!1}))}}function*TI({payload:e}){var t,n,a,i,o,r,s,l;const c=rI.GET_ACCOUNT_USERS;yield $i(ja.setAllAccountsLoader({key:c,value:!0}));const d=yield uI(),{jwt:u,_tenantId:y,_email:f}=e,p=null!=(t=null!=(n=null==e?void 0:e._offset)?n:null==d||null==(a=d.selectedAccount)||null==(i=a.usersQueryParams)?void 0:i._offset)?t:0,g=null!=(o=null!=(r=null==e?void 0:e._limit)?r:null==d||null==(s=d.selectedAccount)||null==(l=s.usersQueryParams)?void 0:l._limit)?o:10,S=G({_offset:p,_limit:g,_tenantId:y,_includeSubTenants:!1},!!f&&{_email:f});try{const{items:e,_metadata:{totalItems:t,totalPages:n}}=yield ji(dp.users.getUsersV3,S,{jwt:u}),a={totalUsersItems:t,totalUsersPages:n,usersQueryParams:G({_offset:null!=p?p:0,_limit:null!=g?g:10},!!f&&{_email:f})};if(e.length){const t=e.map((e=>e.id)),n=yield ji(dp.roles.getRoles),i=yield ji(dp.users.getUsersRoles,{ids:t},{jwt:u}),o=e.map((e=>{var t,a;const o=null==i||null==(t=i.find((t=>t.userId===e.id)))?void 0:t.roleIds;return G({},e,{roles:null!=(a=null==o?void 0:o.map((e=>{var t;return null!=(t=null==n?void 0:n.find((t=>t.id===e)))?t:[]})))?a:[]})}));yield $i(ja.setSelectedAccountState(G({users:o},a)))}else yield $i(ja.setSelectedAccountState(G({users:[]},a)))}catch(e){yield $i(ja.setAllAccountsError({key:c,value:_g(e)}))}finally{yield $i(ja.setAllAccountsLoader({key:c,value:!1}))}}function*EI({payload:e}){const t=rI.SET_SELECTED_SUB_ACCOUNT_DATA;yield $i(ja.setAllAccountsLoader({key:t,value:!0}));const{jwt:n}=e;try{var a,i,o,r,s,l,c;const e=yield ji(dp.accountSettings.getSettings,{jwt:n}),d=yield ji(dp.tenants.getTenantsUsersCount,{tenantIds:[null!=(a=null==e?void 0:e.tenantId)?a:""]},{jwt:n}),u=yield ji(dp.tenants.getParentTenants,{jwt:n}),y=yield ji(dp.tenants.getHierarchyMetadata,{_tenantIds:[null!=(i=null==e?void 0:e.tenantId)?i:""]},{jwt:n});yield $i(ja.setSelectedAccountState({tenantId:null!=(o=e.tenantId)?o:"",name:e.name,numberOfUsersObject:d[0],parentsAccounts:u,numberOfSubAccounts:null==(r=y[0])?void 0:r.totalSubTenants,accountSettings:e,accounts:{name:e.name,tenantId:null!=(s=e.tenantId)?s:"",numberOfUsers:null==(l=d[0])?void 0:l.totalUsers,createdAt:void 0,children:[]}})),yield $i(ja.getAccountUsers({jwt:n,_tenantId:null!=(c=null==e?void 0:e.tenantId)?c:""}))}catch(e){yield $i(ja.setAllAccountsError({key:t,value:_g(e)}))}finally{yield $i(ja.setAllAccountsLoader({key:t,value:!1}))}}function*kI(){const e=rI.SET_ROOT_ACCOUNT_DATA;yield $i(ja.setAllAccountsLoader({key:e,value:!0}));const{activeTenant:t}=yield zi((e=>e.auth.tenantsState)),{accounts:n}=yield uI();if(t)try{var a;const i=yield ji(dp.tenants.getTenantsUsersCount,{tenantIds:[null==t?void 0:t.tenantId]}),o={name:null==t?void 0:t.name,tenantId:null==t?void 0:t.tenantId,numberOfUsers:null==(a=i[0])?void 0:a.totalUsers,createdAt:null==t?void 0:t.createdAt};yield $i(ja.setAllAccountsState({rootAccount:o,accounts:G({},n,o)}))}catch(t){yield $i(ja.setAllAccountsError({key:e,value:_g(t)}))}finally{yield $i(ja.setAllAccountsLoader({key:e,value:!1}))}}function*II({payload:e}){const t=rI.LOAD_NUMBER_OF_USERS_FOR_ACCOUNT;yield $i(ja.setAllAccountsLoader({key:t,value:!0}));const{tenantId:n,jwt:a}=e;try{const e=yield ji(dp.tenants.getTenantsUsersCount,{tenantIds:[n]},{jwt:a});yield $i(ja.setSelectedAccountState({numberOfUsersObject:e[0]}))}catch(e){yield $i(ja.setAllAccountsError({key:t,value:_g(e)}))}finally{yield $i(ja.setAllAccountsLoader({key:t,value:!1}))}}function*OI(){yield $o(ja.loadAccounts,yI),yield $o(ja.searchAccounts,fI),yield $o(ja.updateSubAccountAccessForUser,AI),yield $o(ja.getUserJwtForSubAccount,pI),yield $o(ja.createSubAccount,gI),yield $o(ja.deleteSubAccount,SI),yield $o(ja.updateSubAccountSettings,vI),yield $o(ja.addUsersToAccount,bI),yield $o(ja.deleteUsersFromAccount,hI),yield $o(ja.setUserRolesForSubAccount,mI),yield $o(ja.getAccountUsers,TI),yield $o(ja.setRootAccountData,kI),yield $o(ja.setSelectedSubAccountData,EI),yield $o(ja.loadNumberOfUsersForSelectedSubAccount,II)}const PI=["callback"],_I=["callback"],LI=["callback","phoneId"],wI=["callback","phoneId"],DI=["callback"];function*UI(){yield $i(ja.setSmsState({loading:!0}));const e={_limit:10,_offset:0};try{const{items:t}=yield ji(dp.userPhoneNumbers.getUserPhoneNumbers,e);yield $i(ja.setSmsState({phoneNumbers:t}))}catch(e){yield $i(ja.setSmsState({error:_g(e)}))}finally{yield $i(ja.setSmsState({loading:!1}))}}function*RI(e){let{payload:{callback:t}}=e,n=ti(e.payload,PI);yield $i(ja.setSmsState({loading:!0}));try{const e=yield ji(dp.userPhoneNumbers.createPhoneNumber,n);yield $i(ja.setSmsState({otcToken:e.otcToken})),yield ji(UI),null==t||t(!0)}catch(e){yield $i(ja.setSmsState({error:_g(e)})),null==t||t(null,e)}finally{yield $i(ja.setSmsState({loading:!1}))}}function*CI(e){let{payload:{callback:t}}=e,n=ti(e.payload,_I);yield $i(ja.setSmsState({loading:!0}));try{yield ji(dp.userPhoneNumbers.verifyPhoneNumber,n),yield ji(UI),null==t||t(!0)}catch(e){yield $i(ja.setSmsState({error:_g(e)})),null==t||t(null,e)}finally{yield $i(ja.setSmsState({loading:!1}))}}function*NI(e){let{payload:{callback:t,phoneId:n}}=e;ti(e.payload,LI),yield $i(ja.setSmsState({loading:!0}));try{const e=yield ji(dp.userPhoneNumbers.deletePhoneNumber,n);yield $i(ja.setSmsState({otcToken:e.otcToken})),null==t||t(!0)}catch(e){yield $i(ja.setSmsState({error:_g(e)})),null==t||t(null,e)}finally{yield $i(ja.setSmsState({loading:!1}))}}function*MI(e){let{payload:{callback:t,phoneId:n}}=e,a=ti(e.payload,wI);yield $i(ja.setSmsState({loading:!0}));try{yield ji(dp.userPhoneNumbers.verifyDeletePhoneNumber,n,a),yield ji(UI),null==t||t(!0)}catch(e){yield $i(ja.setSmsState({error:_g(e)})),null==t||t(null,e)}finally{yield $i(ja.setSmsState({loading:!1}))}}function*FI(e){let{payload:{callback:t}}=e,n=ti(e.payload,DI);yield $i(ja.setSmsState({loading:!0}));try{const e=yield ji(dp.userPhoneNumbers.preVerifyPhoneNumber,n);yield $i(ja.setSmsState({otcToken:e.otcToken})),null==t||t(!0)}catch(e){yield $i(ja.setSmsState({error:_g(e)})),null==t||t(null,e)}finally{yield $i(ja.setSmsState({loading:!1}))}}function*GI(){yield Go(ja.loadPhoneNumbers,UI),yield Go(ja.setUpPhoneNumber,RI),yield Go(ja.verifyPhoneNumber,CI),yield Go(ja.deletePhoneNumber,NI),yield Go(ja.verifyDeletePhoneNumber,MI),yield Go(ja.preVerifyPhoneNumber,FI)}function*$I(e){yield ji(rv,e),yield ji(gv)}function*xI({mfaToken:e,mfaDevices:t}){yield $i(ja.setStepUpState({mfaDevices:t,mfaToken:e}));const n=yield ji(Ig,t);yield $i(ja.setMfaState({step:n}))}function*VI(e){if((e=>"MFA is not enrolled"===(null==e?void 0:e.message))(e))return void(yield $i(ja.setMfaState({step:dn.noMFAEnrolledStepUp})));window.localStorage.setItem(cv,"true");const{routes:t}=yield zi((e=>e.auth));Vo.onRedirectTo(t.logoutUrl,{preserveQueryParams:!0})}function*jI({payload:{maxAge:e,callback:t}}){yield $i(ja.setStepUpState({mfaDevices:void 0,mfaToken:""}));try{const n=yield ji(dp.auth.generateStepupSession,{maxAge:e});n.user?yield ji($I,n):yield ji(xI,n),null==t||t(!0)}catch(e){null==t||t(!1),yield ji(VI,e)}}function*BI({payload:e}){const t={acr_values:sv},{maxAge:n}=e||{};void 0!==n&&(t.max_age=n.toString());const a=yield zi((({auth:e})=>{var t,n;return null==(t=e.tenantsState)||null==(n=t.activeTenant)?void 0:n.alias}));a&&(t.organization=a),uv(),window.localStorage.setItem(cv,"true"),yield Th(t)}function*WI({payload:e}){yield bv(e,ja.setStepUpState,!0)}function*zI({payload:e}){yield Rv(e,ja.setStepUpState)}function*KI({payload:e}){yield Cv(e,ja.setStepUpState,!0)}function*HI({payload:e}){yield Pv(e,ja.setStepUpState)}function*qI({payload:e}){yield _v(e,ja.setStepUpState,!0)}function*JI({payload:e}){yield xv(e,ja.setStepUpState)}function*YI({payload:e}){yield $v(e,ja.setStepUpState)}function*XI(){yield xo(ja.stepUpHostedLogin,BI),yield xo(ja.generateStepUpSession,jI),yield xo(ja.stepUpWithAuthenticator,WI),yield xo(ja.preVerifyMFASMSForStepUp,HI),yield xo(ja.verifyMFASMSForStepUp,qI),yield xo(ja.preVerifyMFAWebAuthnForStepUp,zI),yield xo(ja.verifyMFAWebAuthnForStepUp,KI),yield xo(ja.verifyMFAEmailCodeForStepUp,JI),yield xo(ja.preVerifyMFAEmailCodeForStepUp,YI)}const QI={sagas:function*(){yield xi([ji(qh),ji(XI),ji(Kb),ji(qb),ji(Mb),ji(EE),ji(dm),ji(Gm),ji(Wm),ji(Gg),ji(Tb),ji(iT),ji(qk),ji(PT),ji(zS),ji(FT),ji(OS),ji(KT),ji(eE),ji(pE),ji(LE),ji(GE),ji(ck),ji(Pk),ji(wk),ji(Rk),ji(OI),ji(av),ji(Yg),ji(GI)])},mockSagas:function*(){yield xi([ji(Xh),ji(vm),ji(qm),ji(Db),ji(mT),ji(BT),ji($S),ji(RE),ji(JT),ji(nE),ji(VE),ji(mk),ji(SE),ji(oI),ji(aS)])},storeName:Ct,initialState:Na,reducer:xa,actions:ja},ZI=e=>({prepare:e=>({payload:e}),reducer:(t,{payload:n})=>G({},t,{[e]:G({},t[e],n)})}),eO={loading:!0,pageOffset:0,pageSize:20,logs:[],sort:[],filter:[],totalPages:0,isDownloadingCsv:!1},tO={setAuditLogsState:ZI("auditLogsState"),resetAuditLogsState:e=>G({},e,{auditLogsState:eO})},nO={exportAuditsCsv:yt("auditLogs/exportAuditsCsv"),loadAuditLogs:yt("auditLogs/loadAuditLogs",(e=>({payload:e})))},aO={loading:!0},iO={setAuditsMetadataState:ZI("auditsMetadataState"),resetAuditsMetadataState:e=>G({},e,{auditsMetadataState:aO})},oO={loadAuditsMetadata:yt("auditLogs/loadAuditsMetadata")},rO={auditLogsState:eO,auditsMetadataState:aO},{reducer:sO,actions:lO}=pt({name:Mt,initialState:rO,reducers:G({resetState:e=>G({},e,rO),setState:(e,{payload:t})=>G({},e,t)},tO,iO)}),cO=G({},lO,nO,oO),dO=e=>"createdAt"!==e.id,uO={total:20,data:Array.from(Array(5).keys()).map((e=>G({ip:"198.143.51.1",user:"Demo User Name",email:"demo-user@frontegg.com"},(()=>{switch(Math.floor(6*Math.random())){case 0:return{action:"Updated profile",description:"User updated profile details",severity:"Info"};case 1:return{action:"User logged in",severity:"Info",description:"User logged in to the product"};case 2:return{action:"User failed to login",severity:"High",description:"User failed to login with password"};case 3:return{action:"Added user",severity:"Info",description:"Added user david+535@frontegg.com to tenant"};case 4:return{action:"Assigned roles",severity:"Info",description:"Assigned 0 roles for user"};case 5:return{action:"Removed user david+108@frontegg.com from account",severity:"Info",description:"Removed access from the account for user david+108@frontegg.com"}}})(),{json:{key1:"value1",key2:"value2",key3:"value3",key4:"value4"},tenantId:"my-tenant-id",vendorId:"my-vendor-id",userAgent:"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.114 Safari/537.36",createdAt:`2022-04-07 10:${50-e}:40.201`})))},yO={properties:[{showInTable:!0,name:"createdAt",displayName:"Time",type:"Timestamp",sortable:!0,filterable:!0,showInMoreInfo:"Always",chosen:!1,selected:!1,isPredefined:!1},{showInTable:!0,name:"email",displayName:"User",type:"Email",filterable:!0,sortable:!0,isPredefined:!0,chosen:!1,selected:!1},{showInTable:!0,name:"action",displayName:"Action",type:"AlphaNumeric",sortable:!0,filterable:!0,showInMoreInfo:"Always",chosen:!1,selected:!1,isPredefined:!0},{showInTable:!0,name:"description",type:"AlphaNumeric",sortable:!1,filterable:!1,displayName:"Description",isPredefined:!0,chosen:!1,selected:!1},{showInTable:!0,name:"ip",displayName:"IP Address",type:"IpAddress",sortable:!0,filterable:!0,showInMoreInfo:"Always",chosen:!1,selected:!1,isPredefined:!0},{showInTable:!1,name:"severity",displayName:"Severity",type:"Severity",sortable:!0,filterable:!0,showInMoreInfo:"Always",chosen:!1,selected:!1,isPredefined:!0},{showInTable:!1,name:"userAgent",displayName:"User Agent",type:"AlphaNumeric",filterable:!0,sortable:!0,isPredefined:!0,chosen:!1,selected:!1},{showInTable:!1,name:"json",type:"Json",sortable:!0,filterable:!0,displayName:"Json Data",showInMoreInfo:"Always",isPredefined:!1}]},fO=()=>zi((e=>e.auditLogs.auditLogsState)),pO=()=>zi((e=>e.auditLogs.auditsMetadataState));function*gO(){const e=yield fO(),{columns:t}=yield pO();try{const n=e.filter,a=e.sort.reduce(((e,t)=>G({},e,{sortBy:t.id,sortDirection:t.desc?"desc":"asc"})),{}),i=n.reduce(((e,t)=>G({},e,{[t.id]:t.value})),{});yield $i(cO.setAuditLogsState({isDownloadingCsv:!0}));const o="audits.csv";yield dp.audits.exportAudits(G({endpoint:"csv/v2",headerProps:t,offset:0,outputFileName:o},a,i))}catch(e){console.error("failed to export audits - ",e)}yield $i(cO.setAuditLogsState({isDownloadingCsv:!1}))}function*SO({payload:e}){yield $i(cO.setAuditLogsState({loading:!(null!=e&&e.silentLoading),error:null}));const t=yield fO(),{columns:n}=yield pO();try{var a,i,o,r,s;const l=null!=(a=e.pageSize)?a:t.pageSize,c=null!=(i=e.pageOffset)?i:t.pageOffset,d=null!=(o=e.filter)?o:t.filter,u=null!=(r=e.sort)?r:t.sort;yield $i(cO.setAuditLogsState({pageSize:l,pageOffset:c,filter:d,sort:u}));const y=u.reduce(((e,t)=>G({},e,{sortBy:t.id,sortDirection:t.desc?"desc":"asc"})),{}),f=d.reduce(((e,t)=>G({},e,{[t.id]:t.value})),{});n||(yield $i(cO.loadAuditsMetadata()));const{data:p,total:g}=yield ji(dp.audits.getAudits,G({offset:c,count:l},y,f));yield $i(cO.setAuditLogsState({loading:!1,logs:null!=p?p:[],totalPages:+Math.ceil(g/l)})),null==e||null==(s=e.callback)||s.call(e,!0)}catch(t){var l;yield $i(cO.setAuditLogsState({loading:!1,error:_g(t)})),null==e||null==(l=e.callback)||l.call(e,null,t)}}function*vO(){yield Go(cO.exportAuditsCsv,gO),yield Go(cO.loadAuditLogs,SO)}function*hO({payload:e}){yield $i(cO.setAuditLogsState({loading:!(null!=e&&e.silentLoading),error:null}));const t=yield fO(),{columns:n}=yield pO();try{var a,i,o,r,s;const l=null!=(a=e.pageSize)?a:t.pageSize,c=null!=(i=e.pageOffset)?i:t.pageOffset,d=null!=(o=e.filter)?o:t.filter,u=null!=(r=e.sort)?r:t.sort;yield $i(cO.setAuditLogsState({pageSize:l,pageOffset:c,filter:d,sort:u})),n||(yield $i(cO.loadAuditsMetadata()));const{data:y,total:f}=((e,t)=>{const{data:n}=uO;let a=n.filter((e=>t=>e.filter(dO).every((e=>t[e.id].includes(e.value))))(e));if(t.length){const{id:e,desc:n=!1}=t[0];a=a.sort(((e,t)=>(n,a)=>n[e]>a[e]?t?-1:1:a[e]>n[e]?t?1:-1:0)(e,n))}return{data:a,total:a.length}})(d,u);yield $i(cO.setAuditLogsState({loading:!1,logs:null!=y?y:[],totalPages:+Math.ceil(f/l)})),null==e||null==(s=e.callback)||s.call(e,!0)}catch(t){var l;yield $i(cO.setAuditLogsState({loading:!1,error:_g(t)})),null==e||null==(l=e.callback)||l.call(e,null,t)}}function*mO(){yield Go(cO.loadAuditLogs,hO)}function*bO(){yield $i(cO.setAuditsMetadataState({loading:!0,error:null}));try{const{properties:e}=yield ji(dp.metadata.getAuditsMetadata);yield $i(cO.setAuditsMetadataState({columns:e,loading:!1}))}catch(e){yield $i(cO.setAuditsMetadataState({error:e,loading:!1}))}}function*AO(){yield Go(cO.loadAuditsMetadata,bO)}function*TO(){yield $i(cO.setAuditsMetadataState({loading:!0,error:null}));try{const{properties:e}=yO;yield $i(cO.setAuditsMetadataState({columns:e,loading:!1}))}catch(e){yield $i(cO.setAuditsMetadataState({error:e,loading:!1}))}}function*EO(){yield Go(cO.loadAuditsMetadata,TO)}const kO={sagas:function*(){yield xi([ji(vO),ji(AO)])},mockSagas:function*(){yield xi([ji(mO),ji(EO)])},storeName:Mt,initialState:rO,reducer:sO,actions:cO},IO={total:0,offset:0,filter:"",sortBy:"createdAt",context:null,filters:[],rowsData:[],lastUpdated:new Date,isLoading:!0,isFetchMore:!1,totalToday:0,currentPage:0,headerProps:[],sortDirection:"desc",severeThisWeek:0,predefinedFilters:[],isDownloadingCsv:!1,virtualScroll:!1},{name:OO,actions:PO,reducer:_O}=pt({name:"audits",initialState:IO,reducers:{setContext:(e,{payload:t})=>{e.context=t},startLoading:e=>{e.isLoading=!0},setVirtualScroll:(e,{payload:t})=>{e.virtualScroll=t},startRefresh:e=>{e.isLoading=!0},startFetching:e=>{e.isFetchMore=!0},finishLoading:e=>{e.isLoading=!1},startDownloadingCsv:e=>{e.isDownloadingCsv=!0},stopDownloadingCsv:e=>{e.isDownloadingCsv=!1},loadStatsSuccess:(e,{payload:t})=>{e.error=void 0,e.totalToday=t.totalToday,e.severeThisWeek=t.severeThisWeek},loadItemFailedAction:(e,{payload:t})=>{e.error=G({},e.error,{[t.name]:t.error})},loadMetadataSuccess:(e,{payload:t})=>{e.error={},e.headerProps=t.properties,e.themeAudits=t.theme?t.theme.styles:{}},loadAuditsSuccess:(e,{payload:t})=>{e.error={},e.rowsData=t.rowsData,e.lastUpdated=new Date,e.total=t.total},fetchMoreSuccess:(e,{payload:t})=>{e.error={},e.offset=t.offset,e.currentPage=t.currentPage,e.isFetchMore=!1},setFilterData:(e,{payload:t})=>{e.filters=t,e.currentPage=0,e.offset=0,e.isLoading=!0},textSearch:(e,{payload:t})=>{e.filter=t,e.currentPage=0,e.offset=0,e.isLoading=!0},onPageChange:(e,{payload:t})=>{e.currentPage=t-1,e.offset=20*e.currentPage,e.isLoading=!0},setDataSorting:(e,{payload:t})=>{e.sortBy=t.sortBy,e.currentPage=0,e.sortDirection="asc"===t.sortDirection?"desc":"asc",e.offset=0,e.isLoading=!0},setPredefinedFilters:(e,{payload:t})=>{e.predefinedFilters=t,e.filters=Object.keys(t).map((e=>({key:e,value:t[e]})))}}}),LO=G({},PO,{initData:yt(`${OO}/initData`),loadAudits:yt(`${OO}/loadAudits`),removeFilter:yt(`${OO}/removeFilter`),filterData:yt(`${OO}/filterData`),exportCSV:yt(`${OO}/exportCSV`),deleteAudits:yt(`${OO}/deleteAudits`)}),wO=()=>zi((e=>e[OO]));function*DO(){const{sortBy:e,sortDirection:t}=yield wO();try{const n=yield ji(dp.audits.getAuditsStats,{sortBy:e,sortDirection:t,count:20});yield $i(LO.loadStatsSuccess(n))}catch(e){const t={name:"stats",error:e};console.error("failed to load stats - ",e),yield $i(LO.loadItemFailedAction(t))}}function*UO(){try{const e=yield ji(dp.metadata.getAuditsMetadata);yield $i(LO.loadMetadataSuccess(e))}catch(e){const t={name:"metadata",error:e};console.error("failed to load metadata - ",e),yield $i(LO.loadItemFailedAction(t))}}const RO=e=>e.reduce(((e,t)=>(e[t.key]=t.value,e)),{});function*CO({payload:e}){const{filters:t,sortBy:n,sortDirection:a,filter:i,offset:o,virtualScroll:r}=yield wO(),{appendMode:s=r,onlyOneLoad:l=!0,offset:c}=e||{},{rowsData:d}=s?yield wO():{rowsData:[]};try{const e=RO(t),{data:s,total:u}=yield ji(dp.audits.getAudits,G({},r&&{paginationMode:"virtual"},{sortDirection:a,sortBy:n,filter:i},e,{offset:r?d.length+c||d.length+o:c||o,count:20}));yield $i(LO.loadAuditsSuccess({rowsData:[...d,...s],total:u})),l&&(yield $i(LO.finishLoading()))}catch(e){const t={name:"audits",error:e};console.error("failed to load audits - ",e),yield $i(LO.loadItemFailedAction(t))}}function*NO(){yield $i(LO.startLoading()),yield xi([DO(),UO(),CO({payload:{onlyOneLoad:!1},type:""})]),yield $i(LO.finishLoading())}function*MO({payload:e}){const{filters:t}=yield wO(),n=t.findIndex((t=>t.key===e.key));if(n<0)return;const a=[...t.slice(0,n),...t.slice(n+1)];yield $i(LO.setFilterData(a))}function*FO({payload:e}){const{filters:t}=yield wO();let n=t.findIndex((t=>t.key===e.key));n<0&&(n=t.length);const a=[...t.slice(0,n),e,...t.slice(n+1)];yield $i(LO.setFilterData(a))}function*GO(){const{filters:e,sortBy:t,sortDirection:n,filter:a,headerProps:i}=yield wO(),o=RO(e);yield $i(LO.startDownloadingCsv());try{yield dp.audits.exportAudits(G({endpoint:"csv/v2",headerProps:i,sortDirection:n,sortBy:t,filter:a},o,{offset:0,outputFileName:"audits.csv"}))}catch(e){console.error("failed to export audits - ",e)}finally{yield $i(LO.stopDownloadingCsv())}}function*$O(){yield $o(LO.initData,NO),yield $o(LO.removeFilter,MO),yield $o(LO.filterData,FO),yield $o([LO.loadAudits,LO.textSearch,LO.onPageChange],CO),yield $o([LO.setFilterData,LO.setDataSorting,LO.startRefresh],(()=>CO({payload:{appendMode:!1},type:""}))),yield $o(LO.exportCSV,GO)}const xO={isLoading:!1,isSaving:!1,list:[],processIds:[],slackChannels:{isLoading:!1}},VO={initData:()=>G({},xO),setConnectivityState:(e,{payload:t})=>G({},e,t),cleanWebhookTestData:e=>G({},e,{testResult:void 0}),cleanWebhookLogsData:e=>G({},e,{webhookLogs:void 0}),cleanWebhookTestMessage:e=>{var t;return G({},e,{testResult:{status:null==(t=e.testResult)?void 0:t.status,message:void 0}})},cleanError:e=>G({},e,{error:void 0}),cleanSlackData:e=>G({},e,{slackChannels:{isLoading:!1}}),postWebhookRetryAction:{prepare:e=>({payload:e}),reducer:(e,{payload:t})=>G({},e,{retryResult:G({},e.retryResult,{[t]:{isProcess:!0,success:!1}})})},postWebhookRetryResult:{prepare:e=>({payload:e}),reducer:(e,{payload:t})=>G({},e,{retryResult:G({},e.retryResult,t)})}},jO={loadSlackActions:yt("connectivity/loadSlackActions"),loadDataAction:yt("connectivity/loadDataAction",(e=>({payload:e}))),postDataAction:yt("connectivity/postDataAction",(e=>({payload:e}))),postCodeAction:yt("connectivity/postCodeAction",(e=>({payload:e}))),loadScope:yt("connectivity/loadScope"),deleteWebhookConfigAction:yt("connectivity/deleteWebhookConfigAction",(e=>({payload:e}))),postWebhookTestAction:yt("connectivity/postWebhookTestAction",(e=>({payload:e}))),loadWebhookLogsAction:yt("connectivity/loadWebhookLogsAction",((e,t=0,n=10)=>({payload:{id:e,offset:t,limit:n}})))},BO={isLoading:!1,isSaving:!1,list:[],processIds:[],slackChannels:{isLoading:!1}},{reducer:WO,actions:zO}=pt({name:Nt,initialState:BO,reducers:G({},VO)}),KO=G({},zO,jO),HO={slack:dp.connectivity.getSlackConfiguration,email:dp.connectivity.getEmailConfiguration,sms:dp.connectivity.getSMSConfiguration,webhook:dp.connectivity.getWebhooksConfigurations,categories:dp.connectivity.getCategories,channelMap:dp.connectivity.getChannelMaps},qO={slack:dp.connectivity.postSlackConfiguration,email:dp.connectivity.postEmailConfiguration,sms:dp.connectivity.postSMSConfiguration,webhook:dp.connectivity.postWebhooksConfiguration},JO=["email","slack","sms","webhook"],YO={sms:{title:"connectivity.sms",events:e=>(null==e?void 0:e.length)||0,isActive:e=>{var t;return null!=(t=null==e?void 0:e.some((({enabled:e})=>e)))&&t},image:"sms"},email:{title:"common.email",events:e=>(null==e?void 0:e.length)||0,isActive:e=>{var t;return null!=(t=null==e?void 0:e.some((({enabled:e})=>e)))&&t},image:"email"},slack:{title:"connectivity.slack",events:e=>{var t;return(null==e||null==(t=e.slackSubscriptions)?void 0:t.length)||0},isActive:e=>{var t;return null!=(t=!(null==e||!e.slackSubscriptions.some((({isActive:e})=>e))))&&t},image:"slack"},webhook:{title:"connectivity.webhook",events:e=>(null==e?void 0:e.length)||0,isActive:e=>{var t;return null!=(t=null==e?void 0:e.some((({isActive:e})=>e)))&&t},image:"webhook"}},XO=["id"],QO=["id","enabled"],ZO=["categories","channelMap"];function*eP(e){return yield ji(nP,{payload:{api:e},type:""})}function*tP({payload:e=JO}){yield $i(KO.setConnectivityState({isLoading:!0}));try{const t=yield xi([...e.map(eP),yield nP({payload:{api:"categories"},type:""}),yield function*(){return(yield xi(e.map((function*(e){return yield nP({payload:{api:"channelMap",params:e},type:""})})))).reduce(((t,n,a)=>G({},t,{[`${e[a]}`]:n})),{})}()]),n=yield nP({payload:{api:"webhook"},type:""}),a=t.reduce(((n,a,i)=>e[i]?t[t.length-1][e[i]].length?G({},n,{[`${e[i]}`]:a,list:[...n.list,{id:i,key:e[i],events:YO[e[i]].events(a),active:YO[e[i]].isActive(a),platform:YO[e[i]].title,image:YO[e[i]].image}]}):n:G({},n,{[`${ZO[i-e.length]}`]:a})),{list:[],webhook:n});yield $i(KO.setConnectivityState(G({},a,{error:void 0,isSaving:!1,isLoading:!1})))}catch(e){yield $i(KO.setConnectivityState({isLoading:!1}))}}function*nP({payload:{api:e,params:t}}){try{return yield ji(HO[e],t)}catch(e){return}}function*aP(){try{yield $i(KO.setConnectivityState({slackChannels:{isLoading:!0}}));const e=yield ji(dp.connectivity.getSlackChannels);yield $i(KO.setConnectivityState({error:void 0,slackChannels:{isLoading:!1,data:e}}))}catch(e){yield $i(KO.setConnectivityState({error:void 0,slackChannels:{isLoading:!1}}))}}function*iP(e,t){const{connectivity:{list:n}}=yield zi(),a=n.find((({key:t})=>t===e));if(!a)return;const i=YO[e].isActive(t);i!==a.active&&(yield $i(KO.setConnectivityState({list:n.map((t=>t.key===e?G({},t,{active:i}):t))})))}function*oP({payload:{platform:e,data:t,callback:n}}){const{processIds:a}=yield zi((e=>e.connectivity));try{if(yield $i(KO.setConnectivityState({isSaving:!0,processIds:"webhook"===e?[t._id,...a]:a})),"slack"===e?yield function*({payload:e}){const{connectivity:{slack:t}}=yield zi();if(!t)return;const{slackSubscriptions:n}=t,{slackSubscriptions:a}=e;yield xi([...a.reduce(((e,t)=>{var a,i;return!t.id&&t.slackEvents&&null!=(a=t.slackEvents[0].channelIds)&&a.length||(null==n?void 0:n.find((e=>{let{id:n}=e,a=ti(e,XO);return n===t.id&&JSON.stringify(G({id:n},a))!==JSON.stringify(t)})))&&t.slackEvents&&null!=(i=t.slackEvents[0].channelIds)&&i.length?[...e,t]:e}),[]).map((function*(e){return yield ji(qO.slack,e)})),...a.reduce(((e,t)=>t.id&&!t.slackEvents[0].channelIds.length?[...e,t]:e),[]).map((function*(e){return yield ji(dp.connectivity.deleteSlackConfiguration,e)}))])}({payload:t,type:""}):["sms","email"].includes(e)?yield function*({payload:e,type:t}){const{connectivity:n}=yield zi(),{processIds:a}=yield zi((e=>e.connectivity)),i=n[t];if(!i)return;let o=[];try{o=yield xi([...e.reduce(((e,t)=>!i.find((({eventKey:e})=>e===t.eventKey))&&t.subscriptions[0].recipients.filter((e=>e)).length?[...e,t]:e),[]).map((function*(e){return yield ji("email"===t?dp.connectivity.postEmailConfiguration:dp.connectivity.postSMSConfiguration,e)})),...e.reduce(((e,t)=>{const n=i.find((({eventKey:e})=>e===t.eventKey));return n&&JSON.stringify(n)!==JSON.stringify(t)?[...e,t]:e}),[]).map((function*(e){const{subscriptions:n,eventKey:a}=e,i=n[0],{id:o="",enabled:r}=i,s=ti(i,QO);return yield xi([yield ji("email"===t?dp.connectivity.patchEmailConfiguration:dp.connectivity.patchSMSConfiguration,{eventKey:a,enabled:r}),yield ji("email"===t?dp.connectivity.putEmailSubscriptions:dp.connectivity.putSMSSubscriptions,o,a,G({},s,{enabled:r}))])})),...e.reduce(((e,t)=>{const n=i.find((({eventKey:e})=>e===t.eventKey));return n&&n.subscriptions[0].recipients.length&&!t.subscriptions[0].recipients.filter((e=>!!e)).length?[...e,t]:e}),[]).map((function*({eventKey:e,subscriptions:n}){return ji("email"===t?dp.connectivity.deleteEmailSubscriptions:dp.connectivity.deleteSMSSubscriptions,e,n[0].id||"")}))])}catch{}if(o.length){const e=yield nP({payload:{api:t},type:""});yield $i(KO.setConnectivityState({error:void 0,isSaving:!1,[`${t}`]:e,processIds:e.id?a.filter((t=>t!==e.id)):a})),yield iP(t,e)}else yield $i(KO.setConnectivityState({error:void 0,isSaving:!1,[`${t}`]:i,processIds:a}))}({payload:t,type:e}):yield ji(qO[e],t),!["sms","email"].includes(e)){const i=yield nP({payload:{api:e},type:""});"webhook"===e&&(i.id=t._id),yield $i(KO.setConnectivityState({error:void 0,isSaving:!1,[`${e}`]:i,processIds:i.id?a.filter((e=>e!==i.id)):a})),yield iP(e,i),null==n||n(!0)}}catch(e){yield $i(KO.setConnectivityState({error:_g(e,e.toString()),isSaving:!1,isLoading:!1}))}}function*rP({payload:e}){try{yield dp.connectivity.postSlackCode(e)}catch{}yield $i(KO.setConnectivityState({error:void 0,isSaving:!1}))}function*sP(){const{slackChannels:e}=yield zi((e=>e.connectivity));try{yield $i(KO.setConnectivityState({slackChannels:G({},e,{isLoadingScope:!0})}));const{clientId:t}=yield ji(dp.connectivity.getSlackScope);yield $i(KO.setConnectivityState({slackChannels:{error:void 0,clientId:t,isLoadingScope:!1,isLoading:!1}}))}catch{yield $i(KO.setConnectivityState({slackChannels:{error:void 0,isLoadingScope:!1,isLoading:!1}}))}}function*lP({payload:e}){const{callback:t,webhookId:n}=e,{processIds:a}=yield zi((e=>e.connectivity));try{yield $i(KO.setConnectivityState({isSaving:!0})),yield ji(dp.connectivity.deleteWebhooksConfiguration,n)}catch(e){null==t||t(null,_g(e))}const i=yield nP({payload:{api:"webhook"},type:""});i&&(yield $i(KO.setConnectivityState({error:void 0,isSaving:!1,webhook:i,processIds:i.id?a.filter((e=>e!==i.id)):a}))),null==t||t(!0)}function*cP({payload:e}){try{yield $i(KO.setConnectivityState({isTesting:!0}));const{statusCode:t,body:n}=yield ji(dp.connectivity.postWebhookTest,e);if([201,200].includes(t)){const e=JSON.stringify(n,null,2);yield $i(KO.setConnectivityState({isTesting:!1,testResult:{status:"success",message:e}}))}else yield $i(KO.setConnectivityState({isTesting:!1,testResult:{status:"failed"}}))}catch(e){yield $i(KO.setConnectivityState({isTesting:!1,testResult:{status:"failed",message:e.toString()}}))}}function*dP({payload:e}){try{const{statusCode:t}=yield ji(dp.connectivity.postWebhookRetry,e);yield $i(KO.postWebhookRetryResult({[e]:{isProcess:!1,success:202===t}}))}catch(t){yield $i(KO.postWebhookRetryResult({[e]:{isProcess:!1,success:!1}}))}}function*uP({payload:{id:e,limit:t,offset:n}}){const{webhookLogs:a}=yield zi((e=>e.connectivity));try{yield $i(KO.setConnectivityState({webhookLogs:G({},a,{isLoading:!0})}));const i=yield ji(dp.connectivity.getWebhookLog,e,n,t);yield $i(KO.setConnectivityState({error:void 0,webhookLogs:G({isLoading:!1},i)}))}catch(e){yield $i(KO.setConnectivityState({error:void 0,webhookLogs:{isLoading:!1}}))}}const yP={sagas:function*(){yield Go(KO.loadDataAction,tP),yield $o(KO.loadSlackActions,aP),yield Go(KO.postDataAction,oP),yield Go(KO.postCodeAction,rP),yield Go(KO.loadScope,sP),yield Go(KO.deleteWebhookConfigAction,lP),yield Go(KO.postWebhookTestAction,cP),yield Go(KO.postWebhookRetryAction,dP),yield $o(KO.loadWebhookLogsAction,uP)},storeName:Nt,initialState:BO,reducer:WO,actions:KO};function fP(){return{setLoading:{prepare:e=>({payload:e}),reducer:(e,t)=>G({},e,{loading:t.payload},t.payload?{error:null}:{})},setError:{prepare:e=>({payload:e}),reducer:(e,t)=>G({},e,{error:t.payload,loading:!1,fetching:!1})},setState:{prepare:e=>({payload:e}),reducer:(e,t)=>G({},e,t.payload)}}}function pP(e,t){return{prepare:e=>({payload:e}),reducer:(n,a)=>G({},n,{[e]:t(n[e],a)})}}function gP(e){return pP(e,((e,t)=>G({},e,{loading:t.payload})))}function SP(e){return pP(e,((e,t)=>G({},e,{error:t.payload,loading:!1})))}const vP={loading:!1,error:null,fetching:!0,plans:[]},{actions:hP,reducer:mP,name:bP}=pt({name:"subscriptions/plans",initialState:vP,reducers:G({},fP())}),AP=G({loadPlans:yt(`${bP}/loadPlans`)},hP),TP={loading:!1,error:null,fetching:!0,config:null},EP=G({},fP()),{actions:kP,reducer:IP,name:OP}=pt({name:"subscriptions/config",initialState:TP,reducers:EP}),PP=G({loadPaymentConfiguration:yt(`${OP}/loadPaymentConfiguration`)},kP),_P={loading:!1,error:null,fetching:!0,cancellation:{loading:!1,error:null},renewal:{loading:!1,error:null}},LP=G({},fP(),{setCancellationLoading:gP("cancellation"),setCancellationError:SP("cancellation"),setRenewalLoading:gP("renewal"),setRenewalError:SP("renewal")}),{reducer:wP,actions:DP,name:UP}=pt({name:"subscriptions/billing/subscription",initialState:_P,reducers:LP}),RP=G({load:yt(`${UP}/loadSubscription`),cancelSubscription:yt(`${UP}/cancelSubscription`),renewSubscription:yt(`${UP}/renewSubscription`)},DP),CP={loading:!1,error:null,fetching:!0},NP=G({},fP()),{reducer:MP,actions:FP,name:GP}=pt({name:"subscriptions/billing/information",initialState:CP,reducers:NP}),$P=G({loadBillingInformation:yt(`${GP}/loadBillingInformation`),cancelSubscription:RP.cancelSubscription,renewSubscription:RP.renewSubscription},FP),xP={loading:!1,error:null,fetching:!0},VP=G({},fP(),{setState:{prepare:e=>({payload:e}),reducer:(e,t)=>G({},e,t.payload)}}),{reducer:jP,actions:BP,name:WP}=pt({name:"subscriptions/billing/payment",initialState:xP,reducers:VP}),zP=G({loadPaymentMethod:yt(`${WP}/loadPaymentMethod`),submitPaymentMethod:yt(`${WP}/submitPaymentMethod`),submitPaymentMethodError:yt(`${WP}/submitPaymentMethodError`),submitPaymentMethodSuccess:yt(`${WP}/submitPaymentMethodSuccess`),updatePaymentMethodBillingDetails:yt(`${WP}/updateBillingDetails`,(e=>({payload:e})))},BP),KP={loading:!1,error:null,fetching:!0,invoices:[],invoiceDownload:{loading:!1,error:null}},HP=G({},fP(),{setInvoiceDownloadState:{prepare:e=>({payload:e}),reducer:(e,t)=>G({},e,{invoiceDownload:G({},e.invoiceDownload,t.payload)})}}),{reducer:qP,actions:JP,name:YP}=pt({name:"subscriptions/billing/invoices",initialState:KP,reducers:HP}),XP=G({loadInvoices:yt(`${YP}/loadInvoices`),downloadInvoice:yt(`${YP}/downloadInvoice`,(e=>({payload:e})))},JP),QP={information:CP,invoices:KP,paymentMethod:xP,subscription:_P},ZP={invoices:XP,information:$P,paymentMethod:zP,subscription:RP},e_=Ke({invoices:qP,information:MP,paymentMethod:jP,subscription:wP}),t_={fetching:!0,loading:!1,error:null,confirmed:!1},n_=G({},fP()),{actions:a_,reducer:i_,name:o_}=pt({name:"subscriptions/checkout",initialState:t_,reducers:n_}),r_=G({loadCheckout:yt(`${o_}/loadCheckout`),resetCheckout:yt(`${o_}/resetCheckout`),submitCheckout:yt(`${o_}/submitCheckout`),confirmCheckout:yt(`${o_}/confirmCheckout`,(e=>({payload:e}))),errorCheckout:yt(`${o_}/errorCheckout`,(e=>({payload:e})))},a_),s_={loading:!1,error:null,cardSetupIntentSecret:null},l_=G({},fP()),{reducer:c_,actions:d_,name:u_}=pt({name:"subscriptions/stripe",initialState:s_,reducers:l_}),y_=G({loadCustomer:yt(`${u_}/loadCustomer`),createCardSetupIntentSecret:yt(`${u_}/createCardSetupIntentSecret`)},d_),f_={loading:!1,fetching:!0,vendorPublicConfig:null},{actions:p_,reducer:g_,name:S_}=pt({name:"subscriptions/vendorPublicConfig",initialState:f_,reducers:G({},fP())}),v_=G({loadVendorPublicConfiguration:yt(`${S_}/loadVendorPublicConfiguration`)},p_),h_={config:TP,plans:vP,checkout:t_,billing:QP,stripe:s_,vendorPublicConfig:f_},m_={config:PP,billing:ZP,plans:AP,checkout:r_,stripe:y_,vendorPublicConfig:v_},b_=Ke({config:IP,billing:e_,plans:mP,checkout:i_,stripe:c_,vendorPublicConfig:g_});let A_,T_,E_;function k_({policy:e}){return{policy:E_.AT_PERIOD_END}}function I_(e){switch(e){case ef.ACTIVE:return T_.ACTIVE;case ef.INCOMPLETE:return T_.INCOMPLETE;case ef.CANCELED:return T_.CANCELED;case ef.EXPIRED:return T_.EXPIRED;case ef.TRIALING:return T_.TRIALING;default:return T_.EXPIRED}}!function(e){e.STRIPE="Stripe"}(A_||(A_={})),function(e){e.ACTIVE="ACTIVE",e.CANCELED="CANCELED",e.INCOMPLETE="INCOMPLETE",e.EXPIRED="EXPIRED",e.TRIALING="TRIALING"}(T_||(T_={})),function(e){e.AT_PERIOD_END="atPeriodEnd"}(E_||(E_={}));const O_={id:"sub_1JbhYVEwsu4qiqnnfMhYAdY6",externalId:"sub_1JbhYVEwsu4qiqnnfMhYAdY6",startDate:"2021-09-20T08:08:51.000Z",status:ef.ACTIVE,externallyManaged:!1,cancellation:null,currentPeriodStart:"2021-09-20T08:08:51.000Z",currentPeriodEnd:"2021-10-20T08:08:51.000Z",plan:{slug:"test"}},P_=[{id:"prod_J60fUEvI7qV1eL",externalId:"prod_J60fUEvI7qV1eL",name:"Premium",description:"",price:{id:"price_1IToe8Ewsu4qiqnndAV76J69",externalId:"price_1IToe8Ewsu4qiqnndAV76J69",currency:"usd",amount:1e4},slug:"premium"},{id:"prod_J60duauCpXfcur",externalId:"prod_J60duauCpXfcur",name:"Free",description:"Totally free plan. Nothing to pay.",price:{id:"price_1ITocfEwsu4qiqnnnBHDx9fQ",externalId:"price_1ITocfEwsu4qiqnnnBHDx9fQ",currency:"usd",amount:0},slug:"free"}],__=[{id:"in_1JbhYWEwsu4qiqnnrUh6hsHa",externalId:"in_1JbhYWEwsu4qiqnnrUh6hsHa",subscriptionId:"sub_1JbhYVEwsu4qiqnnfMhYAdY6",paymentDate:"2021-09-20T08:08:51.000Z",totalAmount:1e4,currency:"usd",paid:!0,receiptNumber:""},{id:"in_1JbhYWEwsu4qiqnnrUh6hsHa",externalId:"in_1JbhYWEwsu4qiqnnrUh6hsHa",subscriptionId:"sub_1JbhYVEwsu4qiqnnfMhYAdY6",paymentDate:"2021-08-20T08:08:51.000Z",totalAmount:1e4,currency:"usd",paid:!0,receiptNumber:""}],L_=[{id:"id",externalId:"externalId",type:tf.CARD,isDefault:!0,last4:"4242",expMonth:11,expYear:25,brand:"visa",billingDetails:{name:"Dummy",email:"dummy@email.com"}}],w_={allowPlanDowngrade:!0,allowPlanCancellation:!0};function*D_(){yield $i(RP.setLoading(!0));try{const[e]=yield ji(dp.subscriptions.getManagedSubscriptions);yield $i(RP.setState({subscription:e,fetching:!1,loading:!1,error:null}))}catch(e){yield $i(RP.setError(e))}}function*U_(){yield Go($P.loadBillingInformation,R_)}function*R_(){yield function*(e){const t=yield zi((e=>{var t;return null==(t=e.subscriptions.config.config)?void 0:t.paymentProvider})),n=yield zi((e=>{var t,n;return null==(t=e.auth)||null==(n=t.user)?void 0:n.tenantId}));t&&n?yield C_(n,!1):yield $i($P.setError(t?"Not authorized":"Internal feature failure"))}()}function*C_(e,t){yield $i($P.setLoading(!0));try{var n,a;const i=yield ji(dp.subscriptions.getSubscriptionSummaries,e),{currentPlanId:o,externallyManaged:r}=i;let s,l=null;r?s=yield ji(dp.subscriptions.getSubscriptionPlan,o):([,s]=yield xi([ji(D_),ji(dp.subscriptions.getSubscriptionPlan,o)]),l=yield zi((e=>e.subscriptions.billing.subscription.subscription||null))),yield $i($P.setState(G({loading:!1,fetching:!1,summary:i},l?{subscription:{id:l.id,externalId:l.externalId,startDate:l.startDate,currentPeriodStart:l.currentPeriodStart,currentPeriodEnd:l.currentPeriodEnd,status:t?T_.ACTIVE:I_(l.status),cancellation:l.cancellation&&k_(l.cancellation),trialEnd:l.trialEnd?l.trialEnd:null}}:{},s?{plan:{id:s.id,name:s.name,description:s.description,price:(null==(n=s.price)?void 0:n.amount)||0,currency:(null==(a=s.price)?void 0:a.currency)||"usd",recurringInterval:"month",slug:s.slug}}:{})))}catch(e){yield $i($P.setError(_g(e)))}}function*N_(){yield function*(){var e,t;yield $i($P.setLoading(!0)),yield Ki(500),yield $i($P.setState({loading:!1,fetching:!1,summary:{subscriptionId:O_.id,paymentMethodId:"mockPaymentMethodId",tenantConfigurationId:"mockTenantConfigurationId",providerType:af.Stripe,externallyManaged:!1,currentPlanId:P_[0].id,defaultPlanId:P_[0].id},plan:G({},P_[0],{price:null==(e=P_[0].price)?void 0:e.amount,currency:null==(t=P_[0].price)?void 0:t.currency,recurringInterval:"month"})}))}()}function*M_(){yield Go($P.loadBillingInformation,N_)}function*F_(){yield Go(zP.loadPaymentMethod,G_),yield Go(zP.submitPaymentMethod,x_),yield Go(zP.submitPaymentMethodError,V_),yield Go(zP.submitPaymentMethodSuccess,j_),yield Go(zP.updatePaymentMethodBillingDetails,$_)}function*G_(){yield $i(zP.setLoading(!0));try{const e=(yield ji(dp.subscriptions.getPaymentMethods))[0];yield $i(zP.setState({paymentMethod:e,loading:!1,fetching:!1}))}catch(e){yield $i(zP.setError(_g(e)))}}function*$_({payload:e}){yield $i(zP.setLoading(!0));const{id:t,email:n,address:a,callback:i}=e;try{yield ji(dp.subscriptions.updatePaymentMethodBillingDetails,t,G({email:n},a)),yield ji(G_),null==i||i(!0)}catch(e){yield $i(zP.setError(_g(e))),null==i||i(!1)}yield $i(zP.setLoading(!1))}function*x_(){yield $i(zP.setLoading(!0))}function*V_({payload:e}){yield $i(zP.setError(e))}function*j_(){yield $i(zP.loadPaymentMethod())}function*B_(){yield $i(zP.setLoading(!0)),yield Ki(500);const e=L_[0];yield $i(zP.setState({paymentMethod:e,loading:!1,fetching:!1}))}function*W_(){yield Go(zP.loadPaymentMethod,B_)}function*z_(){yield Go(XP.loadInvoices,K_),yield Go(XP.downloadInvoice,H_)}function*K_(){yield $i(XP.setLoading(!0));try{const e=(yield ji(dp.subscriptions.getSubscriptionInvoices)).map((e=>({id:e.id,externalId:e.externalId,subscriptionId:e.subscriptionId,paymentDate:new Date(Date.parse(e.paymentDate)),totalAmount:+((e.totalAmount||0)/100).toFixed(2),currency:e.currency||"usd",paid:e.paid||!1,receiptNumber:e.receiptNumber})));yield $i(XP.setState({loading:!1,fetching:!1,invoices:e}))}catch(e){yield $i(XP.setError(_g(e)))}}function*H_({payload:e}){yield $i(XP.setInvoiceDownloadState({loading:!0,error:null}));try{yield ji(dp.subscriptions.getSubscriptionInvoicePdf,e.invoiceId,e.filename),yield $i(XP.setInvoiceDownloadState({loading:!1,error:null}))}catch(e){yield $i(XP.setInvoiceDownloadState({loading:!1,error:_g(e,null)}))}}function*q_(){yield $i(XP.setLoading(!0)),yield Ki(500),yield $i(XP.setState({loading:!1,fetching:!1,invoices:__.map((e=>G({},e,{selectedPlan:"Premium",paymentDate:new Date(Date.parse(e.paymentDate)),totalAmount:+((e.totalAmount||0)/100).toFixed(2)})))})),yield $i(XP.setLoading(!1))}function*J_(){yield Go(XP.loadInvoices,q_)}function*Y_(){yield Go(RP.load,X_),yield Go(RP.cancelSubscription,Q_),yield Go(RP.renewSubscription,Z_)}function*X_(){const e=yield zi((e=>{var t,n;return null==(t=e.auth)||null==(n=t.user)?void 0:n.tenantId}));yield C_(e)}function*Q_(){const{subscription:e}=yield zi((e=>e.subscriptions.billing.subscription));if(!e)return void(yield $i(RP.setCancellationError("Subscription not found.")));if(null!=e&&e.externallyManaged)return void(yield $i(RP.setCancellationError("Billing is externally managed.")));const{id:t,cancellation:n,status:a}=e||{};if(!n&&a===ef.ACTIVE)try{yield $i(RP.setCancellationLoading(!0)),yield ji(dp.subscriptions.cancelManagedSubscription,t),yield D_(),yield $i(RP.setCancellationLoading(!1))}catch(e){yield $i(RP.setCancellationError(_g(e)))}}function*Z_(){const{subscription:e}=yield zi((e=>e.subscriptions.billing.subscription));if(!e)return void(yield $i(RP.setCancellationError("Subscription not found.")));if(null!=e&&e.externallyManaged)return void(yield $i(RP.setCancellationError("Billing is externally managed")));const{id:t,cancellation:n}=e||{};if((null==n?void 0:n.policy)===nf.AT_PERIOD_END)try{yield $i(RP.setRenewalLoading(!0)),yield ji(dp.subscriptions.renewManagedSubscription,t),yield D_(),yield $i(RP.setRenewalLoading(!1))}catch(e){yield $i(RP.setCancellationError(_g(e)))}}function*eL(){yield $i(RP.setLoading(!0)),yield Ki(500),yield $i(RP.setState({subscription:O_,fetching:!1,loading:!1,error:null}))}function*tL(){yield Go(RP.load,eL)}function*nL(){yield xi([ji(U_),ji(F_),ji(z_),ji(Y_)])}function*aL(){yield xi([ji(M_),ji(W_),ji(J_),ji(tL)])}function*iL(){yield Go(r_.loadCheckout,oL),yield Go(r_.resetCheckout,rL),yield Go(r_.submitCheckout,sL),yield Go(r_.confirmCheckout,lL),yield Go(r_.errorCheckout,dL)}function*oL(){yield $i(r_.setState({fetching:!1,loading:!1,error:null,confirmed:!1}))}function*rL(){yield $i(r_.setState({loading:!1,error:null,confirmed:!1}))}function*sL(){yield $i(r_.setState({loading:!0,error:null}))}function*lL({payload:{paymentMethodId:e,planId:t}}){const n=yield zi((e=>e.subscriptions.billing.subscription.subscription)),a=yield zi((e=>e.subscriptions.billing.information.summary)),i=(null==n?void 0:n.status)===ef.TRIALING,o=!(null==a||!a.paymentMethodId);if(n){if(yield $i(r_.setState({loading:!0,error:null})),i&&o)return yield cL(),void(yield $i(RP.setState({subscription:G({},n,{status:ef.ACTIVE})})));try{yield ji(dp.subscriptions.updateManagedSubscription,n.id,{paymentMethodId:e,planId:t}),yield xi([R_(),G_(),K_()]),yield cL()}catch(e){yield $i(r_.setState({loading:!1,error:_g(e)}))}}else yield $i(r_.setState({loading:!1,error:"Subscription not found"}))}function*cL(){yield $i(r_.setState({loading:!1,error:null,confirmed:!0}))}function*dL({payload:e}){yield $i(r_.setState({loading:!1,error:e}))}function*uL(){yield Go(r_.resetCheckout,rL)}function*yL(){yield Go(AP.loadPlans,fL)}function*fL(){yield $i(AP.setLoading(!0));try{const e=(yield ji(dp.subscriptions.getSubscriptionPlans)).map((e=>{var t,n;return{id:e.id,name:e.name,description:e.description,price:(null==(t=e.price)?void 0:t.amount)||0,currency:(null==(n=e.price)?void 0:n.currency)||"usd",recurringInterval:"month",slug:e.slug}}));yield $i(AP.setState({fetching:!1,loading:!1,plans:e}))}catch(e){yield $i(AP.setError(_g(e)))}}function*pL(){yield $i(AP.setLoading(!0)),yield Ki(500),yield $i(AP.setState({fetching:!1,loading:!1,plans:P_.map((e=>{var t,n;return G({},e,{price:(null==(t=e.price)?void 0:t.amount)||0,currency:(null==(n=e.price)?void 0:n.currency)||"usd",recurringInterval:"month"})}))}))}function*gL(){yield Go(AP.loadPlans,pL)}function*SL(){yield Go(PP.loadPaymentConfiguration,vL)}function*vL(){yield $i(PP.setLoading(!0));try{(yield ji(dp.subscriptions.getPaymentProviders)||[]).find((e=>"1"===e.status&&e.providerType===af.Stripe))?yield function*(){yield $i(PP.setLoading(!0));try{const e=yield ji(dp.subscriptions.getStripePaymentProviderConfiguration);yield $i(PP.setState({loading:!1,fetching:!1,config:{paymentProvider:A_.STRIPE,apiKey:e.publishableKey}}))}catch(e){yield $i(PP.setError(_g(e)))}}():yield $i(PP.setError("Payment provider not configured"))}catch(e){yield $i(PP.setError(_g(e)))}}function*hL(){yield $i(PP.setLoading(!0)),yield Ki(500),yield $i(PP.setState({loading:!1,fetching:!1,config:{paymentProvider:A_.STRIPE,apiKey:""}}))}function*mL(){yield Go(PP.loadPaymentConfiguration,hL)}function*bL(){yield Go(y_.createCardSetupIntentSecret,AL)}function*AL({payload:e}){yield $i(y_.setState({loading:!0,error:null,cardSetupIntentSecret:null}));try{const t={};e&&(t.paymentMethodId=e);const{setupIntentSecret:n}=yield ji(dp.subscriptions.createStripePaymentMethodSetupIntentSecret,t);yield $i(y_.setState({cardSetupIntentSecret:n,loading:!1}))}catch(e){yield $i(y_.setError(_g(e)))}}function*TL(){yield Go(v_.loadVendorPublicConfiguration,EL)}function*EL(){yield $i(v_.setLoading(!0));try{const e=yield ji(dp.subscriptions.getVendorPublicConfigurations);yield $i(v_.setState({fetching:!1,loading:!1,vendorPublicConfig:e}))}catch(e){yield $i(v_.setError(_g(e)))}}function*kL(){yield $i(v_.setLoading(!0)),yield Ki(500),yield $i(v_.setState({fetching:!1,loading:!1,vendorPublicConfig:w_}))}function*IL(){yield Go(v_.loadVendorPublicConfiguration,kL)}const OL={sagas:function*(){yield xi([ji(nL),ji(iL),ji(yL),ji(SL),ji(bL),ji(TL)])},mockSagas:function*(){yield xi([ji(aL),ji(uL),ji(gL),ji(mL),ji(IL)])},reducer:b_,actions:m_,initialState:h_,storeName:"subscriptions"},PL={sagas:function*(){yield Go(XS.loadVendorPublicInfo,QS)},storeName:Ft,initialState:qS,reducer:JS,actions:XS},{reducer:_L}=pt({name:"root",initialState:{context:void 0,urlStrategy:"path",previewMode:!1,appName:"default"},reducers:{setContext:{prepare:e=>({payload:e}),reducer:(e,{payload:t})=>(Vo.setContext(t),G({},e,{context:t}))}}}),LL=(e,t,n=!1,a,i,o=!1,r="path")=>{const s="undefined"==typeof window;let l=t;if(s&&null==t)throw Error("createFronteggStore(initState, storeHolder) failed, storeHolder must not be null in Server-Side rendering");if(l||(l=window),!l.store){var c,d,u,y,f,p,g,S,v,h;n||o||Vo.setContext(e.context);const t=Lo(),s=[...dt({thunk:!1,immutableCheck:!1,serializableCheck:!1}),t];l.store=ut({middleware:s,preloadedState:{root:G({},e,{previewMode:n,urlStrategy:r}),[QI.storeName]:G({},QI.initialState,a,null!=(c=null==i?void 0:i.auth)?c:{},{routes:G({},QI.initialState.routes,null!=(d=null==a?void 0:a.routes)?d:{},null!=(u=null==i||null==(y=i.auth)?void 0:y.routes)?u:{})}),[kO.storeName]:G({},kO.initialState,null!=(f=null==i?void 0:i.auditLogs)?f:{},{auditLogsState:G({},kO.initialState.auditLogsState,null!=(p=null==i||null==(g=i.auditLogs)?void 0:g.auditLogsState)?p:{}),auditsMetadataState:G({},kO.initialState.auditsMetadataState,null!=(S=null==i||null==(v=i.auditLogs)?void 0:v.auditsMetadataState)?S:{})}),[OO]:G({},IO,null!=(h=null==i?void 0:i.audits)?h:{}),[yP.storeName]:yP.initialState,[OL.storeName]:OL.initialState,[PL.storeName]:PL.initialState},reducer:Ke({root:_L,[QI.storeName]:QI.reducer,[kO.storeName]:kO.reducer,[OO]:_O,[yP.storeName]:yP.reducer,[OL.storeName]:OL.reducer,[PL.storeName]:PL.reducer})});const m=function*(){yield xi([ji(QI.sagas),ji(kO.sagas),ji($O),ji(yP.sagas),ji(OL.sagas),ji(PL.sagas)])},b=function*(){yield xi([ji(QI.mockSagas),ji(kO.mockSagas),ji(OL.mockSagas)])};n?(l.store.destroy=t.run(b).cancel,l.store.dispatch(ja.requestAuthorize(!0))):l.store.destroy=t.run(m).cancel,l.store.subscribeStateChanged=e=>{let t=l.store.getState();return l.store.subscribe((()=>{const n=l.store.getState();t!=n&&(t=n,e(n))}))}}return l.store};var wL=n(9314);const DL=()=>{if(!Vo.shouldLoadEntitlements())throw new Error("You must first enable entitlements via Frontegg options to use this function")},UL=(e,t)=>e?e.isEntitled?{isEntitled:!0}:{isEntitled:!1,justification:e.justification}:{isEntitled:!1,justification:t};var RL=n(9714),CL=n.n(RL);function NL(e,t=0,n=1){return Math.min(Math.max(t,e),n)}function ML(e){if(e.type)return e;if("#"===e.charAt(0))return ML(function(e){e=e.substr(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let n=e.match(t);return n&&1===n[0].length&&(n=n.map((e=>e+e))),n?`rgb${4===n.length?"a":""}(${n.map(((e,t)=>t<3?parseInt(e,16):Math.round(parseInt(e,16)/255*1e3)/1e3)).join(", ")})`:""}(e));const t=e.indexOf("("),n=e.substring(0,t);if(-1===["rgb","rgba","hsl","hsla","color"].indexOf(n))throw new Error("MUI: Unsupported `%s` color.\nThe following formats are supported: #nnn, #nnnnnn, rgb(), rgba(), hsl(), hsla(), color(). "+e);const a=e.substring(t+1,e.length-1);let i,o;if("color"===n){if(o=a.split(" "),i=o.shift(),4===o.length&&"/"===o[3].charAt(0)&&(o[3]=o[3].substr(1)),-1===["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(i))throw new Error("MUI: unsupported `%s` color space.\nThe following color spaces are supported: srgb, display-p3, a98-rgb, prophoto-rgb, rec-2020."+i)}else o=a.split(",");return{type:n,values:o.map((e=>parseFloat(e))),colorSpace:i}}function FL(e){const{type:t,colorSpace:n}=e;let{values:a}=e;return-1!==t.indexOf("rgb")?a=a.map(((e,t)=>t<3?parseInt(e,10):e)):-1!==t.indexOf("hsl")&&(a[1]=`${a[1]}%`,a[2]=`${a[2]}%`),a=-1!==t.indexOf("color")?`${n} ${a.join(" ")}`:`${a.join(", ")}`,`${t}(${a})`}function GL(e){if(0===e.indexOf("#"))return e;const{values:t}=ML(e);return`#${t.map(((e,t)=>function(e){const t=e.toString(16);return 1===t.length?`0${t}`:t}(3===t?Math.round(255*e):e))).join("")}`}function $L(e,t){return e=ML(e),t=NL(t),"rgb"!==e.type&&"hsl"!==e.type||(e.type+="a"),"color"===e.type?e.values[3]=`/${t}`:e.values[3]=t,FL(e)}function xL(e,t){if(e=ML(e),t=NL(t),-1!==e.type.indexOf("hsl"))e.values[2]*=1-t;else if(-1!==e.type.indexOf("rgb")||-1!==e.type.indexOf("color"))for(let n=0;n<3;n+=1)e.values[n]*=1-t;return FL(e)}function VL(e,t){if(e=ML(e),t=NL(t),-1!==e.type.indexOf("hsl"))e.values[2]+=(100-e.values[2])*t;else if(-1!==e.type.indexOf("rgb"))for(let n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;else if(-1!==e.type.indexOf("color"))for(let n=0;n<3;n+=1)e.values[n]+=(1-e.values[n])*t;return FL(e)}const jL=e=>{if(e)return{main:e,light:GL(VL(e,.4)),dark:GL(xL(e,.15)),hover:GL(xL(e,.15)),active:GL(xL(e,.2))}},BL=e=>{if(e)return{main:e,light:VL(e,.7),dark:xL(e,.2)}},WL=(e,t)=>{var n,a,i,o,r,s,l,c,d,u,y,f;return null!=e&&e.palette&&"string"==typeof(null==e||null==(n=e.palette)?void 0:n.primary)?G({},t,{palette:{primary:G({},jL(null==e||null==(a=e.palette)?void 0:a.primary),{contrastText:null!=(i=null==e||null==(o=e.palette)?void 0:o.primaryText)?i:"#000000"}),secondary:G({},jL(null==e||null==(r=e.palette)?void 0:r.secondary),{contrastText:null!=(s=null==e||null==(l=e.palette)?void 0:l.secondaryText)?s:"#000000"}),danger:G({},jL(null==e||null==(c=e.palette)?void 0:c.error),{contrastText:"#FFF"}),success:G({},BL(null==e||null==(d=e.palette)?void 0:d.success),{contrastText:"#FFF"}),error:G({},BL(null==e||null==(u=e.palette)?void 0:u.error),{contrastText:"#FFF"}),warning:G({},BL(null==e||null==(y=e.palette)?void 0:y.warning),{contrastText:"#FFF"}),info:G({},BL(null==e||null==(f=e.palette)?void 0:f.info),{contrastText:"#FFF"})}}):{}},zL={theme:{},themeV2:{},localizations:{},navigation:{usage:{visibility:"hidden",permissions:["fe.usage.read"],featureFlag:"fe-usage-page"},webhooks:{visibility:"hidden",permissions:["fe.connectivity.read.webhooks"]},roles:{visibility:"hidden",permissions:["fe.secure.read.roles"]},users:{visibility:"always",permissions:["fe.secure.read.users"],inviteDialog:{phoneNumberField:"optional"}},personalApiTokens:{visibility:"hidden",permissions:["fe.secure.read.userApiTokens"]},apiTokens:{visibility:"hidden",permissions:["fe.secure.read.tenantApiTokens"]},profile:{visibility:"always"},privacy:{visibility:"always",permissions:["fe.secure.read.securityPolicy"]},account:{visibility:"always",permissions:["fe.secure.read.accountSettings"]},security:{visibility:"always",permissions:["fe.secure.read.securityPolicy"]},sso:{visibility:"hidden",permissions:["fe.secure.read.samlConfiguration"]},provisioning:{visibility:"hidden",permissions:["fe.secure.read.provisioningConfiguration"]},audits:{visibility:"always",permissions:["fe.secure.read.audits"]},subscriptions:{visibility:"hidden",permissions:["fe.subscriptions.*"]},allAccounts:{visibility:"byPermissions",permissions:["fe.account-hierarchy.read.subAccount"]},groups:{visibility:"hidden",permissions:["fe.secure.read.groups"]}}};class KL{constructor(){this._theme=zL.theme,this._themeV2=zL.themeV2,this._navigation=zL.navigation,this._localizations=zL.localizations,this._integrations=zL.integrations}static getInstance(e="default"){return this._instances[e]}static set(e,t="default"){const n=new KL;return n.set(e),KL._instances[t]=n,n}get theme(){var e;return null!=(e=this._theme)?e:{}}get themeV2(){var e;return null!=(e=this._themeV2)?e:{}}get navigation(){var e;return null!=(e=this._navigation)?e:{}}get localizations(){var e;return null!=(e=this._localizations)?e:{}}get integrations(){var e;return null!=(e=this._integrations)?e:{}}set(e){try{var t,n,a,i,o,r,s,l,c;this._navigation=CL().all([null!=(t=zL.navigation)?t:{},null!=(n=null==e?void 0:e.navigation)?n:{}]),this._theme=CL().all([null!=(a=zL.theme)?a:{},WL(null==e?void 0:e.theme,zL.theme)]),this._themeV2=CL().all([null!=(i=zL.themeV2)?i:{},null!=(o=null==e?void 0:e.themeV2)?o:{}]),this._localizations=CL().all([null!=(r=zL.localizations)?r:{},null!=(s=null==e?void 0:e.localizations)?s:{}]),this._integrations=CL().all([null!=(l=zL.integrations)?l:{},null!=(c=null==e?void 0:e.integrations)?c:{}])}catch(e){this._navigation=zL.navigation,this._theme=zL.theme,this._themeV2=zL.themeV2,this._localizations=zL.localizations,this._integrations=zL.integrations}}}KL._instances={};var HL=function(e){return e.replace(/\W+/g," ").split(/ |\B(?=[A-Z])/).map((function(e){return e.toLowerCase()})).join("")},qL=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=document.createElement(t);return Object.keys(n).forEach((function(e){return a.setAttribute(e,n[e])})),e.appendChild(a),a},JL=function(e){return new Promise((function(t,n){var a=4e3,i=setInterval((function(){return null!=e.themeSetter?(clearInterval(i),void t(!0)):a<0?(n("Failed to load Renderer with themeSetter"),void clearInterval(i)):void(a-=50)}),50)}))},YL=function(e){var t=e.toString();if(t){var n=new URL(window.location.href);n.search=t,window.history.pushState(null,"",n.toString())}};let XL,QL,ZL,ew,tw,nw,aw,iw,ow,rw,sw,lw;!function(e){e.phoneNumber="phoneNumber"}(XL||(XL={})),function(e){e.Name="name",e.PhoneNumber="phoneNumber",e.Address="address",e.JobTitle="jobTitle"}(QL||(QL={})),function(e){e.LoginSessions="loginSessions",e.Mfa="mfa"}(ZL||(ZL={})),function(e){e.Name="name",e.PhoneNumber="phoneNumber"}(ew||(ew={})),function(e){e.CompanyName="companyName",e.Address="address",e.Website="website",e.Timezone="timezone",e.Currency="currency"}(tw||(tw={})),function(e){e.Invoices="invoices"}(nw||(nw={})),function(e){e.SessionManagement="sessionManagement",e.GeneralSettings="generalSettings",e.IpRestrictions="ipRestrictions",e.DomainRestrictions="domainRestrictions"}(aw||(aw={})),function(e){e.IdleSessionTimeout="idleSessionTimeout",e.ForceReLogin="forceReLogin",e.MaximumConcurrentSessions="maximumConcurrentSessions"}(iw||(iw={})),function(e){e.Mfa="mfa",e.UserLockout="userLockout",e.PasswordHistory="passwordHistory"}(ow||(ow={})),function(e){e.IpAddressRestrictions="ipAddressRestrictions"}(rw||(rw={})),function(e){e.RestrictSignupByEmailDomain="restrictSignupByEmailDomain"}(sw||(sw={})),function(e){e.Settings="settings",e.CustomLogin="customLogin"}(lw||(lw={}));const cw={hidden:"hidden",viewOnly:"viewOnly",edit:"edit"},dw={hidden:"hidden",edit:"edit"},uw="6.183.0";var yw={admin_portal_ip_restrictions:"on",admin_portal_domain_restrictions:"on","new-mfa-pages":"on","show-passkeys-new":"on","groups-admin-box-new":"on","msp-all-accounts-new":"on","temporary-users":"on"},fw=function(){function e(t,n){var a,i,o=this,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];O(this,e),this.name=void 0,this.iframeRendering=void 0,this.options=void 0,this.loading=!0,this.cdnUrl="https://assets.frontegg.com/admin-box/".concat(uw),this.customElementName="",this.adminPortalEl=void 0,this.adminPortalRenderer=void 0,this.loginBoxEl=void 0,this.checkoutDialogEl=void 0,this.checkoutDialogRenderer=void 0,this.adminPortalContainer=void 0,this.loginBoxContainer=void 0,this.checkoutDialogContainer=void 0,this.loginBoxRenderer=void 0,this.store=void 0,this.loadingListeners=[],this.updateLocalizations=void 0,this.loadAdminBoxMetadata=N(F().mark((function e(){var t,n,a,i,r;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Rr,o.options.metadata){e.next=12;break}return e.prev=2,e.next=5,t("/metadata",{entityName:"adminBox"});case 5:r=e.sent,o.options.metadata=null!=(n=null==r||null==(a=r.rows)||null==(i=a[0])?void 0:i.configuration)?n:{},e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.error("failed to get admin portal metadata",e.t0);case 12:KL.set(o.options.metadata,o.name);case 13:case"end":return e.stop()}}),e,null,[[2,9]])}))),this.requestAuthorize=N(F().mark((function e(){var t,n,a;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=null==(t=o.options.authOptions)||null==(n=t.hostedLoginOptions)?void 0:n.loadUserOnFirstLoad,o.options.builderMode||"nextjs"===o.options.framework||(o.options.hostedLoginBox&&!o.options.customLoginBox?a&&o.store.dispatch({type:"auth/requestHostedLoginAuthorizeV2",payload:{shouldRedirectToLogin:!1,firstTime:!0}}):o.store.dispatch({type:"auth/requestAuthorize",payload:!0}));case 2:case"end":return e.stop()}}),e)}))),this.loadFeatureFlags=N(F().mark((function e(){var t;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o.options.previewMode&&!o.options.builderMode){e.next=4;break}Br.set(yw,o.name),e.next=15;break;case 4:return e.prev=4,e.next=7,Wr();case 7:t=e.sent,o.options.overrideFeatureFlags&&Object.assign(t,o.options.overrideFeatureFlags),Br.set(t,o.name),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(4),console.error("failed to get admin portal feature flags",e.t0);case 15:case"end":return e.stop()}}),e,null,[[4,12]])}))),this.setFeatureFlagsForPreview=function(e){Br.set(Object.assign({},yw,e),o.name)},this.queryFeatureFlags=function(e){return Br.getFeatureFlags(e,o.name)},this.updateLocalizationsSetter=function(e){o.updateLocalizations=e},this.getEntitlementsFromStore=function(){var e;return null==(e=o.store.getState().auth.user)?void 0:e.entitlements},this.getUserFromStore=function(){return o.store.getState().auth.user},this.getEntitlementsQueryData=function(e){var t=o.getUserFromStore();return{entitlements:o.getEntitlementsFromStore(),attributes:{custom:e,jwt:t},isV2:R(o.queryFeatureFlags([Vr]),1)[0]}};var l=HL(n),c="frontegg-app-".concat(l);this.iframeRendering=r,this.name=l,this.options=Object.assign({},t,{contextOptions:Object.assign({requestCredentials:"include"},t.contextOptions)}),this.options.cdnUrl&&(this.cdnUrl=this.options.cdnUrl),this.customElementName=c;var d,u,y=this.options.authOptions?Object.assign({},this.options.authOptions,{hostedLoginBox:this.options.hostedLoginBox}):{hostedLoginBox:this.options.hostedLoginBox};if(y.disableSilentRefresh=null==(a=this.options.authOptions)?void 0:a.disableSilentRefresh,this.options.store){if(this.store=this.options.store,!s&&this.options.store.getState().root.appName!==n)throw Error("Mismatch in store names")}else this.store=LL({context:this.options.contextOptions,appName:this.name},this,this.options.previewMode,y,{auth:null!=(d=this.options.authOptions)?d:{},audits:null!=(u=this.options.auditsOptions)?u:{}},!1,this.options.urlStrategy);D.setInstance(l,this),this.setEntitlementsOptions(t.entitlementsOptions),this.setSessionContext({enableSessionPerTenant:null==(i=t.authOptions)?void 0:i.enableSessionPerTenant}),Vo.setAppName(l)}var t,n,a,i;return w(e,[{key:"setEntitlementsOptions",value:function(e){Vo.setEntitlementsOptions(Object.assign({},e))}},{key:"setSessionContext",value:function(e){Vo.setSessionContext(Object.assign({},e))}},{key:"initContainers",value:(i=N(F().mark((function e(t){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.adminPortalEl=t.adminPortalEl,this.loginBoxEl=t.loginBoxEl,this.checkoutDialogEl=t.checkoutDialogEl,this.adminPortalContainer=t.adminPortalContainer,this.loginBoxContainer=t.loginBoxContainer,this.checkoutDialogContainer=t.checkoutDialogContainer;try{"nextjs"!==this.options.framework&&document.body.classList.add("frontegg-loading")}catch(e){console.error("Failed to add frontegg-loading to body classList")}return e.next=9,this.loadFeatureFlags();case 9:return e.next=11,Promise.all([this.loadAdminBoxMetadata(),this.requestAuthorize()]);case 11:this.options.previewMode||this.options.customLoginBox||(this.loadLoginBox(),n=this.name,a=void 0,void 0,o=void 0,null==(o=null==(i=KL.getInstance(n))||null==(a=i.integrations)?void 0:a.gtm)||o.filter((function(e){var t=e.id;return e.enabled&&function(e){return/^GTM-[a-zA-Z0-9]+$/.test(e)}(t)})).forEach((function(e){var t=e.id,n=document.createElement("script");n.innerHTML="\n        (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':\n        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],\n        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=\n        'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);\n        })(window,document,'script','dataLayer','".concat(t,"');\n      "),document.body.appendChild(n)}))),this.options.lazyLoadAdminPortal||this.loadScript("FronteggAdminPortal");case 13:case"end":return e.stop()}var n,a,i,o}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"updateMetadata",value:function(e){var t;KL.set(e,this.name),null!=e&&e.localizations&&(null==(t=this.updateLocalizations)||t.call(this,e.localizations))}},{key:"addOnLoadedListener",value:function(e){this.loading?this.loadingListeners.push(e):e()}},{key:"ready",value:function(e){this.loading?e():this.addOnLoadedListener(e)}},{key:"loginWithRedirect",value:function(){this.store.dispatch({type:"auth/setState",payload:{isLoading:!0}}),this.store.dispatch({type:"auth/requestHostedLoginAuthorize"})}},{key:"logout",value:function(){this.store.dispatch({type:"auth/setState",payload:{isLoading:!0}}),this.store.dispatch({type:"auth/logout"})}},{key:"loadScript",value:function(e){var t=this;return new Promise((function(n,a){if(window[e])n(window[e]);else{var i=document.createElement("script");i.src="".concat(t.cdnUrl,"/").concat({FronteggLoginBox:"login-box/index.js",FronteggAdminPortal:"admin-portal/index.js"}[e]),i.setAttribute("id","".concat(e,"Script")),i.setAttribute("cdn-url",t.cdnUrl),i.onload=function(){window["".concat(e,"Init")]?n(window["".concat(e,"Init")]({FronteggRestApi:k,FronteggTypes:I})):n(window[e])},i.onerror=function(e){console.log("Profile page error",e),a(e)},document.body.append(i)}}))}},{key:"loadLoginBox",value:(a=N(F().mark((function e(){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadScript("FronteggLoginBox");case 2:e.sent.render(this.loginBoxEl,{injector:this,options:this.options}),this.loading=!1,this.loadingListeners.forEach((function(e){try{e()}catch(e){console.error("Failed to call loadLoginBoxListener",e)}})),this.loadingListeners=[];case 7:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"showAdminPortal",value:(n=N(F().mark((function e(){var t;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Vo.setRequestSource(da.AdminPortal),e.next=3,this.loadScript("FronteggAdminPortal");case 3:t=e.sent,this.adminPortalRenderer=t.render(this.adminPortalEl,{injector:this,options:this.options});case 5:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"hideAdminPortal",value:function(){try{var e,t=new URLSearchParams(window.location.search);null==(e=this.adminPortalRenderer)||e.unmount(),YL(t),Vo.setRequestSource(null)}catch(e){console.error("Failed to unmount admin portal",e)}}},{key:"showCheckoutDialog",value:(t=N(F().mark((function e(t){var n;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadScript("FronteggAdminPortal");case 2:n=e.sent,this.checkoutDialogRenderer=n.renderCheckoutDialog(this.checkoutDialogEl,Object.assign({injector:this},t,{options:this.options}));case 4:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"hideCheckoutDialog",value:function(){try{var e;null==(e=this.checkoutDialogRenderer)||e.unmount()}catch(e){console.error("Failed to unmount checkout dialog",e)}}},{key:"getFeatureEntitlements",value:function(e,t){var n=this.getEntitlementsQueryData(t);return((e,t,n,a)=>{var i;return DL(),a?(0,wL.tE)(t,e,n):UL(null==e||null==(i=e.features)?void 0:i[t],qs.MISSING_FEATURE)})(n.entitlements,e,n.attributes,n.isV2)}},{key:"getPermissionEntitlements",value:function(e,t){var n=this.getEntitlementsQueryData(t);return((e,t,n,a)=>{var i;return DL(),a?(0,wL.wJ)(t,e,n):UL(null==e||null==(i=e.permissions)?void 0:i[t],qs.MISSING_PERMISSION)})(n.entitlements,e,n.attributes,n.isV2)}},{key:"getEntitlements",value:function(e,t){return"permissionKey"in e?this.getPermissionEntitlements(e.permissionKey,t):this.getFeatureEntitlements(e.featureKey,t)}},{key:"loadEntitlements",value:function(e){this.store.dispatch({type:"auth/loadEntitlements",payload:{callback:e}})}},{key:"stepUp",value:function(e){var t=this.store.getState(),n=(null==t?void 0:t.auth)||{},a=n.hostedLoginBox,i=n.routes.stepUpUrl;a?this.store.dispatch({type:"auth/stepUpHostedLogin",payload:e}):((e,t,n)=>{uv();const a=new URLSearchParams(window.location.search);n&&a.set("maxAge",n.toString()),t(`${e}${a?`?${a}`:""}`,{refresh:!1})})(i,t.auth.onRedirectTo,null==e?void 0:e.maxAge)}},{key:"isSteppedUp",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(null==(e=this.store.getState())?void 0:e.auth)||{},a=n.user;return dv(a,t)}},{key:"close",value:function(){this.hideAdminPortal(),this.hideCheckoutDialog()}}]),e}(),pw=function(){function e(){O(this,e)}return w(e,null,[{key:"setAuthentication",value:function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"default",i=D.getInstance(a);e&&t?(Vo.setAccessToken(t),Vo.setUser(Object.assign({},n,{accessToken:t})),i.store.dispatch(ja.setState({isLoading:!1,isAuthenticated:e,user:n})),i.store.dispatch(ja.loadTenants())):(Vo.setAccessToken(null),Vo.setUser(null),i.store.dispatch(ja.setState({isLoading:!1,isAuthenticated:!1,user:null})))}}]),e}(),gw=function(){function e(){O(this,e)}return w(e,null,[{key:"show",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";D.getInstance(e).showAdminPortal()}},{key:"hide",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";D.getInstance(e).hideAdminPortal()}}]),e}(),Sw=function(){function e(){O(this,e)}return w(e,null,[{key:"show",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default";D.getInstance(t).showCheckoutDialog(e)}},{key:"hide",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";D.getInstance(e).hideCheckoutDialog()}}]),e}(),vw=function(e){var t;return null!=(t=window.FronteggAdminPortal.adminPortalStaticThemesDefaults[e])?t:void 0},hw=function(){function e(t,n,a,i){var o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];O(this,e),this.app=void 0,this.options=void 0,this.store=void 0,this.setRoute=function(){},this.themeSetter=void 0,this.themeOptions={};var r={baseUrl:"preview"};if(a){if(this.store=a,!o&&a.getState().root.appName!==t)throw Error("Mismatch in store names")}else this.store=LL({context:r,appName:t},this,!0,void 0,void 0,!0);this.options=Object.assign({themeOptions:n,iframeRendering:!0,metadata:{},previewMode:!0,builderMode:!0,store:this.store,contextOptions:r},i),this.app=new fw(this.options,t,!0),KL.set({},t)}var t;return w(e,[{key:"render",value:(t=N(F().mark((function e(t){var n,a,i,o,r=this;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t.querySelector("#root"))||((n=t.ownerDocument.createElement("div")).setAttribute("id","root"),t.appendChild(n)),this.app.adminPortalContainer=t,this.app.adminPortalEl=n,a=function(e){r.themeSetter=e},i=function(e){r.setRoute=e},e.next=8,this.app.loadScript("FronteggAdminPortal");case 8:return o=e.sent,this.app.adminPortalRenderer=o.renderPage(n,{options:this.options,injector:this.app,setThemeSetter:a,setStaticRouteSetter:i}),this.app.loading=!1,e.next=13,JL(this);case 13:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"setStaticRoute",value:function(e){var t;null==(t=this.setRoute)||t.call(this,e)}},{key:"unmount",value:function(){try{var e;null==(e=this.app.adminPortalRenderer)||e.unmount()}catch(e){console.error("Failed to unmount admin Portal renderer",e)}}},{key:"setTheme",value:function(e){var t;this.themeOptions=e,this.themeSetter||console.warn("this.themeSetter is not defined yet"),null==(t=this.themeSetter)||t.call(this,this.themeOptions)}}]),e}(),mw="modern",bw=function(e){var t,n=window.FronteggAdminPortal.themes;return null!=(t=n[e])?t:n[mw]},Aw=function(){function e(t,n,a,i){var o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];O(this,e),this.app=void 0,this.options=void 0,this.store=void 0,this.themeSetter=void 0,this.setRoute=function(){},this.themeOptions={};var r={baseUrl:"preview"};if(a){if(this.store=a,!o&&a.getState().root.appName!==t)throw Error("Mismatch in store names")}else this.store=LL({context:r,appName:t},this,!0,void 0,void 0,!0);this.options=Object.assign({themeOptions:n,iframeRendering:!0,metadata:{},previewMode:!0,builderMode:!0,store:this.store,contextOptions:r,onRedirectTo:function(){console.debug("path")}},i),this.app=new fw(this.options,t,!0,o),KL.set({},t)}var t;return w(e,[{key:"render",value:(t=N(F().mark((function e(t){var n,a,i,o,r=this;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t.querySelector("#root"))||((n=t.ownerDocument.createElement("div")).setAttribute("id","root"),t.appendChild(n)),this.app.loginBoxContainer=t,this.app.loginBoxEl=n,a=function(e){r.themeSetter=e},i=function(e){r.setRoute=e},e.next=8,this.app.loadScript("FronteggLoginBox");case 8:return o=e.sent,this.app.loginBoxRenderer=o.renderPage(n,{options:this.options,injector:this.app,setThemeSetter:a,setStaticRouteSetter:i,staticRoute:"/account/login"}),e.next=12,JL(this);case 12:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"unmount",value:function(){try{var e;null==(e=this.app.loginBoxRenderer)||e.unmount()}catch(e){console.error("Failed to unmount login box renderer",e)}}},{key:"setTheme",value:function(e){var t;this.themeOptions=e,this.themeSetter||console.warn("this.themeSetter is not defined yet"),null==(t=this.themeSetter)||t.call(this,this.themeOptions)}},{key:"setStaticRoute",value:function(e){var t;this.setRoute||console.warn("this.setRoute is not defined yet"),null==(t=this.setRoute)||t.call(this,e)}},{key:"setStore",value:function(e){this.store.dispatch({type:"auth/setState",payload:e})}}]),e}();function Tw(e,t){return Tw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Tw(e,t)}function Ew(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Tw(e,t)}function kw(e,t){if(t&&("object"===P(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Iw(e){return Iw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Iw(e)}function Ow(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function Pw(e,t,n){return Pw=Ow()?Reflect.construct.bind():function(e,t,n){var a=[null];a.push.apply(a,t);var i=new(Function.bind.apply(e,a));return n&&Tw(i,n.prototype),i},Pw.apply(null,arguments)}function _w(e){var t="function"==typeof Map?new Map:void 0;return _w=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return Pw(e,arguments,Iw(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Tw(n,e)},_w(e)}function Lw(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Iw(e);if(t){var i=Iw(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return kw(this,n)}}var ww=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",n=new fw(e,t);if("undefined"!=typeof document){var a;if(!e.contextOptions.baseUrl){var i=new Error('Edit <FronteggProvider/> options { ContextOptions: { baseUrl: "" } } in order to connect your application');throw document.body.innerHTML="",alert(i.message),i}if(!customElements.get("frontegg-app")){var o=function(e){Ew(n,e);var t=Lw(n);function n(){var e;O(this,n);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).app=null,e}return w(n,[{key:"connectedCallback",value:function(){this.updateContent()}},{key:"attributeChangedCallback",value:function(e,t,n){if("app-name"===e){if(null===t)return;if(t===n)return;this.innerHTML="",null===n?this.remove():this.updateContent()}console.debug("attributeChangedCallback",e,t,n)}},{key:"updateContent",value:function(){var e,t=null!=(e=this.getAttribute("app-name"))?e:"default",n=D.getInstance(t);if(null===n)throw Error("FronteggApp not found for appName: '".concat(t,"'"));this.setAttribute("id","frontegg-app-".concat(n.name));var a=qL(this,"div",{id:"frontegg-admin-portal-container-".concat(n.name)}),i=qL(this,"div",{id:"frontegg-login-box-container-".concat(n.name)}),o=qL(this,"div",{id:"frontegg-checkout-dialog-container-".concat(n.name)}),r=a.attachShadow({mode:"open"}),s=i.attachShadow({mode:"open"}),l=o.attachShadow({mode:"open"}),c=qL(r,"div",{id:"frontegg-admin-portal-".concat(n.name),class:"frontegg-root-content"}),d=qL(s,"div",{id:"frontegg-login-box-".concat(n.name),class:"frontegg-root-content"}),u=qL(l,"div",{id:"frontegg-checkout-dialog-".concat(n.name),class:"frontegg-root-content"});n.initContainers({adminPortalEl:c,loginBoxEl:d,adminPortalContainer:a,loginBoxContainer:i,checkoutDialogContainer:o,checkoutDialogEl:u})}}],[{key:"observedAttributes",get:function(){return["app-name"]}}]),n}(_w(HTMLElement));customElements.define("frontegg-app",o)}null==(a=document.querySelector('frontegg-app[app-name="'.concat(n.name,'"]')))||a.remove();var r=document.createElement("frontegg-app");r.setAttribute("app-name",n.name),document.body.appendChild(r)}return n}})(),a})()));